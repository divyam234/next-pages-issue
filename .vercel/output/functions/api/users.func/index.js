
  
  globalThis._ENTRIES = {};
/**/;self.__PRERENDER_MANIFEST="{\"version\":4,\"routes\":{},\"dynamicRoutes\":{},\"preview\":{\"previewModeId\":\"a7303520c3fb6eb76690a93223eb2e1b\",\"previewModeSigningKey\":\"4496751e24e2fe66a4f7f8d8b02d85ddcf09fcfa24346a0051835853e9cb08f6\",\"previewModeEncryptionKey\":\"e03c2efd6d497fa4ff29c7fc9158b31a8957783e475320d048e7aee439189cf1\"},\"notFoundRoutes\":[]}"
/**/;/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		var threw = true;
/******/ 		try {
/******/ 			__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 			threw = false;
/******/ 		} finally {
/******/ 			if(threw) delete __webpack_module_cache__[moduleId];
/******/ 		}
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = __webpack_modules__;
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/chunk loaded */
/******/ 	(() => {
/******/ 		var deferred = [];
/******/ 		__webpack_require__.O = (result, chunkIds, fn, priority) => {
/******/ 			if(chunkIds) {
/******/ 				priority = priority || 0;
/******/ 				for(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];
/******/ 				deferred[i] = [chunkIds, fn, priority];
/******/ 				return;
/******/ 			}
/******/ 			var notFulfilled = Infinity;
/******/ 			for (var i = 0; i < deferred.length; i++) {
/******/ 				var [chunkIds, fn, priority] = deferred[i];
/******/ 				var fulfilled = true;
/******/ 				for (var j = 0; j < chunkIds.length; j++) {
/******/ 					if ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {
/******/ 						chunkIds.splice(j--, 1);
/******/ 					} else {
/******/ 						fulfilled = false;
/******/ 						if(priority < notFulfilled) notFulfilled = priority;
/******/ 					}
/******/ 				}
/******/ 				if(fulfilled) {
/******/ 					deferred.splice(i--, 1)
/******/ 					var r = fn();
/******/ 					if (r !== undefined) result = r;
/******/ 				}
/******/ 			}
/******/ 			return result;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/global */
/******/ 	(() => {
/******/ 		__webpack_require__.g = (function() {
/******/ 			if (typeof globalThis === 'object') return globalThis;
/******/ 			try {
/******/ 				return this || new Function('return this')();
/******/ 			} catch (e) {
/******/ 				if (typeof window === 'object') return window;
/******/ 			}
/******/ 		})();
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/jsonp chunk loading */
/******/ 	(() => {
/******/ 		// no baseURI
/******/ 		
/******/ 		// object to store loaded and loading chunks
/******/ 		// undefined = chunk not loaded, null = chunk preloaded/prefetched
/******/ 		// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded
/******/ 		var installedChunks = {
/******/ 			993: 0
/******/ 		};
/******/ 		
/******/ 		// no chunk on demand loading
/******/ 		
/******/ 		// no prefetching
/******/ 		
/******/ 		// no preloaded
/******/ 		
/******/ 		// no HMR
/******/ 		
/******/ 		// no HMR manifest
/******/ 		
/******/ 		__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);
/******/ 		
/******/ 		// install a JSONP callback for chunk loading
/******/ 		var webpackJsonpCallback = (parentChunkLoadingFunction, data) => {
/******/ 			var [chunkIds, moreModules, runtime] = data;
/******/ 			// add "moreModules" to the modules object,
/******/ 			// then flag all "chunkIds" as loaded and fire callback
/******/ 			var moduleId, chunkId, i = 0;
/******/ 			if(chunkIds.some((id) => (installedChunks[id] !== 0))) {
/******/ 				for(moduleId in moreModules) {
/******/ 					if(__webpack_require__.o(moreModules, moduleId)) {
/******/ 						__webpack_require__.m[moduleId] = moreModules[moduleId];
/******/ 					}
/******/ 				}
/******/ 				if(runtime) var result = runtime(__webpack_require__);
/******/ 			}
/******/ 			if(parentChunkLoadingFunction) parentChunkLoadingFunction(data);
/******/ 			for(;i < chunkIds.length; i++) {
/******/ 				chunkId = chunkIds[i];
/******/ 				if(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {
/******/ 					installedChunks[chunkId][0]();
/******/ 				}
/******/ 				installedChunks[chunkId] = 0;
/******/ 			}
/******/ 			return __webpack_require__.O(result);
/******/ 		}
/******/ 		
/******/ 		var chunkLoadingGlobal = self["webpackChunk_N_E"] = self["webpackChunk_N_E"] || [];
/******/ 		chunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));
/******/ 		chunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	
/******/ })()
;
//# sourceMappingURL=edge-runtime-webpack.js.map
/**/;(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[829],{714:(e,t,r)=>{"use strict";let i,s,n,o,a,l,h;r.r(t),r.d(t,{default:()=>it});var u,c={};async function f(){if("_ENTRIES"in globalThis&&_ENTRIES.middleware_instrumentation&&_ENTRIES.middleware_instrumentation.register)try{await _ENTRIES.middleware_instrumentation.register()}catch(e){throw e.message=`An error occurred while loading instrumentation hook: ${e.message}`,e}}r.r(c),r.d(c,{users:()=>te});let d=null;function p(){return d||(d=f()),d}function g(e){return`The edge runtime does not support Node.js '${e}' module.
Learn More: https://nextjs.org/docs/messages/node-module-in-edge-runtime`}process!==r.g.process&&(process.env=r.g.process.env,r.g.process=process),Object.defineProperty(globalThis,"__import_unsupported",{value:function(e){let t=new Proxy(function(){},{get(t,r){if("then"===r)return{};throw Error(g(e))},construct(){throw Error(g(e))},apply(r,i,s){if("function"==typeof s[0])return s[0](t);throw Error(g(e))}});return new Proxy({},{get:()=>t})},enumerable:!1,configurable:!1}),p();class m extends Error{constructor({page:e}){super(`The middleware "${e}" accepts an async API directly with the form:
  
  export function middleware(request, event) {
    return NextResponse.redirect('/new-location')
  }
  
  Read more: https://nextjs.org/docs/messages/middleware-new-signature
  `)}}class y extends Error{constructor(){super(`The request.page has been deprecated in favour of \`URLPattern\`.
  Read more: https://nextjs.org/docs/messages/middleware-request-page
  `)}}class b extends Error{constructor(){super(`The request.ua has been removed in favour of \`userAgent\` function.
  Read more: https://nextjs.org/docs/messages/middleware-parse-user-agent
  `)}}function v(e){let t={},r=[];if(e)for(let[i,s]of e.entries())"set-cookie"===i.toLowerCase()?(r.push(...function(e){var t,r,i,s,n,o=[],a=0;function l(){for(;a<e.length&&/\s/.test(e.charAt(a));)a+=1;return a<e.length}for(;a<e.length;){for(t=a,n=!1;l();)if(","===(r=e.charAt(a))){for(i=a,a+=1,l(),s=a;a<e.length&&"="!==(r=e.charAt(a))&&";"!==r&&","!==r;)a+=1;a<e.length&&"="===e.charAt(a)?(n=!0,a=s,o.push(e.substring(t,i)),t=a):a=i+1}else a+=1;(!n||a>=e.length)&&o.push(e.substring(t,e.length))}return o}(s)),t[i]=1===r.length?r[0]:r):t[i]=s;return t}function w(e){try{return String(new URL(String(e)))}catch(t){throw Error(`URL is malformed "${String(e)}". Please use only absolute URLs - https://nextjs.org/docs/messages/middleware-relative-urls`,{cause:t})}}let S=Symbol("response"),_=Symbol("passThrough"),E=Symbol("waitUntil");class x{constructor(e){this[E]=[],this[_]=!1}respondWith(e){this[S]||(this[S]=Promise.resolve(e))}passThroughOnException(){this[_]=!0}waitUntil(e){this[E].push(e)}}class C extends x{constructor(e){super(e.request),this.sourcePage=e.page}get request(){throw new m({page:this.sourcePage})}respondWith(){throw new m({page:this.sourcePage})}}function A(e){return e.replace(/\/$/,"")||"/"}function P(e){let t=e.indexOf("#"),r=e.indexOf("?"),i=r>-1&&(t<0||r<t);return i||t>-1?{pathname:e.substring(0,i?r:t),query:i?e.substring(r,t>-1?t:void 0):"",hash:t>-1?e.slice(t):""}:{pathname:e,query:"",hash:""}}function T(e,t){if(!e.startsWith("/")||!t)return e;let{pathname:r,query:i,hash:s}=P(e);return""+t+r+i+s}function L(e,t){if(!e.startsWith("/")||!t)return e;let{pathname:r,query:i,hash:s}=P(e);return""+r+t+i+s}function I(e,t){if("string"!=typeof e)return!1;let{pathname:r}=P(e);return r===t||r.startsWith(t+"/")}function R(e,t){let r;let i=e.split("/");return(t||[]).some(t=>!!i[1]&&i[1].toLowerCase()===t.toLowerCase()&&(r=t,i.splice(1,1),e=i.join("/")||"/",!0)),{pathname:e,detectedLocale:r}}let k=/(?!^https?:\/\/)(127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}|\[::1\]|localhost)/;function O(e,t){return new URL(String(e).replace(k,"localhost"),t&&String(t).replace(k,"localhost"))}let M=Symbol("NextURLInternal");class N{constructor(e,t,r){let i,s;"object"==typeof t&&"pathname"in t||"string"==typeof t?(i=t,s=r||{}):s=r||t||{},this[M]={url:O(e,i??s.base),options:s,basePath:""},this.analyze()}analyze(){var e,t,r,i,s;let n=function(e,t){var r,i;let{basePath:s,i18n:n,trailingSlash:o}=null!=(r=t.nextConfig)?r:{},a={pathname:e,trailingSlash:"/"!==e?e.endsWith("/"):o};s&&I(a.pathname,s)&&(a.pathname=function(e,t){if(!I(e,t))return e;let r=e.slice(t.length);return r.startsWith("/")?r:"/"+r}(a.pathname,s),a.basePath=s);let l=a.pathname;if(a.pathname.startsWith("/_next/data/")&&a.pathname.endsWith(".json")){let e=a.pathname.replace(/^\/_next\/data\//,"").replace(/\.json$/,"").split("/"),r=e[0];a.buildId=r,l="index"!==e[1]?"/"+e.slice(1).join("/"):"/",!0===t.parseData&&(a.pathname=l)}if(n){let e=t.i18nProvider?t.i18nProvider.analyze(a.pathname):R(a.pathname,n.locales);a.locale=e.detectedLocale,a.pathname=null!=(i=e.pathname)?i:a.pathname,!e.detectedLocale&&a.buildId&&(e=t.i18nProvider?t.i18nProvider.analyze(l):R(l,n.locales)).detectedLocale&&(a.locale=e.detectedLocale)}return a}(this[M].url.pathname,{nextConfig:this[M].options.nextConfig,parseData:!0,i18nProvider:this[M].options.i18nProvider}),o=function(e,t){let r;if((null==t?void 0:t.host)&&!Array.isArray(t.host))r=t.host.toString().split(":",1)[0];else{if(!e.hostname)return;r=e.hostname}return r.toLowerCase()}(this[M].url,this[M].options.headers);this[M].domainLocale=this[M].options.i18nProvider?this[M].options.i18nProvider.detectDomainLocale(o):function(e,t,r){if(e)for(let n of(r&&(r=r.toLowerCase()),e)){var i,s;let e=null==(i=n.domain)?void 0:i.split(":",1)[0].toLowerCase();if(t===e||r===n.defaultLocale.toLowerCase()||(null==(s=n.locales)?void 0:s.some(e=>e.toLowerCase()===r)))return n}}(null==(t=this[M].options.nextConfig)?void 0:null==(e=t.i18n)?void 0:e.domains,o);let a=(null==(r=this[M].domainLocale)?void 0:r.defaultLocale)||(null==(s=this[M].options.nextConfig)?void 0:null==(i=s.i18n)?void 0:i.defaultLocale);this[M].url.pathname=n.pathname,this[M].defaultLocale=a,this[M].basePath=n.basePath??"",this[M].buildId=n.buildId,this[M].locale=n.locale??a,this[M].trailingSlash=n.trailingSlash}formatPathname(){var e;let t;return t=function(e,t,r,i){if(!t||t===r)return e;let s=e.toLowerCase();return!i&&(I(s,"/api")||I(s,"/"+t.toLowerCase()))?e:T(e,"/"+t)}((e={basePath:this[M].basePath,buildId:this[M].buildId,defaultLocale:this[M].options.forceLocale?void 0:this[M].defaultLocale,locale:this[M].locale,pathname:this[M].url.pathname,trailingSlash:this[M].trailingSlash}).pathname,e.locale,e.buildId?void 0:e.defaultLocale,e.ignorePrefix),(e.buildId||!e.trailingSlash)&&(t=A(t)),e.buildId&&(t=L(T(t,"/_next/data/"+e.buildId),"/"===e.pathname?"index.json":".json")),t=T(t,e.basePath),!e.buildId&&e.trailingSlash?t.endsWith("/")?t:L(t,"/"):A(t)}formatSearch(){return this[M].url.search}get buildId(){return this[M].buildId}set buildId(e){this[M].buildId=e}get locale(){return this[M].locale??""}set locale(e){var t,r;if(!this[M].locale||!(null==(r=this[M].options.nextConfig)?void 0:null==(t=r.i18n)?void 0:t.locales.includes(e)))throw TypeError(`The NextURL configuration includes no locale "${e}"`);this[M].locale=e}get defaultLocale(){return this[M].defaultLocale}get domainLocale(){return this[M].domainLocale}get searchParams(){return this[M].url.searchParams}get host(){return this[M].url.host}set host(e){this[M].url.host=e}get hostname(){return this[M].url.hostname}set hostname(e){this[M].url.hostname=e}get port(){return this[M].url.port}set port(e){this[M].url.port=e}get protocol(){return this[M].url.protocol}set protocol(e){this[M].url.protocol=e}get href(){let e=this.formatPathname(),t=this.formatSearch();return`${this.protocol}//${this.host}${e}${t}${this.hash}`}set href(e){this[M].url=O(e),this.analyze()}get origin(){return this[M].url.origin}get pathname(){return this[M].url.pathname}set pathname(e){this[M].url.pathname=e}get hash(){return this[M].url.hash}set hash(e){this[M].url.hash=e}get search(){return this[M].url.search}set search(e){this[M].url.search=e}get password(){return this[M].url.password}set password(e){this[M].url.password=e}get username(){return this[M].url.username}set username(e){this[M].url.username=e}get basePath(){return this[M].basePath}set basePath(e){this[M].basePath=e.startsWith("/")?e:`/${e}`}toString(){return this.href}toJSON(){return this.href}[Symbol.for("edge-runtime.inspect.custom")](){return{href:this.href,origin:this.origin,protocol:this.protocol,username:this.username,password:this.password,host:this.host,hostname:this.hostname,port:this.port,pathname:this.pathname,search:this.search,searchParams:this.searchParams,hash:this.hash}}clone(){return new N(String(this),this[M].options)}}var D=r(668);let B=Symbol("internal request");class $ extends Request{constructor(e,t={}){let r="string"!=typeof e&&"url"in e?e.url:String(e);w(r),e instanceof Request?super(e,t):super(r,t);let i=new N(r,{headers:v(this.headers),nextConfig:t.nextConfig});this[B]={cookies:new D.RequestCookies(this.headers),geo:t.geo||{},ip:t.ip,nextUrl:i,url:i.toString()}}[Symbol.for("edge-runtime.inspect.custom")](){return{cookies:this.cookies,geo:this.geo,ip:this.ip,nextUrl:this.nextUrl,url:this.url,bodyUsed:this.bodyUsed,cache:this.cache,credentials:this.credentials,destination:this.destination,headers:Object.fromEntries(this.headers),integrity:this.integrity,keepalive:this.keepalive,method:this.method,mode:this.mode,redirect:this.redirect,referrer:this.referrer,referrerPolicy:this.referrerPolicy,signal:this.signal}}get cookies(){return this[B].cookies}get geo(){return this[B].geo}get ip(){return this[B].ip}get nextUrl(){return this[B].nextUrl}get page(){throw new y}get ua(){throw new b}get url(){return this[B].url}}let q=Symbol("internal response"),Q=new Set([301,302,303,307,308]);function j(e,t){var r;if(null==e?void 0:null==(r=e.request)?void 0:r.headers){if(!(e.request.headers instanceof Headers))throw Error("request.headers must be an instance of Headers");let r=[];for(let[i,s]of e.request.headers)t.set("x-middleware-request-"+i,s),r.push(i);t.set("x-middleware-override-headers",r.join(","))}}class U extends Response{constructor(e,t={}){super(e,t),this[q]={cookies:new D.ResponseCookies(this.headers),url:t.url?new N(t.url,{headers:v(this.headers),nextConfig:t.nextConfig}):void 0}}[Symbol.for("edge-runtime.inspect.custom")](){return{cookies:this.cookies,url:this.url,body:this.body,bodyUsed:this.bodyUsed,headers:Object.fromEntries(this.headers),ok:this.ok,redirected:this.redirected,status:this.status,statusText:this.statusText,type:this.type}}get cookies(){return this[q].cookies}static json(e,t){let r=Response.json(e,t);return new U(r.body,r)}static redirect(e,t){let r="number"==typeof t?t:(null==t?void 0:t.status)??307;if(!Q.has(r))throw RangeError('Failed to execute "redirect" on "response": Invalid status code');let i="object"==typeof t?t:{},s=new Headers(null==i?void 0:i.headers);return s.set("Location",w(e)),new U(null,{...i,headers:s,status:r})}static rewrite(e,t){let r=new Headers(null==t?void 0:t.headers);return r.set("x-middleware-rewrite",w(e)),j(t,r),new U(null,{...t,headers:r})}static next(e){let t=new Headers(null==e?void 0:e.headers);return t.set("x-middleware-next","1"),j(e,t),new U(null,{...e,headers:t})}}function F(e,t){let r="string"==typeof t?new URL(t):t,i=new URL(e,t),s=r.protocol+"//"+r.host;return i.protocol+"//"+i.host===s?i.toString().replace(s,""):i.toString()}let z=[["RSC"],["Next-Router-State-Tree"],["Next-Router-Prefetch"]];r(985);let H={client:"client",server:"server",edgeServer:"edge-server"};H.client,H.server,H.edgeServer,Symbol("polyfills");let W=["__nextFallback","__nextLocale","__nextInferredLocaleFromDefault","__nextDefaultLocale","__nextIsNotFound","_rsc"],V=["__nextDataReq"];function K(e){return e.startsWith("/")?e:"/"+e}let G="nxtP",J="x-prerender-revalidate",Y=".meta",X="x-next-revalidated-tags",Z={shared:"shared",reactServerComponents:"rsc",serverSideRendering:"ssr",actionBrowser:"action-browser",api:"api",middleware:"middleware",edgeAsset:"edge-asset",appPagesBrowser:"app-pages-browser",appMetadataRoute:"app-metadata-route",appRouteHandler:"app-route-handler"};({...Z,GROUP:{server:[Z.reactServerComponents,Z.actionBrowser,Z.appMetadataRoute,Z.appRouteHandler],nonClientServerTarget:[Z.middleware,Z.api],app:[Z.reactServerComponents,Z.actionBrowser,Z.appMetadataRoute,Z.appRouteHandler,Z.serverSideRendering,Z.appPagesBrowser]}});class ee{static get(e,t,r){let i=Reflect.get(e,t,r);return"function"==typeof i?i.bind(e):i}static set(e,t,r,i){return Reflect.set(e,t,r,i)}static has(e,t){return Reflect.has(e,t)}static deleteProperty(e,t){return Reflect.deleteProperty(e,t)}}class et extends Error{constructor(){super("Headers cannot be modified. Read more: https://nextjs.org/docs/app/api-reference/functions/headers")}static callable(){throw new et}}class er extends Headers{constructor(e){super(),this.headers=new Proxy(e,{get(t,r,i){if("symbol"==typeof r)return ee.get(t,r,i);let s=r.toLowerCase(),n=Object.keys(e).find(e=>e.toLowerCase()===s);if(void 0!==n)return ee.get(t,n,i)},set(t,r,i,s){if("symbol"==typeof r)return ee.set(t,r,i,s);let n=r.toLowerCase(),o=Object.keys(e).find(e=>e.toLowerCase()===n);return ee.set(t,o??r,i,s)},has(t,r){if("symbol"==typeof r)return ee.has(t,r);let i=r.toLowerCase(),s=Object.keys(e).find(e=>e.toLowerCase()===i);return void 0!==s&&ee.has(t,s)},deleteProperty(t,r){if("symbol"==typeof r)return ee.deleteProperty(t,r);let i=r.toLowerCase(),s=Object.keys(e).find(e=>e.toLowerCase()===i);return void 0===s||ee.deleteProperty(t,s)}})}static seal(e){return new Proxy(e,{get(e,t,r){switch(t){case"append":case"delete":case"set":return et.callable;default:return ee.get(e,t,r)}}})}merge(e){return Array.isArray(e)?e.join(", "):e}static from(e){return e instanceof Headers?e:new er(e)}append(e,t){let r=this.headers[e];"string"==typeof r?this.headers[e]=[r,t]:Array.isArray(r)?r.push(t):this.headers[e]=t}delete(e){delete this.headers[e]}get(e){let t=this.headers[e];return void 0!==t?this.merge(t):null}has(e){return void 0!==this.headers[e]}set(e,t){this.headers[e]=t}forEach(e,t){for(let[r,i]of this.entries())e.call(t,i,r,this)}*entries(){for(let e of Object.keys(this.headers)){let t=e.toLowerCase(),r=this.get(t);yield[t,r]}}*keys(){for(let e of Object.keys(this.headers)){let t=e.toLowerCase();yield t}}*values(){for(let e of Object.keys(this.headers)){let t=this.get(e);yield t}}[Symbol.iterator](){return this.entries()}}class ei extends Error{constructor(){super("Cookies can only be modified in a Server Action or Route Handler. Read more: https://nextjs.org/docs/app/api-reference/functions/cookies#cookiessetname-value-options")}static callable(){throw new ei}}class es{static seal(e){return new Proxy(e,{get(e,t,r){switch(t){case"clear":case"delete":case"set":return ei.callable;default:return ee.get(e,t,r)}}})}}let en=Symbol.for("next.mutated.cookies");class eo{static wrap(e,t){let r=new D.ResponseCookies(new Headers);for(let t of e.getAll())r.set(t);let i=[],s=new Set,n=()=>{var e;let n=null==fetch.__nextGetStaticStore?void 0:null==(e=fetch.__nextGetStaticStore.call(fetch))?void 0:e.getStore();n&&(n.pathWasRevalidated=!0);let o=r.getAll();if(i=o.filter(e=>s.has(e.name)),t){let e=[];for(let t of i){let r=new D.ResponseCookies(new Headers);r.set(t),e.push(r.toString())}t(e)}};return new Proxy(r,{get(e,t,r){switch(t){case en:return i;case"delete":return function(...t){s.add("string"==typeof t[0]?t[0]:t[0].name);try{e.delete(...t)}finally{n()}};case"set":return function(...t){s.add("string"==typeof t[0]?t[0]:t[0].name);try{return e.set(...t)}finally{n()}};default:return ee.get(e,t,r)}}})}}let ea="__prerender_bypass";Symbol("__next_preview_data"),Symbol(ea);class el{constructor(e,t,r,i){var s;let n=e&&function(e,t){let r=er.from(e.headers),i=r.get(J),s=i===t.previewModeId,n=r.has("x-prerender-revalidate-if-generated");return{isOnDemandRevalidate:s,revalidateOnlyGenerated:n}}(t,e).isOnDemandRevalidate,o=null==(s=r.get(ea))?void 0:s.value;this.isEnabled=!!(!n&&o&&e&&o===e.previewModeId),this._previewModeId=null==e?void 0:e.previewModeId,this._mutableCookies=i}enable(){if(!this._previewModeId)throw Error("Invariant: previewProps missing previewModeId this should never happen");this._mutableCookies.set({name:ea,value:this._previewModeId,httpOnly:!0,sameSite:"none",secure:!0,path:"/"})}disable(){this._mutableCookies.set({name:ea,value:"",httpOnly:!0,sameSite:"none",secure:!0,path:"/",expires:new Date(0)})}}let eh={wrap(e,{req:t,res:r,renderOpts:i},s){let n;function o(e){r&&r.setHeader("Set-Cookie",e)}i&&"previewProps"in i&&(n=i.previewProps);let a={},l={get headers(){return a.headers||(a.headers=function(e){let t=er.from(e);for(let e of z)t.delete(e.toString().toLowerCase());return er.seal(t)}(t.headers)),a.headers},get cookies(){return a.cookies||(a.cookies=function(e){let t=new D.RequestCookies(er.from(e));return es.seal(t)}(t.headers)),a.cookies},get mutableCookies(){return a.mutableCookies||(a.mutableCookies=function(e,t){let r=new D.RequestCookies(er.from(e));return eo.wrap(r,t)}(t.headers,(null==i?void 0:i.onUpdateCookies)||(r?o:void 0))),a.mutableCookies},get draftMode(){return a.draftMode||(a.draftMode=new el(n,t,this.cookies,this.mutableCookies)),a.draftMode}};return e.run(l,s,l)}},eu=Error("Invariant: AsyncLocalStorage accessed in runtime where it is not available");class ec{disable(){throw eu}getStore(){}run(){throw eu}exit(){throw eu}enterWith(){throw eu}}let ef=globalThis.AsyncLocalStorage,ed=ef?new ef:new ec;class ep extends ${constructor(e){super(e.input,e.init),this.sourcePage=e.page}get request(){throw new m({page:this.sourcePage})}respondWith(){throw new m({page:this.sourcePage})}waitUntil(){throw new m({page:this.sourcePage})}}async function eg(e){let t,r;await p();let i=void 0!==self.__BUILD_MANIFEST,s="string"==typeof self.__PRERENDER_MANIFEST?JSON.parse(self.__PRERENDER_MANIFEST):void 0;e.request.url=e.request.url.replace(/\.rsc($|\?)/,"$1");let n=new N(e.request.url,{headers:e.request.headers,nextConfig:e.request.nextConfig}),o=[...n.searchParams.keys()];for(let e of o){let t=n.searchParams.getAll(e);if(e!==G&&e.startsWith(G)){let r=e.substring(G.length);for(let e of(n.searchParams.delete(r),t))n.searchParams.append(r,e);n.searchParams.delete(e)}}let a=n.buildId;n.buildId="";let l=e.request.headers["x-nextjs-data"];l&&"/index"===n.pathname&&(n.pathname="/");let h=function(e){let t=new Headers;for(let[r,i]of Object.entries(e)){let e=Array.isArray(i)?i:[i];for(let i of e)void 0!==i&&("number"==typeof i&&(i=i.toString()),t.append(r,i))}return t}(e.request.headers),u=new Map;if(!i)for(let e of z){let t=e.toString().toLowerCase(),r=h.get(t);r&&(u.set(t,h.get(t)),h.delete(t))}let c=new ep({page:e.page,input:(function(e,t){let r="string"==typeof e,i=r?new URL(e):e;for(let e of W)i.searchParams.delete(e);if(t)for(let e of V)i.searchParams.delete(e);return r?i.toString():i})(n,!0).toString(),init:{body:e.request.body,geo:e.request.geo,headers:h,ip:e.request.ip,method:e.request.method,nextConfig:e.request.nextConfig,signal:e.request.signal}});l&&Object.defineProperty(c,"__isData",{enumerable:!1,value:!0}),!globalThis.__incrementalCache&&e.IncrementalCache&&(globalThis.__incrementalCache=new e.IncrementalCache({appDir:!0,fetchCache:!0,minimalMode:!0,fetchCacheKeyPrefix:void 0,dev:!1,requestHeaders:e.request.headers,requestProtocol:"https",getPrerenderManifest:()=>({version:-1,routes:{},dynamicRoutes:{},notFoundRoutes:[],preview:{previewModeId:"development-id"}})}));let f=new C({request:c,page:e.page}),d="/middleware"===e.page||"/src/middleware"===e.page;if((t=d?await eh.wrap(ed,{req:c,renderOpts:{onUpdateCookies:e=>{r=e},previewProps:(null==s?void 0:s.preview)||{previewModeId:"development-id",previewModeEncryptionKey:"",previewModeSigningKey:""}}},()=>e.handler(c,f)):await e.handler(c,f))&&!(t instanceof Response))throw TypeError("Expected an instance of Response to be returned");t&&r&&t.headers.set("set-cookie",r);let g=null==t?void 0:t.headers.get("x-middleware-rewrite");if(t&&g){let r=new N(g,{forceLocale:!0,headers:e.request.headers,nextConfig:e.request.nextConfig});r.host===c.nextUrl.host&&(r.buildId=a||r.buildId,t.headers.set("x-middleware-rewrite",String(r)));let i=F(String(r),String(n));l&&t.headers.set("x-nextjs-rewrite",i)}let m=null==t?void 0:t.headers.get("Location");if(t&&m&&!i){let r=new N(m,{forceLocale:!1,headers:e.request.headers,nextConfig:e.request.nextConfig});t=new Response(t.body,t),r.host===c.nextUrl.host&&(r.buildId=a||r.buildId,t.headers.set("Location",String(r))),l&&(t.headers.delete("Location"),t.headers.set("x-nextjs-redirect",F(String(r),String(n))))}let y=t||U.next(),b=y.headers.get("x-middleware-override-headers"),v=[];if(b){for(let[e,t]of u)y.headers.set(`x-middleware-request-${e}`,t),v.push(e);v.length>0&&y.headers.set("x-middleware-override-headers",b+","+v.join(","))}return{response:y,waitUntil:Promise.all(f[E]),fetchMetrics:c.fetchMetrics}}var em=r(695),ey=r.n(em);let eb=0,ev="x-vercel-cache-tags",ew="x-vercel-sc-headers",eS="x-vercel-revalidate",e_="x-vercel-cache-item-name";class eE{static isAvailable(e){return!!(e._requestHeaders["x-vercel-sc-host"]||process.env.SUSPENSE_CACHE_URL)}constructor(e){if(this.debug=!!process.env.NEXT_PRIVATE_DEBUG_CACHE,this.headers={},this.headers["Content-Type"]="application/json",ew in e._requestHeaders){let t=JSON.parse(e._requestHeaders[ew]);for(let e in t)this.headers[e]=t[e];delete e._requestHeaders[ew]}let t=e._requestHeaders["x-vercel-sc-host"]||process.env.SUSPENSE_CACHE_URL,r=e._requestHeaders["x-vercel-sc-basepath"]||process.env.SUSPENSE_CACHE_BASEPATH;process.env.SUSPENSE_CACHE_AUTH_TOKEN&&(this.headers.Authorization=`Bearer ${process.env.SUSPENSE_CACHE_AUTH_TOKEN}`),t?(this.cacheEndpoint=`https://${t}${r||""}`,this.debug&&console.log("using cache endpoint",this.cacheEndpoint)):this.debug&&console.log("no cache endpoint available"),e.maxMemoryCacheSize?i||(this.debug&&console.log("using memory store for fetch cache"),i=new(ey())({max:e.maxMemoryCacheSize,length({value:e}){var t;if(!e)return 25;if("REDIRECT"===e.kind)return JSON.stringify(e.props).length;if("IMAGE"===e.kind)throw Error("invariant image should not be incremental-cache");return"FETCH"===e.kind?JSON.stringify(e.data||"").length:"ROUTE"===e.kind?e.body.length:e.html.length+((null==(t=JSON.stringify(e.pageData))?void 0:t.length)||0)}})):this.debug&&console.log("not using memory store for fetch cache")}async revalidateTag(e){if(this.debug&&console.log("revalidateTag",e),Date.now()<eb){this.debug&&console.log("rate limited ",eb);return}try{let t=await fetch(`${this.cacheEndpoint}/v1/suspense-cache/revalidate?tags=${e}`,{method:"POST",headers:this.headers,next:{internal:!0}});if(429===t.status){let e=t.headers.get("retry-after")||"60000";eb=Date.now()+parseInt(e)}if(!t.ok)throw Error(`Request failed with status ${t.status}.`)}catch(t){console.warn(`Failed to revalidate tag ${e}`,t)}}async get(...e){let[t,r={}]=e,{tags:s,softTags:n,kindHint:o,fetchIdx:a,fetchUrl:l}=r;if("fetch"!==o)return null;if(Date.now()<eb)return this.debug&&console.log("rate limited"),null;let h=null==i?void 0:i.get(t);if(Date.now()-((null==h?void 0:h.lastModified)||0)>2e3&&(h=void 0),!h&&this.cacheEndpoint)try{let e=Date.now(),r=await fetch(`${this.cacheEndpoint}/v1/suspense-cache/${t}`,{method:"GET",headers:{...this.headers,[e_]:l,[ev]:(null==s?void 0:s.join(","))||"","x-next-cache-soft-tags":(null==n?void 0:n.join(","))||""},next:{internal:!0,fetchType:"cache-get",fetchUrl:l,fetchIdx:a}});if(429===r.status){let e=r.headers.get("retry-after")||"60000";eb=Date.now()+parseInt(e)}if(404===r.status)return this.debug&&console.log(`no fetch cache entry for ${t}, duration: ${Date.now()-e}ms`),null;if(!r.ok)throw console.error(await r.text()),Error(`invalid response from cache ${r.status}`);let o=await r.json();if(!o||"FETCH"!==o.kind)throw this.debug&&console.log({cached:o}),Error("invalid cache value");let u=r.headers.get("x-vercel-cache-state"),c=r.headers.get("age");h={value:o,lastModified:"fresh"!==u?Date.now()-31536e3:Date.now()-1e3*parseInt(c||"0",10)},this.debug&&console.log(`got fetch cache entry for ${t}, duration: ${Date.now()-e}ms, size: ${Object.keys(o).length}, cache-state: ${u} tags: ${null==s?void 0:s.join(",")} softTags: ${null==n?void 0:n.join(",")}`),h&&(null==i||i.set(t,h))}catch(e){this.debug&&console.error("Failed to get from fetch-cache",e)}return h||null}async set(...e){let[t,r,s]=e,{fetchCache:n,fetchIdx:o,fetchUrl:a,tags:l}=s;if(n){if(Date.now()<eb){this.debug&&console.log("rate limited");return}if(null==i||i.set(t,{value:r,lastModified:Date.now()}),this.cacheEndpoint)try{let e=Date.now();null!==r&&"revalidate"in r&&(this.headers[eS]=r.revalidate.toString()),!this.headers[eS]&&null!==r&&"data"in r&&(this.headers["x-vercel-cache-control"]=r.data.headers["cache-control"]);let i=JSON.stringify({...r,tags:void 0});this.debug&&console.log("set cache",t);let s=await fetch(`${this.cacheEndpoint}/v1/suspense-cache/${t}`,{method:"POST",headers:{...this.headers,[e_]:a||"",[ev]:(null==l?void 0:l.join(","))||""},body:i,next:{internal:!0,fetchType:"cache-set",fetchUrl:a,fetchIdx:o}});if(429===s.status){let e=s.headers.get("retry-after")||"60000";eb=Date.now()+parseInt(e)}if(!s.ok)throw this.debug&&console.log(await s.text()),Error(`invalid response ${s.status}`);this.debug&&console.log(`successfully set to fetch-cache for ${t}, duration: ${Date.now()-e}ms, size: ${i.length}`)}catch(e){this.debug&&console.error("Failed to update fetch cache",e)}}}}var ex=r(395),eC=r.n(ex);class eA{constructor(e){this.fs=e.fs,this.flushToDisk=e.flushToDisk,this.serverDistDir=e.serverDistDir,this.appDir=!!e._appDir,this.pagesDir=!!e._pagesDir,this.revalidatedTags=e.revalidatedTags,this.experimental=e.experimental,e.maxMemoryCacheSize&&!s&&(s=new(ey())({max:e.maxMemoryCacheSize,length({value:e}){var t;if(!e)return 25;if("REDIRECT"===e.kind)return JSON.stringify(e.props).length;if("IMAGE"===e.kind)throw Error("invariant image should not be incremental-cache");return"FETCH"===e.kind?JSON.stringify(e.data||"").length:"ROUTE"===e.kind?e.body.length:e.html.length+((null==(t=JSON.stringify(e.pageData))?void 0:t.length)||0)}})),this.serverDistDir&&this.fs&&(this.tagsManifestPath=eC().join(this.serverDistDir,"..","cache","fetch-cache","tags-manifest.json"),this.loadTagsManifest())}loadTagsManifest(){if(this.tagsManifestPath&&this.fs&&!n)try{n=JSON.parse(this.fs.readFileSync(this.tagsManifestPath,"utf8"))}catch(e){n={version:1,items:{}}}}async revalidateTag(e){if(this.loadTagsManifest(),!n||!this.tagsManifestPath)return;let t=n.items[e]||{};t.revalidatedAt=Date.now(),n.items[e]=t;try{await this.fs.mkdir(eC().dirname(this.tagsManifestPath)),await this.fs.writeFile(this.tagsManifestPath,JSON.stringify(n||{}))}catch(e){console.warn("Failed to update tags manifest.",e)}}async get(...e){var t,r,i;let[o,a={}]=e,{tags:l,softTags:h,kindHint:u}=a,c=null==s?void 0:s.get(o);if((null==c?void 0:null==(t=c.value)?void 0:t.kind)==="PAGE"){let e;let t=null==(i=c.value.headers)?void 0:i["x-next-cache-tags"];if("string"==typeof t&&(e=t.split(",")),null==e?void 0:e.length){this.loadTagsManifest();let t=e.some(e=>{var t;return(null==n?void 0:null==(t=n.items[e])?void 0:t.revalidatedAt)&&(null==n?void 0:n.items[e].revalidatedAt)>=((null==c?void 0:c.lastModified)||Date.now())});t&&(c=void 0)}}if(c&&(null==c?void 0:null==(r=c.value)?void 0:r.kind)==="FETCH"){this.loadTagsManifest();let e=[...l||[],...h||[]],t=e.some(e=>{var t;return!!this.revalidatedTags.includes(e)||(null==n?void 0:null==(t=n.items[e])?void 0:t.revalidatedAt)&&(null==n?void 0:n.items[e].revalidatedAt)>=((null==c?void 0:c.lastModified)||Date.now())});t&&(c=void 0)}return c??null}async set(...e){let[t,r,i]=e;if(null==s||s.set(t,{value:r,lastModified:Date.now()}),this.flushToDisk){if((null==r?void 0:r.kind)==="ROUTE"){let e=this.getFilePath(`${t}.body`,"app");await this.fs.mkdir(eC().dirname(e)),await this.fs.writeFile(e,r.body);let i={headers:r.headers,status:r.status,postponed:void 0};await this.fs.writeFile(e.replace(/\.body$/,Y),JSON.stringify(i,null,2));return}if((null==r?void 0:r.kind)==="PAGE"){let e="string"==typeof r.pageData,i=this.getFilePath(`${t}.html`,e?"app":"pages");if(await this.fs.mkdir(eC().dirname(i)),await this.fs.writeFile(i,r.html),await this.fs.writeFile(this.getFilePath(`${t}${e?this.experimental.ppr?".prefetch.rsc":".rsc":".json"}`,e?"app":"pages"),e?r.pageData:JSON.stringify(r.pageData)),r.headers||r.status){let e={headers:r.headers,status:r.status,postponed:r.postponed};await this.fs.writeFile(i.replace(/\.html$/,Y),JSON.stringify(e))}}else if((null==r?void 0:r.kind)==="FETCH"){let e=this.getFilePath(t,"fetch");await this.fs.mkdir(eC().dirname(e)),await this.fs.writeFile(e,JSON.stringify({...r,tags:i.tags}))}}}detectFileKind(e){if(!this.appDir&&!this.pagesDir)throw Error("Invariant: Can't determine file path kind, no page directory enabled");if(!this.appDir&&this.pagesDir)return"pages";if(this.appDir&&!this.pagesDir)return"app";let t=this.getFilePath(e,"pages");if(this.fs.existsSync(t))return"pages";if(t=this.getFilePath(e,"app"),this.fs.existsSync(t))return"app";throw Error(`Invariant: Unable to determine file path kind for ${e}`)}getFilePath(e,t){switch(t){case"fetch":return eC().join(this.serverDistDir,"..","cache","fetch-cache",e);case"pages":return eC().join(this.serverDistDir,"pages",e);case"app":return eC().join(this.serverDistDir,"app",e);default:throw Error("Invariant: Can't determine file path kind")}}}let eP=["(..)(..)","(.)","(..)","(...)"],eT=/\/\[[^/]+?\](?=\/|$)/,eL="undefined"!=typeof performance;function eI(e){var t;let r=/^\/index(\/|$)/.test(e)&&(void 0!==(t=e).split("/").find(e=>eP.find(t=>e.startsWith(t)))&&(t=function(e){let t,r,i;for(let s of e.split("/"))if(r=eP.find(e=>s.startsWith(e))){[t,i]=e.split(r,2);break}if(!t||!r||!i)throw Error(`Invalid interception route: ${e}. Must be in the format /<intercepting route>/(..|...|..)(..)/<intercepted route>`);switch(t=K(t.split("/").reduce((e,t,r,i)=>t?"("===t[0]&&t.endsWith(")")||"@"===t[0]||("page"===t||"route"===t)&&r===i.length-1?e:e+"/"+t:e,"")),r){case"(.)":i="/"===t?`/${i}`:t+"/"+i;break;case"(..)":if("/"===t)throw Error(`Invalid interception route: ${e}. Cannot use (..) marker at the root level, use (.) instead.`);i=t.split("/").slice(0,-1).concat(i).join("/");break;case"(...)":i="/"+i;break;case"(..)(..)":let s=t.split("/");if(s.length<=2)throw Error(`Invalid interception route: ${e}. Cannot use (..)(..) marker at the root level or one level up.`);i=s.slice(0,-2).concat(i).join("/");break;default:throw Error("Invariant: unexpected marker")}return{interceptingRoute:t,interceptedRoute:i}}(t).interceptedRoute),!eT.test(t))?"/index"+e:"/"===e?"/index":K(e);return r}function eR(e){return e.replace(/\/$/,"").replace(/\/index$/,"")||"/"}eL&&["mark","measure","getEntriesByName"].every(e=>"function"==typeof performance[e]);class ek{constructor({fs:e,dev:t,appDir:r,pagesDir:i,flushToDisk:s,fetchCache:n,minimalMode:o,serverDistDir:a,requestHeaders:l,requestProtocol:h,maxMemoryCacheSize:u,getPrerenderManifest:c,fetchCacheKeyPrefix:f,CurCacheHandler:d,allowedRevalidateHeaderKeys:p,experimental:g}){var m,y,b,v;this.locks=new Map,this.unlocks=new Map;let w=!!process.env.NEXT_PRIVATE_DEBUG_CACHE;d?w&&console.log("using custom cache handler",d.name):(e&&a&&(w&&console.log("using filesystem cache handler"),d=eA),eE.isAvailable({_requestHeaders:l})&&o&&n&&(w&&console.log("using fetch cache handler"),d=eE)),process.env.__NEXT_TEST_MAX_ISR_CACHE&&(u=parseInt(process.env.__NEXT_TEST_MAX_ISR_CACHE,10)),this.dev=t,this.minimalMode=o,this.requestHeaders=l,this.requestProtocol=h,this.allowedRevalidateHeaderKeys=p,this.prerenderManifest=c(),this.fetchCacheKeyPrefix=f;let S=[];l[J]===(null==(y=this.prerenderManifest)?void 0:null==(m=y.preview)?void 0:m.previewModeId)&&(this.isOnDemandRevalidate=!0),o&&"string"==typeof l[X]&&l["x-next-revalidate-tag-token"]===(null==(v=this.prerenderManifest)?void 0:null==(b=v.preview)?void 0:b.previewModeId)&&(S=l[X].split(",")),d&&(this.cacheHandler=new d({dev:t,fs:e,flushToDisk:s,serverDistDir:a,revalidatedTags:S,maxMemoryCacheSize:u,_pagesDir:!!i,_appDir:!!r,_requestHeaders:l,fetchCacheKeyPrefix:f,experimental:g}))}calculateRevalidate(e,t,r){if(r)return new Date().getTime()-1e3;let{initialRevalidateSeconds:i}=this.prerenderManifest.routes[eR(e)]||{initialRevalidateSeconds:1};return"number"==typeof i?1e3*i+t:i}_getPathname(e,t){return t?e:eI(e)}async unlock(e){let t=this.unlocks.get(e);t&&(t(),this.locks.delete(e),this.unlocks.delete(e))}async lock(e){process.env.__NEXT_INCREMENTAL_CACHE_IPC_PORT&&process.env.__NEXT_INCREMENTAL_CACHE_IPC_KEY;let t=()=>Promise.resolve(),r=this.locks.get(e);if(r)await r;else{let r=new Promise(e=>{t=async()=>{e()}});this.locks.set(e,r),this.unlocks.set(e,t)}return t}async revalidateTag(e){var t,r;return process.env.__NEXT_INCREMENTAL_CACHE_IPC_PORT&&process.env.__NEXT_INCREMENTAL_CACHE_IPC_KEY,null==(r=this.cacheHandler)?void 0:null==(t=r.revalidateTag)?void 0:t.call(r,e)}async fetchCacheKey(e,t={}){let r;let i=[],s=new TextEncoder,n=new TextDecoder;if(t.body){if("function"==typeof t.body.getReader){let e=t.body,r=[];try{await e.pipeTo(new WritableStream({write(e){"string"==typeof e?(r.push(s.encode(e)),i.push(e)):(r.push(e),i.push(n.decode(e,{stream:!0})))}})),i.push(n.decode());let o=r.reduce((e,t)=>e+t.length,0),a=new Uint8Array(o),l=0;for(let e of r)a.set(e,l),l+=e.length;t._ogBody=a}catch(e){console.error("Problem reading body",e)}}else if("function"==typeof t.body.keys){let e=t.body;for(let r of(t._ogBody=t.body,new Set([...e.keys()]))){let t=e.getAll(r);i.push(`${r}=${(await Promise.all(t.map(async e=>"string"==typeof e?e:await e.text()))).join(",")}`)}}else if("function"==typeof t.body.arrayBuffer){let e=t.body,r=await e.arrayBuffer();i.push(await e.text()),t._ogBody=new Blob([r],{type:e.type})}else"string"==typeof t.body&&(i.push(t.body),t._ogBody=t.body)}let o=JSON.stringify(["v3",this.fetchCacheKeyPrefix||"",e,t.method,"function"==typeof(t.headers||{}).keys?Object.fromEntries(t.headers):t.headers,t.mode,t.redirect,t.credentials,t.referrer,t.referrerPolicy,t.integrity,t.cache,i]);{var a;let e=s.encode(o);a=await crypto.subtle.digest("SHA-256",e),r=Array.prototype.map.call(new Uint8Array(a),e=>e.toString(16).padStart(2,"0")).join("")}return r}async get(e,t={}){var r,i,s;let n,o;if(process.env.__NEXT_INCREMENTAL_CACHE_IPC_PORT&&process.env.__NEXT_INCREMENTAL_CACHE_IPC_KEY,this.dev&&("fetch"!==t.kindHint||"no-cache"===this.requestHeaders["cache-control"]))return null;e=this._getPathname(e,"fetch"===t.kindHint);let a=null,l=t.revalidate,h=await (null==(r=this.cacheHandler)?void 0:r.get(e,t));if((null==h?void 0:null==(i=h.value)?void 0:i.kind)==="FETCH"){let e=[...t.tags||[],...t.softTags||[]];if(e.some(e=>{var t;return null==(t=this.revalidatedTags)?void 0:t.includes(e)}))return null;l=l||h.value.revalidate;let r=Math.round((Date.now()-(h.lastModified||0))/1e3),i=r>l,s=h.value.data;return{isStale:i,value:{kind:"FETCH",data:s,revalidate:l},revalidateAfter:Date.now()+1e3*l}}let u=null==(s=this.prerenderManifest.routes[eR(e)])?void 0:s.initialRevalidateSeconds;return(null==h?void 0:h.lastModified)===-1?(n=-1,o=-31536e3):n=!!(!1!==(o=this.calculateRevalidate(e,(null==h?void 0:h.lastModified)||Date.now(),this.dev&&"fetch"!==t.kindHint))&&o<Date.now())||void 0,h&&(a={isStale:n,curRevalidate:u,revalidateAfter:o,value:h.value}),!h&&this.prerenderManifest.notFoundRoutes.includes(e)&&(a={isStale:n,value:null,curRevalidate:u,revalidateAfter:o},this.set(e,a.value,t)),a}async set(e,t,r){if(process.env.__NEXT_INCREMENTAL_CACHE_IPC_PORT&&process.env.__NEXT_INCREMENTAL_CACHE_IPC_KEY,!this.dev||r.fetchCache){if(r.fetchCache&&JSON.stringify(t).length>2097152){if(this.dev)throw Error("fetch for over 2MB of data can not be cached");return}e=this._getPathname(e,r.fetchCache);try{var i;void 0===r.revalidate||r.fetchCache||(this.prerenderManifest.routes[e]={experimentalPPR:void 0,dataRoute:eC().posix.join("/_next/data",`${eI(e)}.json`),srcRoute:null,initialRevalidateSeconds:r.revalidate,prefetchDataRoute:void 0}),await (null==(i=this.cacheHandler)?void 0:i.set(e,t,r))}catch(t){console.warn("Failed to update prerender cache for",e,t)}}}}let eO=Symbol.for("drizzle:entityKind");function eM(e,t){if(!e||"object"!=typeof e)return!1;if(e instanceof t)return!0;if(!Object.prototype.hasOwnProperty.call(t,eO))throw Error(`Class "${t.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let r=e.constructor;if(r)for(;r;){if(eO in r&&r[eO]===t[eO])return!0;r=Object.getPrototypeOf(r)}return!1}Symbol.for("drizzle:hasOwnEntityKind");let eN=Symbol.for("drizzle:Name"),eD=Symbol.for("drizzle:Schema"),eB=Symbol.for("drizzle:Columns"),e$=Symbol.for("drizzle:OriginalName"),eq=Symbol.for("drizzle:BaseName"),eQ=Symbol.for("drizzle:IsAlias"),ej=Symbol.for("drizzle:ExtraConfigBuilder"),eU=Symbol.for("drizzle:IsDrizzleTable");class eF{static{this[eO]="Table"}static{this.Symbol={Name:eN,Schema:eD,OriginalName:e$,Columns:eB,BaseName:eq,IsAlias:eQ,ExtraConfigBuilder:ej}}constructor(e,t,r){this[eQ]=!1,this[ej]=void 0,this[eU]=!0,this[eN]=this[e$]=e,this[eD]=t,this[eq]=r}}let ez=Symbol.for("drizzle:PgInlineForeignKeys");class eH extends eF{static{o=eF.Symbol.ExtraConfigBuilder}static{this[eO]="PgTable"}static{this.Symbol=Object.assign({},eF.Symbol,{InlineForeignKeys:ez})}constructor(...e){super(...e),this[ez]=[],this[o]=void 0}}class eW{static{this[eO]="ColumnBuilder"}constructor(e,t,r){this.$default=this.$defaultFn,this.config={name:e,notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:t,columnType:r}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(e){return this.config.default=e,this.config.hasDefault=!0,this}$defaultFn(e){return this.config.defaultFn=e,this.config.hasDefault=!0,this}primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}}class eV{constructor(e,t){this.enumValues=void 0,this.table=e,this.config=t,this.name=t.name,this.notNull=t.notNull,this.default=t.default,this.defaultFn=t.defaultFn,this.hasDefault=t.hasDefault,this.primary=t.primaryKey,this.isUnique=t.isUnique,this.uniqueName=t.uniqueName,this.uniqueType=t.uniqueType,this.dataType=t.dataType,this.columnType=t.columnType}static{this[eO]="Column"}mapFromDriverValue(e){return e}mapToDriverValue(e){return e}}class eK{static{this[eO]="PgForeignKeyBuilder"}constructor(e,t){this._onUpdate="no action",this._onDelete="no action",this.reference=()=>{let{name:t,columns:r,foreignColumns:i}=e();return{name:t,columns:r,foreignTable:i[0].table,foreignColumns:i}},t&&(this._onUpdate=t.onUpdate,this._onDelete=t.onDelete)}onUpdate(e){return this._onUpdate=void 0===e?"no action":e,this}onDelete(e){return this._onDelete=void 0===e?"no action":e,this}build(e){return new eG(e,this)}}class eG{constructor(e,t){this.table=e,this.reference=t.reference,this.onUpdate=t._onUpdate,this.onDelete=t._onDelete}static{this[eO]="PgForeignKey"}getName(){let{name:e,columns:t,foreignColumns:r}=this.reference(),i=t.map(e=>e.name),s=r.map(e=>e.name),n=[this.table[eH.Symbol.Name],...i,r[0].table[eH.Symbol.Name],...s];return e??`${n.join("_")}_fk`}}function eJ(e,t){return`${e[eH.Symbol.Name]}_${t.join("_")}_unique`}class eY{constructor(e,t){this.nullsNotDistinctConfig=!1,this.name=t,this.columns=e}static{this[eO]="PgUniqueConstraintBuilder"}nullsNotDistinct(){return this.nullsNotDistinctConfig=!0,this}build(e){return new eZ(e,this.columns,this.nullsNotDistinctConfig,this.name)}}class eX{static{this[eO]="PgUniqueOnConstraintBuilder"}constructor(e){this.name=e}on(...e){return new eY(e,this.name)}}class eZ{constructor(e,t,r,i){this.nullsNotDistinct=!1,this.table=e,this.columns=t,this.name=i??eJ(this.table,this.columns.map(e=>e.name)),this.nullsNotDistinct=r}static{this[eO]="PgUniqueConstraint"}getName(){return this.name}}function e0(e,t,r){for(let i=t;i<e.length;i++){let s=e[i];if("\\"===s){i++;continue}if('"'===s)return[e.slice(t,i).replace(/\\/g,""),i+1];if(!r&&(","===s||"}"===s))return[e.slice(t,i).replace(/\\/g,""),i]}return[e.slice(t).replace(/\\/g,""),e.length]}function e1(e,...t){return e(...t)}class e2 extends eW{static{this[eO]="PgColumnBuilder"}array(e){return new e5(this.config.name,this,e)}references(e,t={}){return this.foreignKeyConfigs.push({ref:e,actions:t}),this}unique(e,t){return this.config.isUnique=!0,this.config.uniqueName=e,this.config.uniqueType=t?.nulls,this}buildForeignKeys(e,t){return this.foreignKeyConfigs.map(({ref:r,actions:i})=>e1((r,i)=>{let s=new eK(()=>{let t=r();return{columns:[e],foreignColumns:[t]}});return i.onUpdate&&s.onUpdate(i.onUpdate),i.onDelete&&s.onDelete(i.onDelete),s.build(t)},r,i))}constructor(...e){super(...e),this.foreignKeyConfigs=[]}}class e6 extends eV{constructor(e,t){t.uniqueName||(t.uniqueName=eJ(e,[t.name])),super(e,t),this.table=e}static{this[eO]="PgColumn"}}class e5 extends e2{static{this[eO]="PgArrayBuilder"}constructor(e,t,r){super(e,"array","PgArray"),this.config.baseBuilder=t,this.config.size=r}build(e){let t=this.config.baseBuilder.build(e);return new e3(e,this.config,t)}}class e3 extends e6{constructor(e,t,r,i){super(e,t),this.baseColumn=r,this.range=i,this.size=t.size}static{this[eO]="PgArray"}getSQLType(){return`${this.baseColumn.getSQLType()}[${"number"==typeof this.size?this.size:""}]`}mapFromDriverValue(e){return"string"==typeof e&&(e=function(e){let[t]=function e(t,r=0){let i=[],s=r,n=!1;for(;s<t.length;){let o=t[s];if(","===o){(n||s===r)&&i.push(""),n=!0,s++;continue}if(n=!1,"\\"===o){s+=2;continue}if('"'===o){let[e,r]=e0(t,s+1,!0);i.push(e),s=r;continue}if("}"===o)return[i,s+1];if("{"===o){let[r,n]=e(t,s+1);i.push(r),s=n;continue}let[a,l]=e0(t,s,!1);i.push(a),s=l}return[i,s]}(e,1);return t}(e)),e.map(e=>this.baseColumn.mapFromDriverValue(e))}mapToDriverValue(e,t=!1){let r=e.map(e=>null===e?null:eM(this.baseColumn,e3)?this.baseColumn.mapToDriverValue(e,!0):this.baseColumn.mapToDriverValue(e));return t?r:function e(t){return`{${t.map(t=>Array.isArray(t)?e(t):"string"==typeof t&&t.includes(",")?`"${t.replace(/"/g,'\\"')}"`:`${t}`).join(",")}}`}(r)}}class e4 extends e2{static{this[eO]="PgSerialBuilder"}constructor(e){super(e,"number","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new e8(e,this.config)}}class e8 extends e6{static{this[eO]="PgSerial"}getSQLType(){return"serial"}}class e7 extends e2{static{this[eO]="PgTextBuilder"}constructor(e,t){super(e,"string","PgText"),this.config.enumValues=t.enum}build(e){return new e9(e,this.config)}}class e9 extends e6{static{this[eO]="PgText"}getSQLType(){return"text"}constructor(...e){super(...e),this.enumValues=this.config.enumValues}}let te=function(e,t,r,i,s=e){let n=new eH(e,i,s),o=Object.fromEntries(Object.entries(t).map(([e,t])=>{let r=t.build(n);return n[ez].push(...t.buildForeignKeys(r,n)),[e,r]})),a=Object.assign(n,o);return a[eF.Symbol.Columns]=o,r&&(a[eH.Symbol.ExtraConfigBuilder]=r),a}("users",{id:new e4("id").primaryKey(),name:function(e,t={}){return new e7(e,t)}("name")},void 0,void 0);var tt=r(894);let tr=tt.Client;tt.ClientBase,tt.Connection,tt.DatabaseError,tt.NeonDbError;let ti=tt.Pool;tt.Query,tt.defaults;let ts=tt.neon;tt.neonConfig,tt.types;var tn=class extends Error{constructor(e,t){super(`VercelPostgresError - '${e}': ${t}`),this.code=e,this.name="VercelPostgresError"}};function to(e,...t){var r,i;if(!(Array.isArray(e)&&"raw"in e&&Array.isArray(e.raw))||!Array.isArray(t))throw new tn("incorrect_tagged_template_call","It looks like you tried to call `sql` as a function. Make sure to use it as a tagged template.\n	Example: sql`SELECT * FROM users`, not sql('SELECT * FROM users')");let s=null!=(r=e[0])?r:"";for(let t=1;t<e.length;t++)s+=`$${t}${null!=(i=e[t])?i:""}`;return[s,t]}var ta=class extends tr{async sql(e,...t){let[r,i]=to(e,...t);return this.query(r,i)}},tl=class extends ti{constructor(e){var t;super(e),this.Client=ta,this.connectionString=null!=(t=e.connectionString)?t:""}async sql(e,...t){let[r,i]=to(e,...t),s=ts(this.connectionString,{fullResults:!0});return s(r,i)}connect(e){return super.connect(e)}};function th(e){var t;let r=null!=(t=null==e?void 0:e.connectionString)?t:function(e="pool"){let t;switch(e){case"pool":t=process.env.POSTGRES_URL;break;case"direct":t=process.env.POSTGRES_URL_NON_POOLING;break;default:throw new tn("invalid_connection_type",`Unhandled type: ${e}`)}return"undefined"===t&&(t=void 0),t}("pool");if(!r)throw new tn("missing_connection_string","You did not supply a 'connectionString' and no 'POSTGRES_URL' env var was found.");if(!function(e){try{let t=e.startsWith("postgresql://")?e.replace("postgresql://","https://"):e;return"localhost"===new URL(t).hostname}catch(e){if(e instanceof TypeError||"object"==typeof e&&null!==e&&"message"in e&&"string"==typeof e.message&&"Invalid URL"===e.message)return!1;throw e}}(r)&&!r.includes("-pooler."))throw new tn("invalid_connection_string","This connection string is meant to be used with a direct connection. Make sure to use a pooled connection string or try `createClient()` instead.");let i=null==e?void 0:e.maxUses,s=null==e?void 0:e.max;i&&1!==i&&console.warn("@vercel/postgres: Overriding `maxUses` to 1 because the EdgeRuntime does not support client reuse."),s&&1e4!==s&&console.warn("@vercel/postgres: Overriding `max` to 10,000 because the EdgeRuntime does not support client reuse."),i=1,s=1e4;let n=new tl({...e,connectionString:r,maxUses:i,max:s});return n}var tu=new Proxy(()=>{},{get(e,t){u||(u=th());let r=Reflect.get(u,t);return"function"==typeof r?r.bind(u):r},apply:(e,t,r)=>(u||(u=th()),u.sql(...r))});class tc{static{this[eO]="ConsoleLogWriter"}write(e){console.log(e)}}class tf{static{this[eO]="DefaultLogger"}constructor(e){this.writer=e?.writer??new tc}logQuery(e,t){let r=t.map(e=>{try{return JSON.stringify(e)}catch{return String(e)}}),i=r.length?` -- params: [${r.join(", ")}]`:"";this.writer.write(`Query: ${e}${i}`)}}class td{static{this[eO]="NoopLogger"}logQuery(){}}class tp{static{this[eO]="PgPrimaryKeyBuilder"}constructor(e,t){this.columns=e,this.name=t}build(e){return new tg(e,this.columns,this.name)}}class tg{constructor(e,t,r){this.table=e,this.columns=t,this.name=r}static{this[eO]="PgPrimaryKey"}getName(){return this.name??`${this.table[eH.Symbol.Name]}_${this.columns.map(e=>e.name).join("_")}_pk`}}function tm(e,t){return!("object"==typeof t&&null!==t&&"mapToDriverValue"in t&&"function"==typeof t.mapToDriverValue)||tY(e)||eM(e,t6)||eM(e,t3)||eM(e,eV)||eM(e,eF)||eM(e,t8)?e:new t6(e,t)}let ty=(e,t)=>t5`${e} = ${tm(t,e)}`,tb=(e,t)=>t5`${e} <> ${tm(t,e)}`;function tv(...e){let t=e.filter(e=>void 0!==e);return 0===t.length?void 0:new tZ(1===t.length?t:[new tX("("),t5.join(t,new tX(" and ")),new tX(")")])}function tw(...e){let t=e.filter(e=>void 0!==e);return 0===t.length?void 0:new tZ(1===t.length?t:[new tX("("),t5.join(t,new tX(" or ")),new tX(")")])}function tS(e){return t5`not ${e}`}let t_=(e,t)=>t5`${e} > ${tm(t,e)}`,tE=(e,t)=>t5`${e} >= ${tm(t,e)}`,tx=(e,t)=>t5`${e} < ${tm(t,e)}`,tC=(e,t)=>t5`${e} <= ${tm(t,e)}`;function tA(e,t){if(Array.isArray(t)){if(0===t.length)throw Error("inArray requires at least one value");return t5`${e} in ${t.map(t=>tm(t,e))}`}return t5`${e} in ${tm(t,e)}`}function tP(e,t){if(Array.isArray(t)){if(0===t.length)throw Error("notInArray requires at least one value");return t5`${e} not in ${t.map(t=>tm(t,e))}`}return t5`${e} not in ${tm(t,e)}`}function tT(e){return t5`${e} is null`}function tL(e){return t5`${e} is not null`}function tI(e){return t5`exists (${e})`}function tR(e){return t5`not exists (${e})`}function tk(e,t,r){return t5`${e} between ${tm(t,e)} and ${tm(r,e)}`}function tO(e,t,r){return t5`${e} not between ${tm(t,e)} and ${tm(r,e)}`}function tM(e,t){return t5`${e} like ${t}`}function tN(e,t){return t5`${e} not like ${t}`}function tD(e,t){return t5`${e} ilike ${t}`}function tB(e,t){return t5`${e} not ilike ${t}`}function t$(e){return t5`${e} asc`}function tq(e){return t5`${e} desc`}class tQ{constructor(e,t,r){this.sourceTable=e,this.referencedTable=t,this.relationName=r,this.referencedTableName=t[eF.Symbol.Name]}static{this[eO]="Relation"}}class tj{constructor(e,t){this.table=e,this.config=t}static{this[eO]="Relations"}}class tU extends tQ{constructor(e,t,r,i){super(e,t,r?.relationName),this.config=r,this.isNullable=i}static{this[eO]="One"}withFieldName(e){let t=new tU(this.sourceTable,this.referencedTable,this.config,this.isNullable);return t.fieldName=e,t}}class tF extends tQ{constructor(e,t,r){super(e,t,r?.relationName),this.config=r}static{this[eO]="Many"}withFieldName(e){let t=new tF(this.sourceTable,this.referencedTable,this.config);return t.fieldName=e,t}}function tz(e){return{one:function(t,r){return new tU(e,t,r,r?.fields.reduce((e,t)=>e&&t.notNull,!0)??!1)},many:function(t,r){return new tF(e,t,r)}}}let tH=Symbol.for("drizzle:SubqueryConfig");class tW{static{this[eO]="Subquery"}constructor(e,t,r,i=!1){this[tH]={sql:e,selection:t,alias:r,isWith:i}}}class tV extends tW{static{this[eO]="WithSubquery"}}let tK={startActiveSpan:(e,t)=>a?(l||(l=a.trace.getTracer("drizzle-orm","0.29.0")),e1((r,i)=>i.startActiveSpan(e,e=>{try{return t(e)}catch(t){throw e.setStatus({code:r.SpanStatusCode.ERROR,message:t instanceof Error?t.message:"Unknown error"}),t}finally{e.end()}}),a,l)):t()},tG=Symbol.for("drizzle:ViewBaseConfig");class tJ{static{this[eO]="FakePrimitiveParam"}}function tY(e){return"object"==typeof e&&null!==e&&"getSQL"in e&&"function"==typeof e.getSQL}class tX{static{this[eO]="StringChunk"}constructor(e){this.value=Array.isArray(e)?e:[e]}getSQL(){return new tZ([this])}}class tZ{constructor(e){this.decoder=t1,this.shouldInlineParams=!1,this.queryChunks=e}static{this[eO]="SQL"}append(e){return this.queryChunks.push(...e.queryChunks),this}toQuery(e){return tK.startActiveSpan("drizzle.buildSQL",t=>{let r=this.buildQueryFromSourceParams(this.queryChunks,e);return t?.setAttributes({"drizzle.query.text":r.sql,"drizzle.query.params":JSON.stringify(r.params)}),r})}buildQueryFromSourceParams(e,t){let r=Object.assign({},t,{inlineParams:t.inlineParams||this.shouldInlineParams,paramStartIndex:t.paramStartIndex||{value:0}}),{escapeName:i,escapeParam:s,prepareTyping:n,inlineParams:o,paramStartIndex:a}=r;return function(e){let t={sql:"",params:[]};for(let r of e)t.sql+=r.sql,t.params.push(...r.params),r.typings?.length&&(t.typings||(t.typings=[]),t.typings.push(...r.typings));return t}(e.map(e=>{if(eM(e,tX))return{sql:e.value.join(""),params:[]};if(eM(e,t0))return{sql:i(e.value),params:[]};if(void 0===e)return{sql:"",params:[]};if(Array.isArray(e)){let t=[new tX("(")];for(let[r,i]of e.entries())t.push(i),r<e.length-1&&t.push(new tX(", "));return t.push(new tX(")")),this.buildQueryFromSourceParams(t,r)}if(eM(e,tZ))return this.buildQueryFromSourceParams(e.queryChunks,{...r,inlineParams:o||e.shouldInlineParams});if(eM(e,eF)){let t=e[eF.Symbol.Schema],r=e[eF.Symbol.Name];return{sql:void 0===t?i(r):i(t)+"."+i(r),params:[]}}if(eM(e,eV))return{sql:i(e.table[eF.Symbol.Name])+"."+i(e.name),params:[]};if(eM(e,t8)){let t=e[tG].schema,r=e[tG].name;return{sql:void 0===t?i(r):i(t)+"."+i(r),params:[]}}if(eM(e,t6)){let t;let i=null===e.value?null:e.encoder.mapToDriverValue(e.value);return eM(i,tZ)?this.buildQueryFromSourceParams([i],r):o?{sql:this.mapInlineParam(i,r),params:[]}:(void 0!==n&&(t=[n(e.encoder)]),{sql:s(a.value++,i),params:[i],typings:t})}return eM(e,t3)?{sql:s(a.value++,e),params:[e]}:eM(e,tZ.Aliased)&&void 0!==e.fieldAlias?{sql:i(e.fieldAlias),params:[]}:eM(e,tW)?e[tH].isWith?{sql:i(e[tH].alias),params:[]}:this.buildQueryFromSourceParams([new tX("("),e[tH].sql,new tX(") "),new t0(e[tH].alias)],r):tY(e)?this.buildQueryFromSourceParams([new tX("("),e.getSQL(),new tX(")")],r):eM(e,tQ)?this.buildQueryFromSourceParams([e.sourceTable,new tX("."),t5.identifier(e.fieldName)],r):o?{sql:this.mapInlineParam(e,r),params:[]}:{sql:s(a.value++,e),params:[e]}}))}mapInlineParam(e,{escapeString:t}){if(null===e)return"null";if("number"==typeof e||"boolean"==typeof e)return e.toString();if("string"==typeof e)return t(e);if("object"==typeof e){let r=e.toString();return"[object Object]"===r?t(JSON.stringify(e)):t(r)}throw Error("Unexpected param value: "+e)}getSQL(){return this}as(e){return void 0===e?this:new tZ.Aliased(this,e)}mapWith(e){return this.decoder="function"==typeof e?{mapFromDriverValue:e}:e,this}inlineParams(){return this.shouldInlineParams=!0,this}}class t0{constructor(e){this.value=e}static{this[eO]="Name"}getSQL(){return new tZ([this])}}let t1={mapFromDriverValue:e=>e},t2={mapToDriverValue:e=>e};({...t1,...t2});class t6{constructor(e,t=t2){this.value=e,this.encoder=t}static{this[eO]="Param"}getSQL(){return new tZ([this])}}function t5(e,...t){let r=[];for(let[i,s]of((t.length>0||e.length>0&&""!==e[0])&&r.push(new tX(e[0])),t.entries()))r.push(s,new tX(e[i+1]));return new tZ(r)}(e=>{e.empty=function(){return new tZ([])},e.fromList=function(e){return new tZ(e)},e.raw=function(e){return new tZ([new tX(e)])},e.join=function(e,t){let r=[];for(let[i,s]of e.entries())i>0&&void 0!==t&&r.push(t),r.push(s);return new tZ(r)},e.identifier=function(e){return new t0(e)},e.placeholder=function(e){return new t3(e)},e.param=function(e,t){return new t6(e,t)}})(t5||(t5={})),(e=>{class t{constructor(e,t){this.isSelectionField=!1,this.sql=e,this.fieldAlias=t}static{this[eO]="SQL.Aliased"}getSQL(){return this.sql}clone(){return new t(this.sql,this.fieldAlias)}}e.Aliased=t})(tZ||(tZ={}));class t3{constructor(e){this.name=e}static{this[eO]="Placeholder"}getSQL(){return new tZ([this])}}function t4(e,t){return e.map(e=>{if(eM(e,t3)){if(!(e.name in t))throw Error(`No value for placeholder "${e.name}" was provided`);return t[e.name]}return e})}class t8{static{this[eO]="View"}constructor({name:e,schema:t,selectedFields:r,query:i}){this[tG]={name:e,originalName:e,schema:t,selectedFields:r,query:i,isExisting:!i,isAlias:!1}}getSQL(){return new tZ([this])}}eV.prototype.getSQL=function(){return new tZ([this])},eF.prototype.getSQL=function(){return new tZ([this])},tW.prototype.getSQL=function(){return new tZ([this])};class t7{constructor(e){this.table=e}static{this[eO]="ColumnAliasProxyHandler"}get(e,t){return"table"===t?this.table:e[t]}}class t9{constructor(e,t){this.alias=e,this.replaceOriginalName=t}static{this[eO]="TableAliasProxyHandler"}get(e,t){if(t===eF.Symbol.IsAlias)return!0;if(t===eF.Symbol.Name||this.replaceOriginalName&&t===eF.Symbol.OriginalName)return this.alias;if(t===tG)return{...e[tG],name:this.alias,isAlias:!0};if(t===eF.Symbol.Columns){let t=e[eF.Symbol.Columns];if(!t)return t;let r={};return Object.keys(t).map(i=>{r[i]=new Proxy(t[i],new t7(new Proxy(e,this)))}),r}let r=e[t];return eM(r,eV)?new Proxy(r,new t7(new Proxy(e,this))):r}}class re{constructor(e){this.alias=e}static{this[eO]="RelationTableAliasProxyHandler"}get(e,t){return"sourceTable"===t?rt(e.sourceTable,this.alias):e[t]}}function rt(e,t){return new Proxy(e,new t9(t,!1))}function rr(e,t){return new Proxy(e,new t7(new Proxy(e.table,new t9(t,!1))))}function ri(e,t){return new tZ.Aliased(rs(e.sql,t),e.fieldAlias)}function rs(e,t){return t5.join(e.queryChunks.map(e=>eM(e,eV)?rr(e,t):eM(e,tZ)?rs(e,t):eM(e,tZ.Aliased)?ri(e,t):e))}class rn extends Error{static{this[eO]="DrizzleError"}constructor({message:e,cause:t}){super(e),this.name="DrizzleError",this.cause=t}}class ro extends rn{static{this[eO]="TransactionRollbackError"}constructor(){super({message:"Rollback"})}}class ra extends e2{static{this[eO]="PgJsonbBuilder"}constructor(e){super(e,"json","PgJsonb")}build(e){return new rl(e,this.config)}}class rl extends e6{static{this[eO]="PgJsonb"}constructor(e,t){super(e,t)}getSQLType(){return"jsonb"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if("string"==typeof e)try{return JSON.parse(e)}catch{}return e}}class rh extends e2{static{this[eO]="PgJsonBuilder"}constructor(e){super(e,"json","PgJson")}build(e){return new ru(e,this.config)}}class ru extends e6{static{this[eO]="PgJson"}constructor(e,t){super(e,t)}getSQLType(){return"json"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if("string"==typeof e)try{return JSON.parse(e)}catch{}return e}}class rc extends e2{static{this[eO]="PgNumericBuilder"}constructor(e,t,r){super(e,"string","PgNumeric"),this.config.precision=t,this.config.scale=r}build(e){return new rf(e,this.config)}}class rf extends e6{static{this[eO]="PgNumeric"}constructor(e,t){super(e,t),this.precision=t.precision,this.scale=t.scale}getSQLType(){return void 0!==this.precision&&void 0!==this.scale?`numeric(${this.precision}, ${this.scale})`:void 0===this.precision?"numeric":`numeric(${this.precision})`}}class rd extends e2{static{this[eO]="PgDateColumnBaseBuilder"}defaultNow(){return this.default(t5`now()`)}}class rp extends rd{constructor(e,t,r){super(e,"string","PgTime"),this.withTimezone=t,this.precision=r,this.config.withTimezone=t,this.config.precision=r}static{this[eO]="PgTimeBuilder"}build(e){return new rg(e,this.config)}}class rg extends e6{static{this[eO]="PgTime"}constructor(e,t){super(e,t),this.withTimezone=t.withTimezone,this.precision=t.precision}getSQLType(){let e=void 0===this.precision?"":`(${this.precision})`;return`time${e}${this.withTimezone?" with time zone":""}`}}class rm extends rd{static{this[eO]="PgTimestampBuilder"}constructor(e,t,r){super(e,"date","PgTimestamp"),this.config.withTimezone=t,this.config.precision=r}build(e){return new ry(e,this.config)}}class ry extends e6{static{this[eO]="PgTimestamp"}constructor(e,t){super(e,t),this.mapFromDriverValue=e=>new Date(this.withTimezone?e:e+"+0000"),this.mapToDriverValue=e=>this.withTimezone?e.toUTCString():e.toISOString(),this.withTimezone=t.withTimezone,this.precision=t.precision}getSQLType(){let e=void 0===this.precision?"":` (${this.precision})`;return`timestamp${e}${this.withTimezone?" with time zone":""}`}}class rb extends rd{static{this[eO]="PgTimestampStringBuilder"}constructor(e,t,r){super(e,"string","PgTimestampString"),this.config.withTimezone=t,this.config.precision=r}build(e){return new rv(e,this.config)}}class rv extends e6{static{this[eO]="PgTimestampString"}constructor(e,t){super(e,t),this.withTimezone=t.withTimezone,this.precision=t.precision}getSQLType(){let e=void 0===this.precision?"":`(${this.precision})`;return`timestamp${e}${this.withTimezone?" with time zone":""}`}}class rw extends rd{static{this[eO]="PgDateBuilder"}constructor(e){super(e,"date","PgDate")}build(e){return new rS(e,this.config)}}class rS extends e6{static{this[eO]="PgDate"}getSQLType(){return"date"}mapFromDriverValue(e){return new Date(e)}mapToDriverValue(e){return e.toISOString()}}class r_ extends rd{static{this[eO]="PgDateStringBuilder"}constructor(e){super(e,"string","PgDateString")}build(e){return new rE(e,this.config)}}class rE extends e6{static{this[eO]="PgDateString"}getSQLType(){return"date"}}class rx extends e2{static{this[eO]="PgUUIDBuilder"}constructor(e){super(e,"string","PgUUID")}defaultRandom(){return this.default(t5`gen_random_uuid()`)}build(e){return new rC(e,this.config)}}class rC extends e6{static{this[eO]="PgUUID"}getSQLType(){return"uuid"}}function rA(e,t){return Object.entries(e).reduce((e,[r,i])=>{if("string"!=typeof r)return e;let s=t?[...t,r]:[r];return eM(i,eV)||eM(i,tZ)||eM(i,tZ.Aliased)?e.push({path:s,field:i}):eM(i,eF)?e.push(...rA(i[eF.Symbol.Columns],s)):e.push(...rA(i,s)),e},[])}function rP(e,t){let r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(let[e,t]of r.entries())if(t!==i[e])return!1;return!0}function rT(e,t){let r=Object.entries(t).filter(([,e])=>void 0!==e).map(([t,r])=>eM(r,tZ)?[t,r]:[t,new t6(r,e[eF.Symbol.Columns][t])]);if(0===r.length)throw Error("No values to set");return Object.fromEntries(r)}function rL(e){return eM(e,tW)?e[tH].alias:eM(e,t8)?e[tG].name:eM(e,tZ)?void 0:e[eF.Symbol.IsAlias]?e[eF.Symbol.Name]:e[eF.Symbol.BaseName]}class rI extends t8{static{this[eO]="PgViewBase"}}class rR{static{this[eO]="PgDialect"}async migrate(e,t){let r=t5`
			CREATE TABLE IF NOT EXISTS "drizzle"."__drizzle_migrations" (
				id SERIAL PRIMARY KEY,
				hash text NOT NULL,
				created_at bigint
			)
		`;await t.execute(t5`CREATE SCHEMA IF NOT EXISTS "drizzle"`),await t.execute(r);let i=await t.all(t5`select id, hash, created_at from "drizzle"."__drizzle_migrations" order by created_at desc limit 1`),s=i[0];await t.transaction(async t=>{for await(let r of e)if(!s||Number(s.created_at)<r.folderMillis){for(let e of r.sql)await t.execute(t5.raw(e));await t.execute(t5`insert into "drizzle"."__drizzle_migrations" ("hash", "created_at") values(${r.hash}, ${r.folderMillis})`)}})}escapeName(e){return`"${e}"`}escapeParam(e){return`$${e+1}`}escapeString(e){return`'${e.replace(/'/g,"''")}'`}buildDeleteQuery({table:e,where:t,returning:r}){let i=r?t5` returning ${this.buildSelection(r,{isSingleTable:!0})}`:void 0,s=t?t5` where ${t}`:void 0;return t5`delete from ${e}${s}${i}`}buildUpdateSet(e,t){let r=Object.entries(t),i=r.length;return t5.join(r.flatMap(([t,r],s)=>{let n=e[eF.Symbol.Columns][t],o=t5`${t5.identifier(n.name)} = ${r}`;return s<i-1?[o,t5.raw(", ")]:[o]}))}buildUpdateQuery({table:e,set:t,where:r,returning:i}){let s=this.buildUpdateSet(e,t),n=i?t5` returning ${this.buildSelection(i,{isSingleTable:!0})}`:void 0,o=r?t5` where ${r}`:void 0;return t5`update ${e} set ${s}${o}${n}`}buildSelection(e,{isSingleTable:t=!1}={}){let r=e.length,i=e.flatMap(({field:e},i)=>{let s=[];if(eM(e,tZ.Aliased)&&e.isSelectionField)s.push(t5.identifier(e.fieldAlias));else if(eM(e,tZ.Aliased)||eM(e,tZ)){let r=eM(e,tZ.Aliased)?e.sql:e;t?s.push(new tZ(r.queryChunks.map(e=>eM(e,e6)?t5.identifier(e.name):e))):s.push(r),eM(e,tZ.Aliased)&&s.push(t5` as ${t5.identifier(e.fieldAlias)}`)}else eM(e,eV)&&(t?s.push(t5.identifier(e.name)):s.push(e));return i<r-1&&s.push(t5`, `),s});return t5.join(i)}buildSelectQuery({withList:e,fields:t,fieldsFlat:r,where:i,having:s,table:n,joins:o,orderBy:a,groupBy:l,limit:h,offset:u,lockingClause:c,distinct:f,setOperators:d}){let p,g,m,y;let b=r??rA(t);for(let e of b){var v;if(eM(e.field,eV)&&e.field.table[eN]!==(eM(n,tW)?n[tH].alias:eM(n,rI)?n[tG].name:eM(n,tZ)?void 0:n[eN])&&(v=e.field.table,!o?.some(({alias:e})=>e===(v[eF.Symbol.IsAlias]?v[eN]:v[eF.Symbol.BaseName])))){let t=e.field.table[eN];throw Error(`Your "${e.path.join("->")}" field references a column "${t}"."${e.field.name}", but the table "${t}" is not part of the query! Did you forget to join it?`)}}let w=!o||0===o.length;if(e?.length){let t=[t5`with `];for(let[r,i]of e.entries())t.push(t5`${t5.identifier(i[tH].alias)} as (${i[tH].sql})`),r<e.length-1&&t.push(t5`, `);t.push(t5` `),p=t5.join(t)}f&&(g=!0===f?t5` distinct`:t5` distinct on (${t5.join(f.on,", ")})`);let S=this.buildSelection(b,{isSingleTable:w}),_=(()=>{if(eM(n,eF)&&n[eF.Symbol.OriginalName]!==n[eF.Symbol.Name]){let e=t5`${t5.identifier(n[eF.Symbol.OriginalName])}`;return n[eF.Symbol.Schema]&&(e=t5`${t5.identifier(n[eF.Symbol.Schema])}.${e}`),t5`${e} ${t5.identifier(n[eF.Symbol.Name])}`}return n})(),E=[];if(o)for(let[e,t]of o.entries()){0===e&&E.push(t5` `);let r=t.table,i=t.lateral?t5` lateral`:void 0;if(eM(r,eH)){let e=r[eH.Symbol.Name],s=r[eH.Symbol.Schema],n=r[eH.Symbol.OriginalName],o=e===n?void 0:t.alias;E.push(t5`${t5.raw(t.joinType)} join${i} ${s?t5`${t5.identifier(s)}.`:void 0}${t5.identifier(n)}${o&&t5` ${t5.identifier(o)}`} on ${t.on}`)}else if(eM(r,t8)){let e=r[tG].name,s=r[tG].schema,n=r[tG].originalName,o=e===n?void 0:t.alias;E.push(t5`${t5.raw(t.joinType)} join${i} ${s?t5`${t5.identifier(s)}.`:void 0}${t5.identifier(n)}${o&&t5` ${t5.identifier(o)}`} on ${t.on}`)}else E.push(t5`${t5.raw(t.joinType)} join${i} ${r} on ${t.on}`);e<o.length-1&&E.push(t5` `)}let x=t5.join(E),C=i?t5` where ${i}`:void 0,A=s?t5` having ${s}`:void 0;a&&a.length>0&&(m=t5` order by ${t5.join(a,t5`, `)}`),l&&l.length>0&&(y=t5` group by ${t5.join(l,t5`, `)}`);let P=h?t5` limit ${h}`:void 0,T=u?t5` offset ${u}`:void 0,L=t5.empty();if(c){let e=t5` for ${t5.raw(c.strength)}`;c.config.of&&e.append(t5` of ${t5.join(Array.isArray(c.config.of)?c.config.of:[c.config.of],t5`, `)}`),c.config.noWait?e.append(t5` no wait`):c.config.skipLocked&&e.append(t5` skip locked`),L.append(e)}let I=t5`${p}select${g} ${S} from ${_}${x}${C}${y}${A}${m}${P}${T}${L}`;return d.length>0?this.buildSetOperations(I,d):I}buildSetOperations(e,t){let[r,...i]=t;if(!r)throw Error("Cannot pass undefined values to any set operator");return 0===i.length?this.buildSetOperationQuery({leftSelect:e,setOperator:r}):this.buildSetOperations(this.buildSetOperationQuery({leftSelect:e,setOperator:r}),i)}buildSetOperationQuery({leftSelect:e,setOperator:{type:t,isAll:r,rightSelect:i,limit:s,orderBy:n,offset:o}}){let a;let l=t5`(${e.getSQL()}) `,h=t5`(${i.getSQL()})`;if(n&&n.length>0){let e=[];for(let t of n)if(eM(t,e6))e.push(t5.identifier(t.name));else if(eM(t,tZ)){for(let e=0;e<t.queryChunks.length;e++){let r=t.queryChunks[e];eM(r,e6)&&(t.queryChunks[e]=t5.identifier(r.name))}e.push(t5`${t}`)}else e.push(t5`${t}`);a=t5` order by ${t5.join(e,t5`, `)} `}let u=s?t5` limit ${s}`:void 0,c=t5.raw(`${t} ${r?"all ":""}`),f=o?t5` offset ${o}`:void 0;return t5`${l}${c}${h}${a}${u}${f}`}buildInsertQuery({table:e,values:t,onConflict:r,returning:i}){let s=[],n=e[eF.Symbol.Columns],o=Object.entries(n),a=o.map(([,e])=>t5.identifier(e.name));for(let[e,r]of t.entries()){let i=[];for(let[e,t]of o){let s=r[e];if(void 0===s||eM(s,t6)&&void 0===s.value){if(void 0!==t.defaultFn){let e=t.defaultFn(),r=eM(e,tZ)?e:t5.param(e,t);i.push(r)}else i.push(t5`default`)}else i.push(s)}s.push(i),e<t.length-1&&s.push(t5`, `)}let l=t5.join(s),h=i?t5` returning ${this.buildSelection(i,{isSingleTable:!0})}`:void 0,u=r?t5` on conflict ${r}`:void 0;return t5`insert into ${e} ${a} values ${l}${u}${h}`}buildRefreshMaterializedViewQuery({view:e,concurrently:t,withNoData:r}){let i=t?t5` concurrently`:void 0,s=r?t5` with no data`:void 0;return t5`refresh materialized view${i} ${e}${s}`}prepareTyping(e){return eM(e,rl)||eM(e,ru)?"json":eM(e,rf)?"decimal":eM(e,rg)?"time":eM(e,ry)?"timestamp":eM(e,rS)?"date":eM(e,rC)?"uuid":"none"}sqlToQuery(e){return e.toQuery({escapeName:this.escapeName,escapeParam:this.escapeParam,escapeString:this.escapeString,prepareTyping:this.prepareTyping})}buildRelationalQueryWithoutPK({fullSchema:e,schema:t,tableNamesMap:r,table:i,tableConfig:s,queryConfig:n,tableAlias:o,nestedQueryRelation:a,joinOn:l}){let h,u=[],c,f,d=[],p,g=[];if(!0===n){let e=Object.entries(s.columns);u=e.map(([e,t])=>({dbKey:t.name,tsKey:e,field:rr(t,o),relationTableTsKey:void 0,isJson:!1,selection:[]}))}else{let i=Object.fromEntries(Object.entries(s.columns).map(([e,t])=>[e,rr(t,o)]));if(n.where){let e="function"==typeof n.where?n.where(i,{and:tv,between:tk,eq:ty,exists:tI,gt:t_,gte:tE,ilike:tD,inArray:tA,isNull:tT,isNotNull:tL,like:tM,lt:tx,lte:tC,ne:tb,not:tS,notBetween:tO,notExists:tR,notLike:tN,notIlike:tB,notInArray:tP,or:tw,sql:t5}):n.where;p=e&&rs(e,o)}let a=[],l=[];if(n.columns){let e=!1;for(let[t,r]of Object.entries(n.columns))void 0!==r&&t in s.columns&&(e||!0!==r||(e=!0),l.push(t));l.length>0&&(l=e?l.filter(e=>n.columns?.[e]===!0):Object.keys(s.columns).filter(e=>!l.includes(e)))}else l=Object.keys(s.columns);for(let e of l){let t=s.columns[e];a.push({tsKey:e,value:t})}let h=[];if(n.with&&(h=Object.entries(n.with).filter(e=>!!e[1]).map(([e,t])=>({tsKey:e,queryConfig:t,relation:s.relations[e]}))),n.extras)for(let[e,t]of Object.entries("function"==typeof n.extras?n.extras(i,{sql:t5}):n.extras))a.push({tsKey:e,value:ri(t,o)});for(let{tsKey:e,value:t}of a)u.push({dbKey:eM(t,tZ.Aliased)?t.fieldAlias:s.columns[e].name,tsKey:e,field:eM(t,eV)?rr(t,o):t,relationTableTsKey:void 0,isJson:!1,selection:[]});let m="function"==typeof n.orderBy?n.orderBy(i,{sql:t5,asc:t$,desc:tq}):n.orderBy??[];for(let{tsKey:i,queryConfig:s,relation:a}of(Array.isArray(m)||(m=[m]),d=m.map(e=>eM(e,eV)?rr(e,o):rs(e,o)),c=n.limit,f=n.offset,h)){let n=function(e,t,r){if(eM(r,tU)&&r.config)return{fields:r.config.fields,references:r.config.references};let i=t[r.referencedTable[eF.Symbol.Name]];if(!i)throw Error(`Table "${r.referencedTable[eF.Symbol.Name]}" not found in schema`);let s=e[i];if(!s)throw Error(`Table "${i}" not found in schema`);let n=r.sourceTable,o=t[n[eF.Symbol.Name]];if(!o)throw Error(`Table "${n[eF.Symbol.Name]}" not found in schema`);let a=[];for(let e of Object.values(s.relations))(r.relationName&&r!==e&&e.relationName===r.relationName||!r.relationName&&e.referencedTable===r.sourceTable)&&a.push(e);if(a.length>1)throw r.relationName?Error(`There are multiple relations with name "${r.relationName}" in table "${i}"`):Error(`There are multiple relations between "${i}" and "${r.sourceTable[eF.Symbol.Name]}". Please specify relation name`);if(a[0]&&eM(a[0],tU)&&a[0].config)return{fields:a[0].config.references,references:a[0].config.fields};throw Error(`There is not enough information to infer relation "${o}.${r.fieldName}"`)}(t,r,a),l=a.referencedTable[eF.Symbol.Name],h=r[l],c=`${o}_${i}`,f=tv(...n.fields.map((e,t)=>ty(rr(n.references[t],c),rr(e,o)))),d=this.buildRelationalQueryWithoutPK({fullSchema:e,schema:t,tableNamesMap:r,table:e[h],tableConfig:t[h],queryConfig:eM(a,tU)?!0===s?{limit:1}:{...s,limit:1}:s,tableAlias:c,joinOn:f,nestedQueryRelation:a}),p=t5`${t5.identifier(c)}.${t5.identifier("data")}`.as(i);g.push({on:t5`true`,table:new tW(d.sql,{},c),alias:c,joinType:"left",lateral:!0}),u.push({dbKey:i,tsKey:i,field:p,relationTableTsKey:h,isJson:!0,selection:d.selection})}}if(0===u.length)throw new rn({message:`No fields selected for table "${s.tsName}" ("${o}")`});if(p=tv(l,p),a){let e=t5`json_build_array(${t5.join(u.map(({field:e,tsKey:t,isJson:r})=>r?t5`${t5.identifier(`${o}_${t}`)}.${t5.identifier("data")}`:eM(e,tZ.Aliased)?e.sql:e),t5`, `)})`;eM(a,tF)&&(e=t5`coalesce(json_agg(${e}${d.length>0?t5` order by ${t5.join(d,t5`, `)}`:void 0}), '[]'::json)`);let t=[{dbKey:"data",tsKey:"data",field:e.as("data"),isJson:!0,relationTableTsKey:s.tsName,selection:u}],r=void 0!==c||void 0!==f||d.length>0;r?(h=this.buildSelectQuery({table:rt(i,o),fields:{},fieldsFlat:[{path:[],field:t5.raw("*")}],where:p,limit:c,offset:f,orderBy:d,setOperators:[]}),p=void 0,c=void 0,f=void 0,d=[]):h=rt(i,o),h=this.buildSelectQuery({table:eM(h,eH)?h:new tW(h,{},o),fields:{},fieldsFlat:t.map(({field:e})=>({path:[],field:eM(e,eV)?rr(e,o):e})),joins:g,where:p,limit:c,offset:f,orderBy:d,setOperators:[]})}else h=this.buildSelectQuery({table:rt(i,o),fields:{},fieldsFlat:u.map(({field:e})=>({path:[],field:eM(e,eV)?rr(e,o):e})),joins:g,where:p,limit:c,offset:f,orderBy:d,setOperators:[]});return{tableTsKey:s.tsName,sql:h,selection:u}}}class rk{static{this[eO]="TypedQueryBuilder"}getSelectedFields(){return this._.selectedFields}}class rO{static{h=Symbol.toStringTag}static{this[eO]="QueryPromise"}catch(e){return this.then(void 0,e)}finally(e){return this.then(t=>(e?.(),t),t=>{throw e?.(),t})}then(e,t){return this.execute().then(e,t)}constructor(){this[h]="QueryPromise"}}class rM{static{this[eO]="SelectionProxyHandler"}constructor(e){this.config={...e}}get(e,t){if(t===tH)return{...e[tH],selection:new Proxy(e[tH].selection,this)};if(t===tG)return{...e[tG],selectedFields:new Proxy(e[tG].selectedFields,this)};if("symbol"==typeof t)return e[t];let r=eM(e,tW)?e[tH].selection:eM(e,t8)?e[tG].selectedFields:e,i=r[t];if(eM(i,tZ.Aliased)){if("sql"===this.config.sqlAliasedBehavior&&!i.isSelectionField)return i.sql;let e=i.clone();return e.isSelectionField=!0,e}if(eM(i,tZ)){if("sql"===this.config.sqlBehavior)return i;throw Error(`You tried to reference "${t}" field from a subquery, which is a raw SQL field, but it doesn't have an alias declared. Please add an alias to the field using ".as('alias')" method.`)}return eM(i,eV)?this.config.alias?new Proxy(i,new t7(new Proxy(i.table,new t9(this.config.alias,this.config.replaceOriginalName??!1)))):i:"object"!=typeof i||null===i?i:new Proxy(i,new rM(this.config))}}class rN{static{this[eO]="PgSelectBuilder"}constructor(e){this.withList=[],this.fields=e.fields,this.session=e.session,this.dialect=e.dialect,e.withList&&(this.withList=e.withList),this.distinct=e.distinct}from(e){let t;let r=!!this.fields;return t=this.fields?this.fields:eM(e,tW)?Object.fromEntries(Object.keys(e[tH].selection).map(t=>[t,e[t]])):eM(e,rI)?e[tG].selectedFields:eM(e,tZ)?{}:e[eF.Symbol.Columns],new rB({table:e,fields:t,isPartialSelect:r,session:this.session,dialect:this.dialect,withList:this.withList,distinct:this.distinct})}}class rD extends rk{static{this[eO]="PgSelectQueryBuilder"}constructor({table:e,fields:t,isPartialSelect:r,session:i,dialect:s,withList:n,distinct:o}){super(),this.leftJoin=this.createJoin("left"),this.rightJoin=this.createJoin("right"),this.innerJoin=this.createJoin("inner"),this.fullJoin=this.createJoin("full"),this.union=this.createSetOperator("union",!1),this.unionAll=this.createSetOperator("union",!0),this.intersect=this.createSetOperator("intersect",!1),this.intersectAll=this.createSetOperator("intersect",!0),this.except=this.createSetOperator("except",!1),this.exceptAll=this.createSetOperator("except",!0),this.config={withList:n,table:e,fields:{...t},distinct:o,setOperators:[]},this.isPartialSelect=r,this.session=i,this.dialect=s,this._={selectedFields:t},this.tableName=rL(e),this.joinsNotNullableMap="string"==typeof this.tableName?{[this.tableName]:!0}:{}}createJoin(e){return(t,r)=>{let i=this.tableName,s=rL(t);if("string"==typeof s&&this.config.joins?.some(e=>e.alias===s))throw Error(`Alias "${s}" is already used in this query`);if(!this.isPartialSelect&&(1===Object.keys(this.joinsNotNullableMap).length&&"string"==typeof i&&(this.config.fields={[i]:this.config.fields}),"string"==typeof s&&!eM(t,tZ))){let e=eM(t,tW)?t[tH].selection:eM(t,t8)?t[tG].selectedFields:t[eF.Symbol.Columns];this.config.fields[s]=e}if("function"==typeof r&&(r=r(new Proxy(this.config.fields,new rM({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.joins||(this.config.joins=[]),this.config.joins.push({on:r,table:t,joinType:e,alias:s}),"string"==typeof s)switch(e){case"left":this.joinsNotNullableMap[s]=!1;break;case"right":this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([e])=>[e,!1])),this.joinsNotNullableMap[s]=!0;break;case"inner":this.joinsNotNullableMap[s]=!0;break;case"full":this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([e])=>[e,!1])),this.joinsNotNullableMap[s]=!1}return this}}createSetOperator(e,t){return r=>{let i="function"==typeof r?r(rq()):r;if(!rP(this.getSelectedFields(),i.getSelectedFields()))throw Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return this.config.setOperators.push({type:e,isAll:t,rightSelect:i}),this}}addSetOperators(e){return this.config.setOperators.push(...e),this}where(e){return"function"==typeof e&&(e=e(new Proxy(this.config.fields,new rM({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.where=e,this}having(e){return"function"==typeof e&&(e=e(new Proxy(this.config.fields,new rM({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.having=e,this}groupBy(...e){if("function"==typeof e[0]){let t=e[0](new Proxy(this.config.fields,new rM({sqlAliasedBehavior:"alias",sqlBehavior:"sql"})));this.config.groupBy=Array.isArray(t)?t:[t]}else this.config.groupBy=e;return this}orderBy(...e){if("function"==typeof e[0]){let t=e[0](new Proxy(this.config.fields,new rM({sqlAliasedBehavior:"alias",sqlBehavior:"sql"}))),r=Array.isArray(t)?t:[t];this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=r:this.config.orderBy=r}else this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=e:this.config.orderBy=e;return this}limit(e){return this.config.setOperators.length>0?this.config.setOperators.at(-1).limit=e:this.config.limit=e,this}offset(e){return this.config.setOperators.length>0?this.config.setOperators.at(-1).offset=e:this.config.offset=e,this}for(e,t={}){return this.config.lockingClause={strength:e,config:t},this}getSQL(){return this.dialect.buildSelectQuery(this.config)}toSQL(){let{typings:e,...t}=this.dialect.sqlToQuery(this.getSQL());return t}as(e){return new Proxy(new tW(this.getSQL(),this.config.fields,e),new rM({alias:e,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}getSelectedFields(){return new Proxy(this.config.fields,new rM({alias:this.tableName,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}$dynamic(){return this}}class rB extends rD{static{this[eO]="PgSelect"}_prepare(e){let{session:t,config:r,dialect:i,joinsNotNullableMap:s}=this;if(!t)throw Error("Cannot execute a query on a query builder. Please use a database instance instead.");return tK.startActiveSpan("drizzle.prepareQuery",()=>{let n=rA(r.fields),o=t.prepareQuery(i.sqlToQuery(this.getSQL()),n,e);return o.joinsNotNullableMap=s,o})}prepare(e){return this._prepare(e)}constructor(...e){super(...e),this.execute=e=>tK.startActiveSpan("drizzle.operation",()=>this._prepare().execute(e))}}function r$(e,t){return(r,i,...s)=>{let n=[i,...s].map(r=>({type:e,isAll:t,rightSelect:r}));for(let e of n)if(!rP(r.getSelectedFields(),e.rightSelect.getSelectedFields()))throw Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return r.addSetOperators(n)}}!function(e,t){for(let r of t)for(let t of Object.getOwnPropertyNames(r.prototype))Object.defineProperty(e.prototype,t,Object.getOwnPropertyDescriptor(r.prototype,t)||Object.create(null))}(rB,[rO]);let rq=()=>({union:rQ,unionAll:rj,intersect:rU,intersectAll:rF,except:rz,exceptAll:rH}),rQ=r$("union",!1),rj=r$("union",!0),rU=r$("intersect",!1),rF=r$("intersect",!0),rz=r$("except",!1),rH=r$("except",!0);class rW{static{this[eO]="PgQueryBuilder"}$with(e){let t=this;return{as:r=>("function"==typeof r&&(r=r(t)),new Proxy(new tV(r.getSQL(),r.getSelectedFields(),e,!0),new rM({alias:e,sqlAliasedBehavior:"alias",sqlBehavior:"error"})))}}with(...e){let t=this;return{select:function(r){return new rN({fields:r??void 0,session:void 0,dialect:t.getDialect(),withList:e})},selectDistinct:function(e){return new rN({fields:e??void 0,session:void 0,dialect:t.getDialect(),distinct:!0})},selectDistinctOn:function(e,r){return new rN({fields:r??void 0,session:void 0,dialect:t.getDialect(),distinct:{on:e}})}}}select(e){return new rN({fields:e??void 0,session:void 0,dialect:this.getDialect()})}selectDistinct(e){return new rN({fields:e??void 0,session:void 0,dialect:this.getDialect(),distinct:!0})}selectDistinctOn(e,t){return new rN({fields:t??void 0,session:void 0,dialect:this.getDialect(),distinct:{on:e}})}getDialect(){return this.dialect||(this.dialect=new rR),this.dialect}}class rV{constructor(e,t,r){this.table=e,this.session=t,this.dialect=r}static{this[eO]="PgUpdateBuilder"}set(e){return new rK(this.table,rT(this.table,e),this.session,this.dialect)}}class rK extends rO{constructor(e,t,r,i){super(),this.execute=e=>this._prepare().execute(e),this.session=r,this.dialect=i,this.config={set:t,table:e}}static{this[eO]="PgUpdate"}where(e){return this.config.where=e,this}returning(e=this.config.table[eF.Symbol.Columns]){return this.config.returning=rA(e),this}getSQL(){return this.dialect.buildUpdateQuery(this.config)}toSQL(){let{typings:e,...t}=this.dialect.sqlToQuery(this.getSQL());return t}_prepare(e){return this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,e)}prepare(e){return this._prepare(e)}$dynamic(){return this}}class rG{constructor(e,t,r){this.table=e,this.session=t,this.dialect=r}static{this[eO]="PgInsertBuilder"}values(e){if(0===(e=Array.isArray(e)?e:[e]).length)throw Error("values() must be called with at least one value");let t=e.map(e=>{let t={},r=this.table[eF.Symbol.Columns];for(let i of Object.keys(e)){let s=e[i];t[i]=eM(s,tZ)?s:new t6(s,r[i])}return t});return new rJ(this.table,t,this.session,this.dialect)}}class rJ extends rO{constructor(e,t,r,i){super(),this.execute=e=>tK.startActiveSpan("drizzle.operation",()=>this._prepare().execute(e)),this.session=r,this.dialect=i,this.config={table:e,values:t}}static{this[eO]="PgInsert"}returning(e=this.config.table[eF.Symbol.Columns]){return this.config.returning=rA(e),this}onConflictDoNothing(e={}){if(void 0===e.target)this.config.onConflict=t5`do nothing`;else{let t="";t=Array.isArray(e.target)?e.target.map(e=>this.dialect.escapeName(e.name)).join(","):this.dialect.escapeName(e.target.name);let r=e.where?t5` where ${e.where}`:void 0;this.config.onConflict=t5`(${t5.raw(t)}) do nothing${r}`}return this}onConflictDoUpdate(e){let t=e.where?t5` where ${e.where}`:void 0,r=this.dialect.buildUpdateSet(this.config.table,rT(this.config.table,e.set)),i="";return i=Array.isArray(e.target)?e.target.map(e=>this.dialect.escapeName(e.name)).join(","):this.dialect.escapeName(e.target.name),this.config.onConflict=t5`(${t5.raw(i)}) do update set ${r}${t}`,this}getSQL(){return this.dialect.buildInsertQuery(this.config)}toSQL(){let{typings:e,...t}=this.dialect.sqlToQuery(this.getSQL());return t}_prepare(e){return tK.startActiveSpan("drizzle.prepareQuery",()=>this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,e))}prepare(e){return this._prepare(e)}$dynamic(){return this}}class rY extends rO{constructor(e,t,r){super(),this.execute=e=>tK.startActiveSpan("drizzle.operation",()=>this._prepare().execute(e)),this.session=t,this.dialect=r,this.config={table:e}}static{this[eO]="PgDelete"}where(e){return this.config.where=e,this}returning(e=this.config.table[eF.Symbol.Columns]){return this.config.returning=rA(e),this}getSQL(){return this.dialect.buildDeleteQuery(this.config)}toSQL(){let{typings:e,...t}=this.dialect.sqlToQuery(this.getSQL());return t}_prepare(e){return tK.startActiveSpan("drizzle.prepareQuery",()=>this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,e))}prepare(e){return this._prepare(e)}$dynamic(){return this}}class rX{constructor(e,t,r,i,s,n,o){this.fullSchema=e,this.schema=t,this.tableNamesMap=r,this.table=i,this.tableConfig=s,this.dialect=n,this.session=o}static{this[eO]="PgRelationalQueryBuilder"}findMany(e){return new rZ(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,e||{},"many")}findFirst(e){return new rZ(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,e?{...e,limit:1}:{limit:1},"first")}}class rZ extends rO{constructor(e,t,r,i,s,n,o,a,l){super(),this.fullSchema=e,this.schema=t,this.tableNamesMap=r,this.table=i,this.tableConfig=s,this.dialect=n,this.session=o,this.config=a,this.mode=l}static{this[eO]="PgRelationalQuery"}_prepare(e){return tK.startActiveSpan("drizzle.prepareQuery",()=>{let{query:t,builtQuery:r}=this._toSQL();return this.session.prepareQuery(r,void 0,e,(e,r)=>{let i=e.map(e=>(function e(t,r,i,s,n=e=>e){let o={};for(let[a,l]of s.entries())if(l.isJson){let s=r.relations[l.tsKey],h=i[a],u="string"==typeof h?JSON.parse(h):h;o[l.tsKey]=eM(s,tU)?u&&e(t,t[l.relationTableTsKey],u,l.selection,n):u.map(r=>e(t,t[l.relationTableTsKey],r,l.selection,n))}else{let e;let t=n(i[a]),r=l.field;e=eM(r,eV)?r:eM(r,tZ)?r.decoder:r.sql.decoder,o[l.tsKey]=null===t?null:e.mapFromDriverValue(t)}return o})(this.schema,this.tableConfig,e,t.selection,r));return"first"===this.mode?i[0]:i})})}prepare(e){return this._prepare(e)}_toSQL(){let e=this.dialect.buildRelationalQueryWithoutPK({fullSchema:this.fullSchema,schema:this.schema,tableNamesMap:this.tableNamesMap,table:this.table,tableConfig:this.tableConfig,queryConfig:this.config,tableAlias:this.tableConfig.tsName}),t=this.dialect.sqlToQuery(e.sql);return{query:e,builtQuery:t}}toSQL(){return this._toSQL().builtQuery}execute(){return tK.startActiveSpan("drizzle.operation",()=>this._prepare().execute())}}class r0 extends rO{constructor(e,t,r){super(),this.execute=e=>tK.startActiveSpan("drizzle.operation",()=>this._prepare().execute(e)),this.session=t,this.dialect=r,this.config={view:e}}static{this[eO]="PgRefreshMaterializedView"}concurrently(){if(void 0!==this.config.withNoData)throw Error("Cannot use concurrently and withNoData together");return this.config.concurrently=!0,this}withNoData(){if(void 0!==this.config.concurrently)throw Error("Cannot use concurrently and withNoData together");return this.config.withNoData=!0,this}getSQL(){return this.dialect.buildRefreshMaterializedViewQuery(this.config)}toSQL(){let{typings:e,...t}=this.dialect.sqlToQuery(this.getSQL());return t}_prepare(e){return tK.startActiveSpan("drizzle.prepareQuery",()=>this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),void 0,e))}prepare(e){return this._prepare(e)}}class r1{constructor(e,t,r){if(this.dialect=e,this.session=t,this._=r?{schema:r.schema,tableNamesMap:r.tableNamesMap}:{schema:void 0,tableNamesMap:{}},this.query={},this._.schema)for(let[i,s]of Object.entries(this._.schema))this.query[i]=new rX(r.fullSchema,this._.schema,this._.tableNamesMap,r.fullSchema[i],s,e,t)}static{this[eO]="PgDatabase"}$with(e){return{as:t=>("function"==typeof t&&(t=t(new rW)),new Proxy(new tV(t.getSQL(),t.getSelectedFields(),e,!0),new rM({alias:e,sqlAliasedBehavior:"alias",sqlBehavior:"error"})))}}with(...e){let t=this;return{select:function(r){return new rN({fields:r??void 0,session:t.session,dialect:t.dialect,withList:e})}}}select(e){return new rN({fields:e??void 0,session:this.session,dialect:this.dialect})}selectDistinct(e){return new rN({fields:e??void 0,session:this.session,dialect:this.dialect,distinct:!0})}selectDistinctOn(e,t){return new rN({fields:t??void 0,session:this.session,dialect:this.dialect,distinct:{on:e}})}update(e){return new rV(e,this.session,this.dialect)}insert(e){return new rG(e,this.session,this.dialect)}delete(e){return new rY(e,this.session,this.dialect)}refreshMaterializedView(e){return new r0(e,this.session,this.dialect)}execute(e){return this.session.execute(e.getSQL())}transaction(e,t){return this.session.transaction(e,t)}}class r2{static{this[eO]="PgPreparedQuery"}}class r6{constructor(e){this.dialect=e}static{this[eO]="PgSession"}execute(e){return tK.startActiveSpan("drizzle.operation",()=>{let t=tK.startActiveSpan("drizzle.prepareQuery",()=>this.prepareQuery(this.dialect.sqlToQuery(e),void 0,void 0));return t.execute()})}all(e){return this.prepareQuery(this.dialect.sqlToQuery(e),void 0,void 0).all()}}class r5 extends r1{constructor(e,t,r,i=0){super(e,t,r),this.schema=r,this.nestedIndex=i}static{this[eO]="PgTransaction"}rollback(){throw new ro}getTransactionConfigSQL(e){let t=[];return e.isolationLevel&&t.push(`isolation level ${e.isolationLevel}`),e.accessMode&&t.push(e.accessMode),"boolean"==typeof e.deferrable&&t.push(e.deferrable?"deferrable":"not deferrable"),t5.raw(t.join(" "))}setTransaction(e){return this.session.execute(t5`set transaction ${this.getTransactionConfigSQL(e)}`)}}class r3 extends r2{constructor(e,t,r,i,s,n,o){super(),this.client=e,this.params=r,this.logger=i,this.fields=s,this.customResultMapper=o,this.rawQuery={name:n,text:t},this.query={name:n,text:t,rowMode:"array"}}static{this[eO]="VercelPgPreparedQuery"}async execute(e={}){let t=t4(this.params,e);this.logger.logQuery(this.rawQuery.text,t);let{fields:r,rawQuery:i,client:s,query:n,joinsNotNullableMap:o,customResultMapper:a}=this;if(!r&&!a)return s.query(i,t);let{rows:l}=await s.query(n,t);return a?a(l):l.map(e=>(function(e,t,r){let i={},s=e.reduce((e,{path:s,field:n},o)=>{let a;a=eM(n,eV)?n:eM(n,tZ)?n.decoder:n.sql.decoder;let l=e;for(let[e,h]of s.entries())if(e<s.length-1)h in l||(l[h]={}),l=l[h];else{let e=t[o],u=l[h]=null===e?null:a.mapFromDriverValue(e);if(r&&eM(n,eV)&&2===s.length){let e=s[0];e in i?"string"==typeof i[e]&&i[e]!==n.table[eN]&&(i[e]=!1):i[e]=null===u&&n.table[eN]}}return e},{});if(r&&Object.keys(i).length>0)for(let[e,t]of Object.entries(i))"string"!=typeof t||r[t]||(s[e]=null);return s})(r,e,o))}all(e={}){let t=t4(this.params,e);return this.logger.logQuery(this.rawQuery.text,t),this.client.query(this.rawQuery,t).then(e=>e.rows)}values(e={}){let t=t4(this.params,e);return this.logger.logQuery(this.rawQuery.text,t),this.client.query(this.query,t).then(e=>e.rows)}}class r4 extends r6{constructor(e,t,r,i={}){super(t),this.client=e,this.schema=r,this.options=i,this.logger=i.logger??new td}static{this[eO]="VercelPgSession"}prepareQuery(e,t,r,i){return new r3(this.client,e.sql,e.params,this.logger,t,r,i)}async query(e,t){this.logger.logQuery(e,t);let r=await this.client.query({rowMode:"array",text:e,values:t});return r}async queryObjects(e,t){return this.client.query(e,t)}async transaction(e,t){let r=this.client instanceof tl?new r4(await this.client.connect(),this.dialect,this.schema,this.options):this,i=new r8(this.dialect,r,this.schema);await i.execute(t5`begin${t?t5` ${i.getTransactionConfigSQL(t)}`:void 0}`);try{let t=await e(i);return await i.execute(t5`commit`),t}catch(e){throw await i.execute(t5`rollback`),e}finally{this.client instanceof tl&&r.client.release()}}}class r8 extends r5{static{this[eO]="VercelPgTransaction"}async transaction(e){let t=`sp${this.nestedIndex+1}`,r=new r8(this.dialect,this.session,this.schema,this.nestedIndex+1);await r.execute(t5.raw(`savepoint ${t}`));try{let i=await e(r);return await r.execute(t5.raw(`release savepoint ${t}`)),i}catch(e){throw await r.execute(t5.raw(`rollback to savepoint ${t}`)),e}}}class r7{constructor(e,t,r={}){this.client=e,this.dialect=t,this.options=r,this.initMappers()}static{this[eO]="VercelPgDriver"}createSession(e){return new r4(this.client,this.dialect,e,{logger:this.options.logger})}initMappers(){}}let r9=function(e,t={}){let r,i;let s=new rR;if(!0===t.logger?r=new tf:!1!==t.logger&&(r=t.logger),t.schema){let e=function(e,t){1===Object.keys(e).length&&"default"in e&&!eM(e.default,eF)&&(e=e.default);let r={},i={},s={};for(let[n,o]of Object.entries(e))if("object"==typeof o&&null!==o&&eU in o){let e=o[eF.Symbol.Name],t=i[e];for(let i of(r[e]=n,s[n]={tsName:n,dbName:o[eF.Symbol.Name],schema:o[eF.Symbol.Schema],columns:o[eF.Symbol.Columns],relations:t?.relations??{},primaryKey:t?.primaryKey??[]},Object.values(o[eF.Symbol.Columns])))i.primary&&s[n].primaryKey.push(i);let a=o[eF.Symbol.ExtraConfigBuilder]?.(o);if(a)for(let e of Object.values(a))eM(e,tp)&&s[n].primaryKey.push(...e.columns)}else if(eM(o,tj)){let e;let n=o.table[eF.Symbol.Name],a=r[n],l=o.config(t(o.table));for(let[t,r]of Object.entries(l))if(a){let i=s[a];i.relations[t]=r,e&&i.primaryKey.push(...e)}else n in i||(i[n]={relations:{},primaryKey:e}),i[n].relations[t]=r}return{tables:s,tableNamesMap:r}}(t.schema,tz);i={fullSchema:t.schema,schema:e.tables,tableNamesMap:e.tableNamesMap}}let n=new r7(e,s,{logger:r}),o=n.createSession(i);return new r1(s,o,i)}(tu,{schema:c});async function ie(e){if("POST"===e.method)try{let t=await e.json();return await r9.insert(te).values(t).execute(),new Response(null,{status:201})}catch(e){return new Response(null,{status:500})}if("GET"===e.method){let e=await r9.select().from(te);return Response.json(e)}}function it(e){return eg({...e,IncrementalCache:ek,page:"/api/users",handler:ie})}},894:e=>{"use strict";var t,r,i,s,n,o=Object.create,a=Object.defineProperty,l=Object.getOwnPropertyDescriptor,h=Object.getOwnPropertyNames,u=Object.getPrototypeOf,c=Object.prototype.hasOwnProperty,f=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,d=(e,t)=>a(e,"name",{value:t,configurable:!0}),p=(e,t)=>()=>(e&&(t=e(e=0)),t),g=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),m=(e,t)=>{for(var r in t)a(e,r,{get:t[r],enumerable:!0})},y=(e,t,r,i)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let s of h(t))c.call(e,s)||s===r||a(e,s,{get:()=>t[s],enumerable:!(i=l(t,s))||i.enumerable});return e},b=(e,t,r)=>(r=null!=e?o(u(e)):{},y(!t&&e&&e.__esModule?r:a(r,"default",{value:e,enumerable:!0}),e)),v=e=>y(a({},"__esModule",{value:!0}),e),w=(e,t,r)=>(f(e,"symbol"!=typeof t?t+"":t,r),r),S=g(e=>{x(),e.byteLength=l,e.toByteArray=u,e.fromByteArray=p;var t,r,i=[],s=[],n="u">typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(t=0,r=o.length;t<r;++t)i[t]=o[t],s[o.charCodeAt(t)]=t;function a(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");-1===r&&(r=t);var i=r===t?0:4-r%4;return[r,i]}function l(e){var t=a(e),r=t[0],i=t[1];return(r+i)*3/4-i}function h(e,t,r){return(t+r)*3/4-r}function u(e){var t,r,i=a(e),o=i[0],l=i[1],u=new n(h(e,o,l)),c=0,f=l>0?o-4:o;for(r=0;r<f;r+=4)t=s[e.charCodeAt(r)]<<18|s[e.charCodeAt(r+1)]<<12|s[e.charCodeAt(r+2)]<<6|s[e.charCodeAt(r+3)],u[c++]=t>>16&255,u[c++]=t>>8&255,u[c++]=255&t;return 2===l&&(t=s[e.charCodeAt(r)]<<2|s[e.charCodeAt(r+1)]>>4,u[c++]=255&t),1===l&&(t=s[e.charCodeAt(r)]<<10|s[e.charCodeAt(r+1)]<<4|s[e.charCodeAt(r+2)]>>2,u[c++]=t>>8&255,u[c++]=255&t),u}function c(e){return i[e>>18&63]+i[e>>12&63]+i[e>>6&63]+i[63&e]}function f(e,t,r){for(var i=[],s=t;s<r;s+=3)i.push(c((e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2])));return i.join("")}function p(e){for(var t,r=e.length,s=r%3,n=[],o=0,a=r-s;o<a;o+=16383)n.push(f(e,o,o+16383>a?a:o+16383));return 1===s?n.push(i[(t=e[r-1])>>2]+i[t<<4&63]+"=="):2===s&&n.push(i[(t=(e[r-2]<<8)+e[r-1])>>10]+i[t>>4&63]+i[t<<2&63]+"="),n.join("")}s["-".charCodeAt(0)]=62,s["_".charCodeAt(0)]=63,d(a,"getLens"),d(l,"byteLength"),d(h,"_byteLength"),d(u,"toByteArray"),d(c,"tripletToBase64"),d(f,"encodeChunk"),d(p,"fromByteArray")}),_=g(e=>{x(),e.read=function(e,t,r,i,s){var n,o,a=8*s-i-1,l=(1<<a)-1,h=l>>1,u=-7,c=r?s-1:0,f=r?-1:1,d=e[t+c];for(c+=f,n=d&(1<<-u)-1,d>>=-u,u+=a;u>0;n=256*n+e[t+c],c+=f,u-=8);for(o=n&(1<<-u)-1,n>>=-u,u+=i;u>0;o=256*o+e[t+c],c+=f,u-=8);if(0===n)n=1-h;else{if(n===l)return o?NaN:(d?-1:1)*(1/0);o+=Math.pow(2,i),n-=h}return(d?-1:1)*o*Math.pow(2,n-i)},e.write=function(e,t,r,i,s,n){var o,a,l,h=8*n-s-1,u=(1<<h)-1,c=u>>1,f=23===s?5960464477539062e-23:0,d=i?0:n-1,p=i?1:-1,g=t<0||0===t&&1/t<0?1:0;for(isNaN(t=Math.abs(t))||t===1/0?(a=isNaN(t)?1:0,o=u):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+c>=1?t+=f/l:t+=f*Math.pow(2,1-c),t*l>=2&&(o++,l/=2),o+c>=u?(a=0,o=u):o+c>=1?(a=(t*l-1)*Math.pow(2,s),o+=c):(a=t*Math.pow(2,c-1)*Math.pow(2,s),o=0));s>=8;e[r+d]=255&a,d+=p,a/=256,s-=8);for(o=o<<s|a,h+=s;h>0;e[r+d]=255&o,d+=p,o/=256,h-=8);e[r+d-p]|=128*g}}),E=g(e=>{x();var t=S(),r=_(),i="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function s(){try{let e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch{return!1}}function n(e){if(e>2147483647)throw RangeError('The value "'+e+'" is invalid for option "size"');let t=new Uint8Array(e);return Object.setPrototypeOf(t,o.prototype),t}function o(e,t,r){if("number"==typeof e){if("string"==typeof t)throw TypeError('The "string" argument must be of type string. Received type number');return u(e)}return a(e,t,r)}function a(e,t,r){if("string"==typeof e)return c(e,t);if(ArrayBuffer.isView(e))return p(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(eo(e,ArrayBuffer)||e&&eo(e.buffer,ArrayBuffer)||"u">typeof SharedArrayBuffer&&(eo(e,SharedArrayBuffer)||e&&eo(e.buffer,SharedArrayBuffer)))return g(e,t,r);if("number"==typeof e)throw TypeError('The "value" argument must not be of type number. Received type number');let i=e.valueOf&&e.valueOf();if(null!=i&&i!==e)return o.from(i,t,r);let s=m(e);if(s)return s;if("u">typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return o.from(e[Symbol.toPrimitive]("string"),t,r);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function l(e){if("number"!=typeof e)throw TypeError('"size" argument must be of type number');if(e<0)throw RangeError('The value "'+e+'" is invalid for option "size"')}function h(e,t,r){return l(e),e<=0?n(e):void 0!==t?"string"==typeof r?n(e).fill(t,r):n(e).fill(t):n(e)}function u(e){return l(e),n(e<0?0:0|y(e))}function c(e,t){if(("string"!=typeof t||""===t)&&(t="utf8"),!o.isEncoding(t))throw TypeError("Unknown encoding: "+t);let r=0|v(e,t),i=n(r),s=i.write(e,t);return s!==r&&(i=i.slice(0,s)),i}function f(e){let t=e.length<0?0:0|y(e.length),r=n(t);for(let i=0;i<t;i+=1)r[i]=255&e[i];return r}function p(e){if(eo(e,Uint8Array)){let t=new Uint8Array(e);return g(t.buffer,t.byteOffset,t.byteLength)}return f(e)}function g(e,t,r){let i;if(t<0||e.byteLength<t)throw RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(i=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),o.prototype),i}function m(e){if(o.isBuffer(e)){let t=0|y(e.length),r=n(t);return 0===r.length||e.copy(r,0,0,t),r}return void 0!==e.length?"number"!=typeof e.length||ea(e.length)?n(0):f(e):"Buffer"===e.type&&Array.isArray(e.data)?f(e.data):void 0}function y(e){if(e>=2147483647)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|e}function b(e){return+e!=e&&(e=0),o.alloc(+e)}function v(e,t){if(o.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||eo(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);let r=e.length,i=arguments.length>2&&!0===arguments[2];if(!i&&0===r)return 0;let s=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return et(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return es(e).length;default:if(s)return i?-1:et(e).length;t=(""+t).toLowerCase(),s=!0}}function w(e,t,r){let i=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===r||r>this.length)&&(r=this.length),r<=0)||(r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return B(this,t,r);case"utf8":case"utf-8":return O(this,t,r);case"ascii":return N(this,t,r);case"latin1":case"binary":return D(this,t,r);case"base64":return k(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return $(this,t,r);default:if(i)throw TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function E(e,t,r){let i=e[t];e[t]=e[r],e[r]=i}function C(e,t,r,i,s){if(0===e.length)return -1;if("string"==typeof r?(i=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),ea(r=+r)&&(r=s?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(s)return -1;r=e.length-1}else if(r<0){if(!s)return -1;r=0}if("string"==typeof t&&(t=o.from(t,i)),o.isBuffer(t))return 0===t.length?-1:A(e,t,r,i,s);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?s?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):A(e,[t],r,i,s);throw TypeError("val must be string, number or Buffer")}function A(e,t,r,i,s){let n,o=1,a=e.length,l=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return -1;o=2,a/=2,l/=2,r/=2}function h(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(d(h,"read"),s){let i=-1;for(n=r;n<a;n++)if(h(e,n)===h(t,-1===i?0:n-i)){if(-1===i&&(i=n),n-i+1===l)return i*o}else -1!==i&&(n-=n-i),i=-1}else for(r+l>a&&(r=a-l),n=r;n>=0;n--){let r=!0;for(let i=0;i<l;i++)if(h(e,n+i)!==h(t,i)){r=!1;break}if(r)return n}return -1}function P(e,t,r,i){let s;r=Number(r)||0;let n=e.length-r;i?(i=Number(i))>n&&(i=n):i=n;let o=t.length;for(i>o/2&&(i=o/2),s=0;s<i;++s){let i=parseInt(t.substr(2*s,2),16);if(ea(i))break;e[r+s]=i}return s}function T(e,t,r,i){return en(et(t,e.length-r),e,r,i)}function L(e,t,r,i){return en(er(t),e,r,i)}function I(e,t,r,i){return en(es(t),e,r,i)}function R(e,t,r,i){return en(ei(t,e.length-r),e,r,i)}function k(e,r,i){return 0===r&&i===e.length?t.fromByteArray(e):t.fromByteArray(e.slice(r,i))}function O(e,t,r){r=Math.min(e.length,r);let i=[],s=t;for(;s<r;){let t=e[s],n=null,o=t>239?4:t>223?3:t>191?2:1;if(s+o<=r){let r,i,a,l;switch(o){case 1:t<128&&(n=t);break;case 2:(192&(r=e[s+1]))==128&&(l=(31&t)<<6|63&r)>127&&(n=l);break;case 3:r=e[s+1],i=e[s+2],(192&r)==128&&(192&i)==128&&(l=(15&t)<<12|(63&r)<<6|63&i)>2047&&(l<55296||l>57343)&&(n=l);break;case 4:r=e[s+1],i=e[s+2],a=e[s+3],(192&r)==128&&(192&i)==128&&(192&a)==128&&(l=(15&t)<<18|(63&r)<<12|(63&i)<<6|63&a)>65535&&l<1114112&&(n=l)}}null===n?(n=65533,o=1):n>65535&&(n-=65536,i.push(n>>>10&1023|55296),n=56320|1023&n),i.push(n),s+=o}return M(i)}function M(e){let t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);let r="",i=0;for(;i<t;)r+=String.fromCharCode.apply(String,e.slice(i,i+=4096));return r}function N(e,t,r){let i="";r=Math.min(e.length,r);for(let s=t;s<r;++s)i+=String.fromCharCode(127&e[s]);return i}function D(e,t,r){let i="";r=Math.min(e.length,r);for(let s=t;s<r;++s)i+=String.fromCharCode(e[s]);return i}function B(e,t,r){let i=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>i)&&(r=i);let s="";for(let i=t;i<r;++i)s+=el[e[i]];return s}function $(e,t,r){let i=e.slice(t,r),s="";for(let e=0;e<i.length-1;e+=2)s+=String.fromCharCode(i[e]+256*i[e+1]);return s}function q(e,t,r){if(e%1!=0||e<0)throw RangeError("offset is not uint");if(e+t>r)throw RangeError("Trying to access beyond buffer length")}function Q(e,t,r,i,s,n){if(!o.isBuffer(e))throw TypeError('"buffer" argument must be a Buffer instance');if(t>s||t<n)throw RangeError('"value" argument is out of bounds');if(r+i>e.length)throw RangeError("Index out of range")}function j(e,t,r,i,s){J(t,i,s,e,r,7);let n=Number(t&BigInt(4294967295));e[r++]=n,n>>=8,e[r++]=n,n>>=8,e[r++]=n,n>>=8,e[r++]=n;let o=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,r}function U(e,t,r,i,s){J(t,i,s,e,r,7);let n=Number(t&BigInt(4294967295));e[r+7]=n,n>>=8,e[r+6]=n,n>>=8,e[r+5]=n,n>>=8,e[r+4]=n;let o=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=o,o>>=8,e[r+2]=o,o>>=8,e[r+1]=o,o>>=8,e[r]=o,r+8}function F(e,t,r,i,s,n){if(r+i>e.length||r<0)throw RangeError("Index out of range")}function z(e,t,i,s,n){return t=+t,i>>>=0,n||F(e,t,i,4,34028234663852886e22,-34028234663852886e22),r.write(e,t,i,s,23,4),i+4}function H(e,t,i,s,n){return t=+t,i>>>=0,n||F(e,t,i,8,17976931348623157e292,-17976931348623157e292),r.write(e,t,i,s,52,8),i+8}e.Buffer=o,e.SlowBuffer=b,e.INSPECT_MAX_BYTES=50,e.kMaxLength=2147483647,o.TYPED_ARRAY_SUPPORT=s(),!o.TYPED_ARRAY_SUPPORT&&"u">typeof console&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),d(s,"typedArraySupport"),Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}}),d(n,"createBuffer"),d(o,"Buffer"),o.poolSize=8192,d(a,"from"),o.from=function(e,t,r){return a(e,t,r)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array),d(l,"assertSize"),d(h,"alloc"),o.alloc=function(e,t,r){return h(e,t,r)},d(u,"allocUnsafe"),o.allocUnsafe=function(e){return u(e)},o.allocUnsafeSlow=function(e){return u(e)},d(c,"fromString"),d(f,"fromArrayLike"),d(p,"fromArrayView"),d(g,"fromArrayBuffer"),d(m,"fromObject"),d(y,"checked"),d(b,"SlowBuffer"),o.isBuffer=d(function(e){return null!=e&&!0===e._isBuffer&&e!==o.prototype},"isBuffer"),o.compare=d(function(e,t){if(eo(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),eo(t,Uint8Array)&&(t=o.from(t,t.offset,t.byteLength)),!o.isBuffer(e)||!o.isBuffer(t))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let r=e.length,i=t.length;for(let s=0,n=Math.min(r,i);s<n;++s)if(e[s]!==t[s]){r=e[s],i=t[s];break}return r<i?-1:i<r?1:0},"compare"),o.isEncoding=d(function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},"isEncoding"),o.concat=d(function(e,t){let r;if(!Array.isArray(e))throw TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return o.alloc(0);if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;let i=o.allocUnsafe(t),s=0;for(r=0;r<e.length;++r){let t=e[r];if(eo(t,Uint8Array))s+t.length>i.length?(o.isBuffer(t)||(t=o.from(t)),t.copy(i,s)):Uint8Array.prototype.set.call(i,t,s);else if(o.isBuffer(t))t.copy(i,s);else throw TypeError('"list" argument must be an Array of Buffers');s+=t.length}return i},"concat"),d(v,"byteLength"),o.byteLength=v,d(w,"slowToString"),o.prototype._isBuffer=!0,d(E,"swap"),o.prototype.swap16=d(function(){let e=this.length;if(e%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)E(this,t,t+1);return this},"swap16"),o.prototype.swap32=d(function(){let e=this.length;if(e%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)E(this,t,t+3),E(this,t+1,t+2);return this},"swap32"),o.prototype.swap64=d(function(){let e=this.length;if(e%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)E(this,t,t+7),E(this,t+1,t+6),E(this,t+2,t+5),E(this,t+3,t+4);return this},"swap64"),o.prototype.toString=d(function(){let e=this.length;return 0===e?"":0==arguments.length?O(this,0,e):w.apply(this,arguments)},"toString"),o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=d(function(e){if(!o.isBuffer(e))throw TypeError("Argument must be a Buffer");return this===e||0===o.compare(this,e)},"equals"),o.prototype.inspect=d(function(){let t="",r=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(t+=" ... "),"<Buffer "+t+">"},"inspect"),i&&(o.prototype[i]=o.prototype.inspect),o.prototype.compare=d(function(e,t,r,i,s){if(eo(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),!o.isBuffer(e))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===i&&(i=0),void 0===s&&(s=this.length),t<0||r>e.length||i<0||s>this.length)throw RangeError("out of range index");if(i>=s&&t>=r)return 0;if(i>=s)return -1;if(t>=r)return 1;if(t>>>=0,r>>>=0,i>>>=0,s>>>=0,this===e)return 0;let n=s-i,a=r-t,l=Math.min(n,a),h=this.slice(i,s),u=e.slice(t,r);for(let e=0;e<l;++e)if(h[e]!==u[e]){n=h[e],a=u[e];break}return n<a?-1:a<n?1:0},"compare"),d(C,"bidirectionalIndexOf"),d(A,"arrayIndexOf"),o.prototype.includes=d(function(e,t,r){return -1!==this.indexOf(e,t,r)},"includes"),o.prototype.indexOf=d(function(e,t,r){return C(this,e,t,r,!0)},"indexOf"),o.prototype.lastIndexOf=d(function(e,t,r){return C(this,e,t,r,!1)},"lastIndexOf"),d(P,"hexWrite"),d(T,"utf8Write"),d(L,"asciiWrite"),d(I,"base64Write"),d(R,"ucs2Write"),o.prototype.write=d(function(e,t,r,i){if(void 0===t)i="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)i=t,r=this.length,t=0;else if(isFinite(t))t>>>=0,isFinite(r)?(r>>>=0,void 0===i&&(i="utf8")):(i=r,r=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let s=this.length-t;if((void 0===r||r>s)&&(r=s),e.length>0&&(r<0||t<0)||t>this.length)throw RangeError("Attempt to write outside buffer bounds");i||(i="utf8");let n=!1;for(;;)switch(i){case"hex":return P(this,e,t,r);case"utf8":case"utf-8":return T(this,e,t,r);case"ascii":case"latin1":case"binary":return L(this,e,t,r);case"base64":return I(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,e,t,r);default:if(n)throw TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),n=!0}},"write"),o.prototype.toJSON=d(function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},"toJSON"),d(k,"base64Slice"),d(O,"utf8Slice"),d(M,"decodeCodePointsArray"),d(N,"asciiSlice"),d(D,"latin1Slice"),d(B,"hexSlice"),d($,"utf16leSlice"),o.prototype.slice=d(function(e,t){let r=this.length;e=~~e,t=void 0===t?r:~~t,e<0?(e+=r)<0&&(e=0):e>r&&(e=r),t<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);let i=this.subarray(e,t);return Object.setPrototypeOf(i,o.prototype),i},"slice"),d(q,"checkOffset"),o.prototype.readUintLE=o.prototype.readUIntLE=d(function(e,t,r){e>>>=0,t>>>=0,r||q(e,t,this.length);let i=this[e],s=1,n=0;for(;++n<t&&(s*=256);)i+=this[e+n]*s;return i},"readUIntLE"),o.prototype.readUintBE=o.prototype.readUIntBE=d(function(e,t,r){e>>>=0,t>>>=0,r||q(e,t,this.length);let i=this[e+--t],s=1;for(;t>0&&(s*=256);)i+=this[e+--t]*s;return i},"readUIntBE"),o.prototype.readUint8=o.prototype.readUInt8=d(function(e,t){return e>>>=0,t||q(e,1,this.length),this[e]},"readUInt8"),o.prototype.readUint16LE=o.prototype.readUInt16LE=d(function(e,t){return e>>>=0,t||q(e,2,this.length),this[e]|this[e+1]<<8},"readUInt16LE"),o.prototype.readUint16BE=o.prototype.readUInt16BE=d(function(e,t){return e>>>=0,t||q(e,2,this.length),this[e]<<8|this[e+1]},"readUInt16BE"),o.prototype.readUint32LE=o.prototype.readUInt32LE=d(function(e,t){return e>>>=0,t||q(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},"readUInt32LE"),o.prototype.readUint32BE=o.prototype.readUInt32BE=d(function(e,t){return e>>>=0,t||q(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},"readUInt32BE"),o.prototype.readBigUInt64LE=eh(d(function(e){Y(e>>>=0,"offset");let t=this[e],r=this[e+7];(void 0===t||void 0===r)&&X(e,this.length-8);let i=t+256*this[++e]+65536*this[++e]+16777216*this[++e],s=this[++e]+256*this[++e]+65536*this[++e]+16777216*r;return BigInt(i)+(BigInt(s)<<BigInt(32))},"readBigUInt64LE")),o.prototype.readBigUInt64BE=eh(d(function(e){Y(e>>>=0,"offset");let t=this[e],r=this[e+7];(void 0===t||void 0===r)&&X(e,this.length-8);let i=16777216*t+65536*this[++e]+256*this[++e]+this[++e],s=16777216*this[++e]+65536*this[++e]+256*this[++e]+r;return(BigInt(i)<<BigInt(32))+BigInt(s)},"readBigUInt64BE")),o.prototype.readIntLE=d(function(e,t,r){e>>>=0,t>>>=0,r||q(e,t,this.length);let i=this[e],s=1,n=0;for(;++n<t&&(s*=256);)i+=this[e+n]*s;return i>=(s*=128)&&(i-=Math.pow(2,8*t)),i},"readIntLE"),o.prototype.readIntBE=d(function(e,t,r){e>>>=0,t>>>=0,r||q(e,t,this.length);let i=t,s=1,n=this[e+--i];for(;i>0&&(s*=256);)n+=this[e+--i]*s;return n>=(s*=128)&&(n-=Math.pow(2,8*t)),n},"readIntBE"),o.prototype.readInt8=d(function(e,t){return e>>>=0,t||q(e,1,this.length),128&this[e]?-((255-this[e]+1)*1):this[e]},"readInt8"),o.prototype.readInt16LE=d(function(e,t){e>>>=0,t||q(e,2,this.length);let r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},"readInt16LE"),o.prototype.readInt16BE=d(function(e,t){e>>>=0,t||q(e,2,this.length);let r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},"readInt16BE"),o.prototype.readInt32LE=d(function(e,t){return e>>>=0,t||q(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},"readInt32LE"),o.prototype.readInt32BE=d(function(e,t){return e>>>=0,t||q(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},"readInt32BE"),o.prototype.readBigInt64LE=eh(d(function(e){Y(e>>>=0,"offset");let t=this[e],r=this[e+7];return(void 0===t||void 0===r)&&X(e,this.length-8),(BigInt(this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24))<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+16777216*this[++e])},"readBigInt64LE")),o.prototype.readBigInt64BE=eh(d(function(e){Y(e>>>=0,"offset");let t=this[e],r=this[e+7];return(void 0===t||void 0===r)&&X(e,this.length-8),(BigInt((t<<24)+65536*this[++e]+256*this[++e]+this[++e])<<BigInt(32))+BigInt(16777216*this[++e]+65536*this[++e]+256*this[++e]+r)},"readBigInt64BE")),o.prototype.readFloatLE=d(function(e,t){return e>>>=0,t||q(e,4,this.length),r.read(this,e,!0,23,4)},"readFloatLE"),o.prototype.readFloatBE=d(function(e,t){return e>>>=0,t||q(e,4,this.length),r.read(this,e,!1,23,4)},"readFloatBE"),o.prototype.readDoubleLE=d(function(e,t){return e>>>=0,t||q(e,8,this.length),r.read(this,e,!0,52,8)},"readDoubleLE"),o.prototype.readDoubleBE=d(function(e,t){return e>>>=0,t||q(e,8,this.length),r.read(this,e,!1,52,8)},"readDoubleBE"),d(Q,"checkInt"),o.prototype.writeUintLE=o.prototype.writeUIntLE=d(function(e,t,r,i){if(e=+e,t>>>=0,r>>>=0,!i){let i=Math.pow(2,8*r)-1;Q(this,e,t,r,i,0)}let s=1,n=0;for(this[t]=255&e;++n<r&&(s*=256);)this[t+n]=e/s&255;return t+r},"writeUIntLE"),o.prototype.writeUintBE=o.prototype.writeUIntBE=d(function(e,t,r,i){if(e=+e,t>>>=0,r>>>=0,!i){let i=Math.pow(2,8*r)-1;Q(this,e,t,r,i,0)}let s=r-1,n=1;for(this[t+s]=255&e;--s>=0&&(n*=256);)this[t+s]=e/n&255;return t+r},"writeUIntBE"),o.prototype.writeUint8=o.prototype.writeUInt8=d(function(e,t,r){return e=+e,t>>>=0,r||Q(this,e,t,1,255,0),this[t]=255&e,t+1},"writeUInt8"),o.prototype.writeUint16LE=o.prototype.writeUInt16LE=d(function(e,t,r){return e=+e,t>>>=0,r||Q(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},"writeUInt16LE"),o.prototype.writeUint16BE=o.prototype.writeUInt16BE=d(function(e,t,r){return e=+e,t>>>=0,r||Q(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},"writeUInt16BE"),o.prototype.writeUint32LE=o.prototype.writeUInt32LE=d(function(e,t,r){return e=+e,t>>>=0,r||Q(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},"writeUInt32LE"),o.prototype.writeUint32BE=o.prototype.writeUInt32BE=d(function(e,t,r){return e=+e,t>>>=0,r||Q(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},"writeUInt32BE"),d(j,"wrtBigUInt64LE"),d(U,"wrtBigUInt64BE"),o.prototype.writeBigUInt64LE=eh(d(function(e,t=0){return j(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))},"writeBigUInt64LE")),o.prototype.writeBigUInt64BE=eh(d(function(e,t=0){return U(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))},"writeBigUInt64BE")),o.prototype.writeIntLE=d(function(e,t,r,i){if(e=+e,t>>>=0,!i){let i=Math.pow(2,8*r-1);Q(this,e,t,r,i-1,-i)}let s=0,n=1,o=0;for(this[t]=255&e;++s<r&&(n*=256);)e<0&&0===o&&0!==this[t+s-1]&&(o=1),this[t+s]=(e/n>>0)-o&255;return t+r},"writeIntLE"),o.prototype.writeIntBE=d(function(e,t,r,i){if(e=+e,t>>>=0,!i){let i=Math.pow(2,8*r-1);Q(this,e,t,r,i-1,-i)}let s=r-1,n=1,o=0;for(this[t+s]=255&e;--s>=0&&(n*=256);)e<0&&0===o&&0!==this[t+s+1]&&(o=1),this[t+s]=(e/n>>0)-o&255;return t+r},"writeIntBE"),o.prototype.writeInt8=d(function(e,t,r){return e=+e,t>>>=0,r||Q(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},"writeInt8"),o.prototype.writeInt16LE=d(function(e,t,r){return e=+e,t>>>=0,r||Q(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},"writeInt16LE"),o.prototype.writeInt16BE=d(function(e,t,r){return e=+e,t>>>=0,r||Q(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},"writeInt16BE"),o.prototype.writeInt32LE=d(function(e,t,r){return e=+e,t>>>=0,r||Q(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},"writeInt32LE"),o.prototype.writeInt32BE=d(function(e,t,r){return e=+e,t>>>=0,r||Q(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},"writeInt32BE"),o.prototype.writeBigInt64LE=eh(d(function(e,t=0){return j(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))},"writeBigInt64LE")),o.prototype.writeBigInt64BE=eh(d(function(e,t=0){return U(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))},"writeBigInt64BE")),d(F,"checkIEEE754"),d(z,"writeFloat"),o.prototype.writeFloatLE=d(function(e,t,r){return z(this,e,t,!0,r)},"writeFloatLE"),o.prototype.writeFloatBE=d(function(e,t,r){return z(this,e,t,!1,r)},"writeFloatBE"),d(H,"writeDouble"),o.prototype.writeDoubleLE=d(function(e,t,r){return H(this,e,t,!0,r)},"writeDoubleLE"),o.prototype.writeDoubleBE=d(function(e,t,r){return H(this,e,t,!1,r)},"writeDoubleBE"),o.prototype.copy=d(function(e,t,r,i){if(!o.isBuffer(e))throw TypeError("argument should be a Buffer");if(r||(r=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<r&&(i=r),i===r||0===e.length||0===this.length)return 0;if(t<0)throw RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw RangeError("Index out of range");if(i<0)throw RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-r&&(i=e.length-t+r);let s=i-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,i):Uint8Array.prototype.set.call(e,this.subarray(r,i),t),s},"copy"),o.prototype.fill=d(function(e,t,r,i){let s;if("string"==typeof e){if("string"==typeof t?(i=t,t=0,r=this.length):"string"==typeof r&&(i=r,r=this.length),void 0!==i&&"string"!=typeof i)throw TypeError("encoding must be a string");if("string"==typeof i&&!o.isEncoding(i))throw TypeError("Unknown encoding: "+i);if(1===e.length){let t=e.charCodeAt(0);("utf8"===i&&t<128||"latin1"===i)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw RangeError("Out of range index");if(r<=t)return this;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(s=t;s<r;++s)this[s]=e;else{let n=o.isBuffer(e)?e:o.from(e,i),a=n.length;if(0===a)throw TypeError('The value "'+e+'" is invalid for argument "value"');for(s=0;s<r-t;++s)this[s+t]=n[s%a]}return this},"fill");var W={};function V(e,t,r){var i;W[e]=(d(i=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}},"NodeError"),i)}function K(e){let t="",r=e.length,i="-"===e[0]?1:0;for(;r>=i+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function G(e,t,r){Y(t,"offset"),(void 0===e[t]||void 0===e[t+r])&&X(t,e.length-(r+1))}function J(e,t,r,i,s,n){if(e>r||e<t){let i="bigint"==typeof t?"n":"",s;throw s=n>3?0===t||t===BigInt(0)?`>= 0${i} and < 2${i} ** ${(n+1)*8}${i}`:`>= -(2${i} ** ${(n+1)*8-1}${i}) and \
< 2 ** ${(n+1)*8-1}${i}`:`>= ${t}${i} and <= ${r}${i}`,new W.ERR_OUT_OF_RANGE("value",s,e)}G(i,s,n)}function Y(e,t){if("number"!=typeof e)throw new W.ERR_INVALID_ARG_TYPE(t,"number",e)}function X(e,t,r){throw Math.floor(e)!==e?(Y(e,r),new W.ERR_OUT_OF_RANGE(r||"offset","an integer",e)):t<0?new W.ERR_BUFFER_OUT_OF_BOUNDS:new W.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${t}`,e)}d(V,"E"),V("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),V("ERR_INVALID_ARG_TYPE",function(e,t){return`The "${e}" argum\
ent must be of type number. Received type ${typeof t}`},TypeError),V("ERR_OUT_OF_RANGE",function(e,t,r){let i=`The value of "${e}" is out of range.`,s=r;return Number.isInteger(r)&&Math.abs(r)>4294967296?s=K(String(r)):"bigint"==typeof r&&(s=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(s=K(s)),s+="n"),i+=` It\
 must be ${t}. Received ${s}`},RangeError),d(K,"addNumericalSeparator"),d(G,"checkBounds"),d(J,"checkIntBI"),d(Y,"validateNumber"),d(X,"boundsError");var Z=/[^+/0-9A-Za-z-_]/g;function ee(e){if((e=(e=e.split("=")[0]).trim().replace(Z,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}function et(e,t){t=t||1/0;let r,i=e.length,s=null,n=[];for(let o=0;o<i;++o){if((r=e.charCodeAt(o))>55295&&r<57344){if(!s){if(r>56319||o+1===i){(t-=3)>-1&&n.push(239,191,189);continue}s=r;continue}if(r<56320){(t-=3)>-1&&n.push(239,191,189),s=r;continue}r=(s-55296<<10|r-56320)+65536}else s&&(t-=3)>-1&&n.push(239,191,189);if(s=null,r<128){if((t-=1)<0)break;n.push(r)}else if(r<2048){if((t-=2)<0)break;n.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;n.push(r>>12|224,r>>6&63|128,63&r|128)}else if(r<1114112){if((t-=4)<0)break;n.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}else throw Error("Invalid code point")}return n}function er(e){let t=[];for(let r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}function ei(e,t){let r,i,s=[];for(let n=0;n<e.length&&!((t-=2)<0);++n)i=(r=e.charCodeAt(n))>>8,s.push(r%256),s.push(i);return s}function es(e){return t.toByteArray(ee(e))}function en(e,t,r,i){let s;for(s=0;s<i&&!(s+r>=t.length||s>=e.length);++s)t[s+r]=e[s];return s}function eo(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function ea(e){return e!=e}d(ee,"base64clean"),d(et,"utf8ToBytes"),d(er,"asciiToBytes"),d(ei,"utf16leToBytes"),d(es,"base64ToBytes"),d(en,"blitBuffer"),d(eo,"isInstance"),d(ea,"numberIsNaN");var el=function(){let e="0123456789abcdef",t=Array(256);for(let r=0;r<16;++r){let i=16*r;for(let s=0;s<16;++s)t[i+s]=e[r]+e[s]}return t}();function eh(e){return typeof BigInt>"u"?eu:e}function eu(){throw Error("BigInt not supported")}d(eh,"defineBigIntMethod"),d(eu,"BufferBigIntNotDefined")}),x=p(()=>{t=globalThis,r=globalThis.setImmediate??(e=>setTimeout(e,0)),globalThis.clearImmediate??(e=>clearTimeout(e)),(i=globalThis.crypto??{}).subtle??(i.subtle={}),s="function"==typeof globalThis.Buffer&&"function"==typeof globalThis.Buffer.allocUnsafe?globalThis.Buffer:E().Buffer,(n=globalThis.process??{}).env??(n.env={});try{n.nextTick(()=>{})}catch{let e=Promise.resolve();n.nextTick=e.then.bind(e)}}),C=g((e,t)=>{x();var r,i="object"==typeof Reflect?Reflect:null,s=i&&"function"==typeof i.apply?i.apply:d(function(e,t,r){return Function.prototype.apply.call(e,t,r)},"ReflectApply");function n(e){console&&console.warn&&console.warn(e)}r=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?d(function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))},"ReflectOwnKeys"):d(function(e){return Object.getOwnPropertyNames(e)},"ReflectOwnKeys"),d(n,"ProcessEmitWarning");var o=Number.isNaN||d(function(e){return e!=e},"NumberIsNaN");function a(){a.init.call(this)}d(a,"EventEmitter"),t.exports=a,t.exports.once=w,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var l=10;function h(e){if("function"!=typeof e)throw TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function u(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function c(e,t,r,i){var s,o,a;if(h(r),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),o=e._events),a=o[t]),void 0===a)a=o[t]=r,++e._eventsCount;else if("function"==typeof a?a=o[t]=i?[r,a]:[a,r]:i?a.unshift(r):a.push(r),(s=u(e))>0&&a.length>s&&!a.warned){a.warned=!0;var l=Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=a.length,n(l)}return e}function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0==arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(e,t,r){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},s=f.bind(i);return s.listener=r,i.wrapFn=s,s}function g(e,t,r){var i=e._events;if(void 0===i)return[];var s=i[t];return void 0===s?[]:"function"==typeof s?r?[s.listener||s]:[s]:r?v(s):y(s,s.length)}function m(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function y(e,t){for(var r=Array(t),i=0;i<t;++i)r[i]=e[i];return r}function b(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function v(e){for(var t=Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}function w(e,t){return new Promise(function(r,i){function s(r){e.removeListener(t,n),i(r)}function n(){"function"==typeof e.removeListener&&e.removeListener("error",s),r([].slice.call(arguments))}d(s,"errorListener"),d(n,"resolver"),_(e,t,n,{once:!0}),"error"!==t&&S(e,s,{once:!0})})}function S(e,t,r){"function"==typeof e.on&&_(e,"error",t,r)}function _(e,t,r,i){if("function"==typeof e.on)i.once?e.once(t,r):e.on(t,r);else if("function"==typeof e.addEventListener)e.addEventListener(t,d(function s(n){i.once&&e.removeEventListener(t,s),r(n)},"wrapListener"));else throw TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}d(h,"checkListener"),Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(e){if("number"!=typeof e||e<0||o(e))throw RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");l=e}}),a.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=d(function(e){if("number"!=typeof e||e<0||o(e))throw RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},"setMaxListeners"),d(u,"_getMaxListeners"),a.prototype.getMaxListeners=d(function(){return u(this)},"getMaxListeners"),a.prototype.emit=d(function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var i="error"===e,n=this._events;if(void 0!==n)i=i&&void 0===n.error;else if(!i)return!1;if(i){if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var o,a=Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var l=n[e];if(void 0===l)return!1;if("function"==typeof l)s(l,this,t);else for(var h=l.length,u=y(l,h),r=0;r<h;++r)s(u[r],this,t);return!0},"emit"),d(c,"_addListener"),a.prototype.addListener=d(function(e,t){return c(this,e,t,!1)},"addListener"),a.prototype.on=a.prototype.addListener,a.prototype.prependListener=d(function(e,t){return c(this,e,t,!0)},"prependListener"),d(f,"onceWrapper"),d(p,"_onceWrap"),a.prototype.once=d(function(e,t){return h(t),this.on(e,p(this,e,t)),this},"once"),a.prototype.prependOnceListener=d(function(e,t){return h(t),this.prependListener(e,p(this,e,t)),this},"prependOnceListener"),a.prototype.removeListener=d(function(e,t){var r,i,s,n,o;if(h(t),void 0===(i=this._events)||void 0===(r=i[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(s=-1,n=r.length-1;n>=0;n--)if(r[n]===t||r[n].listener===t){o=r[n].listener,s=n;break}if(s<0)return this;0===s?r.shift():b(r,s),1===r.length&&(i[e]=r[0]),void 0!==i.removeListener&&this.emit("removeListener",e,o||t)}return this},"removeListener"),a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=d(function(e){var t,r,i;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0==arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0==arguments.length){var s,n=Object.keys(r);for(i=0;i<n.length;++i)"removeListener"!==(s=n[i])&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},"removeAllListeners"),d(g,"_listeners"),a.prototype.listeners=d(function(e){return g(this,e,!0)},"listeners"),a.prototype.rawListeners=d(function(e){return g(this,e,!1)},"rawListeners"),a.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):m.call(e,t)},a.prototype.listenerCount=m,d(m,"listenerCount"),a.prototype.eventNames=d(function(){return this._eventsCount>0?r(this._events):[]},"eventNames"),d(y,"arrayClone"),d(b,"spliceOne"),d(v,"unwrapListeners"),d(w,"once"),d(S,"addErrorHandlerIfEventEmitter"),d(_,"eventTargetAgnosticAddListener")}),A={};m(A,{default:()=>P});var P,T=p(()=>{x(),P={}});function L(e){let t=1779033703,r=3144134277,i=1013904242,s=2773480762,n=1359893119,o=2600822924,a=528734635,l=1541459225,h=0,u=0,c=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],f=d((e,t)=>e>>>t|e<<32-t,"rrot"),p=new Uint32Array(64),g=new Uint8Array(64),m=d(()=>{for(let e=0,t=0;e<16;e++,t+=4)p[e]=g[t]<<24|g[t+1]<<16|g[t+2]<<8|g[t+3];for(let e=16;e<64;e++){let t=f(p[e-15],7)^f(p[e-15],18)^p[e-15]>>>3,r=f(p[e-2],17)^f(p[e-2],19)^p[e-2]>>>10;p[e]=p[e-16]+t+p[e-7]+r|0}let e=t,h=r,d=i,m=s,y=n,b=o,v=a,w=l;for(let t=0;t<64;t++){let r=w+(f(y,6)^f(y,11)^f(y,25))+(y&b^~y&v)+c[t]+p[t]|0,i=(f(e,2)^f(e,13)^f(e,22))+(e&h^e&d^h&d)|0;w=v,v=b,b=y,y=m+r|0,m=d,d=h,h=e,e=r+i|0}t=t+e|0,r=r+h|0,i=i+d|0,s=s+m|0,n=n+y|0,o=o+b|0,a=a+v|0,l=l+w|0,u=0},"process"),y=d(e=>{"string"==typeof e&&(e=new TextEncoder().encode(e));for(let t=0;t<e.length;t++)g[u++]=e[t],64===u&&m();h+=e.length},"add"),b=d(()=>{if(g[u++]=128,64==u&&m(),u+8>64){for(;u<64;)g[u++]=0;m()}for(;u<58;)g[u++]=0;let e=8*h;g[u++]=e/1099511627776&255,g[u++]=e/4294967296&255,g[u++]=e>>>24,g[u++]=e>>>16&255,g[u++]=e>>>8&255,g[u++]=255&e,m();let c=new Uint8Array(32);return c[0]=t>>>24,c[1]=t>>>16&255,c[2]=t>>>8&255,c[3]=255&t,c[4]=r>>>24,c[5]=r>>>16&255,c[6]=r>>>8&255,c[7]=255&r,c[8]=i>>>24,c[9]=i>>>16&255,c[10]=i>>>8&255,c[11]=255&i,c[12]=s>>>24,c[13]=s>>>16&255,c[14]=s>>>8&255,c[15]=255&s,c[16]=n>>>24,c[17]=n>>>16&255,c[18]=n>>>8&255,c[19]=255&n,c[20]=o>>>24,c[21]=o>>>16&255,c[22]=o>>>8&255,c[23]=255&o,c[24]=a>>>24,c[25]=a>>>16&255,c[26]=a>>>8&255,c[27]=255&a,c[28]=l>>>24,c[29]=l>>>16&255,c[30]=l>>>8&255,c[31]=255&l,c},"digest");return void 0===e?{add:y,digest:b}:(y(e),b())}var I,R,k=p(()=>{x(),d(L,"sha256")}),O=p(()=>{x(),d(I=class e{constructor(){w(this,"_dataLength",0),w(this,"_bufferLength",0),w(this,"_state",new Int32Array(4)),w(this,"_buffer",new ArrayBuffer(68)),w(this,"_buffer8"),w(this,"_buffer32"),this._buffer8=new Uint8Array(this._buffer,0,68),this._buffer32=new Uint32Array(this._buffer,0,17),this.start()}static hashByteArray(e,t=!1){return this.onePassHasher.start().appendByteArray(e).end(t)}static hashStr(e,t=!1){return this.onePassHasher.start().appendStr(e).end(t)}static hashAsciiStr(e,t=!1){return this.onePassHasher.start().appendAsciiStr(e).end(t)}static _hex(t){let r=e.hexChars,i=e.hexOut,s,n,o,a;for(a=0;a<4;a+=1)for(n=8*a,s=t[a],o=0;o<8;o+=2)i[n+1+o]=r.charAt(15&s),s>>>=4,i[n+0+o]=r.charAt(15&s),s>>>=4;return i.join("")}static _md5cycle(e,t){let r=e[0],i=e[1],s=e[2],n=e[3];r+=(i&s|~i&n)+t[0]-680876936|0,n+=((r=(r<<7|r>>>25)+i|0)&i|~r&s)+t[1]-389564586|0,s+=((n=(n<<12|n>>>20)+r|0)&r|~n&i)+t[2]+606105819|0,i+=((s=(s<<17|s>>>15)+n|0)&n|~s&r)+t[3]-1044525330|0,r+=((i=(i<<22|i>>>10)+s|0)&s|~i&n)+t[4]-176418897|0,n+=((r=(r<<7|r>>>25)+i|0)&i|~r&s)+t[5]+1200080426|0,s+=((n=(n<<12|n>>>20)+r|0)&r|~n&i)+t[6]-1473231341|0,i+=((s=(s<<17|s>>>15)+n|0)&n|~s&r)+t[7]-45705983|0,r+=((i=(i<<22|i>>>10)+s|0)&s|~i&n)+t[8]+1770035416|0,n+=((r=(r<<7|r>>>25)+i|0)&i|~r&s)+t[9]-1958414417|0,s+=((n=(n<<12|n>>>20)+r|0)&r|~n&i)+t[10]-42063|0,i+=((s=(s<<17|s>>>15)+n|0)&n|~s&r)+t[11]-1990404162|0,r+=((i=(i<<22|i>>>10)+s|0)&s|~i&n)+t[12]+1804603682|0,n+=((r=(r<<7|r>>>25)+i|0)&i|~r&s)+t[13]-40341101|0,s+=((n=(n<<12|n>>>20)+r|0)&r|~n&i)+t[14]-1502002290|0,i+=((s=(s<<17|s>>>15)+n|0)&n|~s&r)+t[15]+1236535329|0,r+=((i=(i<<22|i>>>10)+s|0)&n|s&~n)+t[1]-165796510|0,n+=((r=(r<<5|r>>>27)+i|0)&s|i&~s)+t[6]-1069501632|0,s+=((n=(n<<9|n>>>23)+r|0)&i|r&~i)+t[11]+643717713|0,i+=((s=(s<<14|s>>>18)+n|0)&r|n&~r)+t[0]-373897302|0,r+=((i=(i<<20|i>>>12)+s|0)&n|s&~n)+t[5]-701558691|0,n+=((r=(r<<5|r>>>27)+i|0)&s|i&~s)+t[10]+38016083|0,s+=((n=(n<<9|n>>>23)+r|0)&i|r&~i)+t[15]-660478335|0,i+=((s=(s<<14|s>>>18)+n|0)&r|n&~r)+t[4]-405537848|0,r+=((i=(i<<20|i>>>12)+s|0)&n|s&~n)+t[9]+568446438|0,n+=((r=(r<<5|r>>>27)+i|0)&s|i&~s)+t[14]-1019803690|0,s+=((n=(n<<9|n>>>23)+r|0)&i|r&~i)+t[3]-187363961|0,i+=((s=(s<<14|s>>>18)+n|0)&r|n&~r)+t[8]+1163531501|0,r+=((i=(i<<20|i>>>12)+s|0)&n|s&~n)+t[13]-1444681467|0,n+=((r=(r<<5|r>>>27)+i|0)&s|i&~s)+t[2]-51403784|0,s+=((n=(n<<9|n>>>23)+r|0)&i|r&~i)+t[7]+1735328473|0,i+=((s=(s<<14|s>>>18)+n|0)&r|n&~r)+t[12]-1926607734|0,r+=((i=(i<<20|i>>>12)+s|0)^s^n)+t[5]-378558|0,n+=((r=(r<<4|r>>>28)+i|0)^i^s)+t[8]-2022574463|0,s+=((n=(n<<11|n>>>21)+r|0)^r^i)+t[11]+1839030562|0,i+=((s=(s<<16|s>>>16)+n|0)^n^r)+t[14]-35309556|0,r+=((i=(i<<23|i>>>9)+s|0)^s^n)+t[1]-1530992060|0,n+=((r=(r<<4|r>>>28)+i|0)^i^s)+t[4]+1272893353|0,s+=((n=(n<<11|n>>>21)+r|0)^r^i)+t[7]-155497632|0,i+=((s=(s<<16|s>>>16)+n|0)^n^r)+t[10]-1094730640|0,r+=((i=(i<<23|i>>>9)+s|0)^s^n)+t[13]+681279174|0,n+=((r=(r<<4|r>>>28)+i|0)^i^s)+t[0]-358537222|0,s+=((n=(n<<11|n>>>21)+r|0)^r^i)+t[3]-722521979|0,i+=((s=(s<<16|s>>>16)+n|0)^n^r)+t[6]+76029189|0,r+=((i=(i<<23|i>>>9)+s|0)^s^n)+t[9]-640364487|0,n+=((r=(r<<4|r>>>28)+i|0)^i^s)+t[12]-421815835|0,s+=((n=(n<<11|n>>>21)+r|0)^r^i)+t[15]+530742520|0,i+=((s=(s<<16|s>>>16)+n|0)^n^r)+t[2]-995338651|0,i=(i<<23|i>>>9)+s|0,r+=(s^(i|~n))+t[0]-198630844|0,r=(r<<6|r>>>26)+i|0,n+=(i^(r|~s))+t[7]+1126891415|0,n=(n<<10|n>>>22)+r|0,s+=(r^(n|~i))+t[14]-1416354905|0,s=(s<<15|s>>>17)+n|0,i+=(n^(s|~r))+t[5]-57434055|0,i=(i<<21|i>>>11)+s|0,r+=(s^(i|~n))+t[12]+1700485571|0,r=(r<<6|r>>>26)+i|0,n+=(i^(r|~s))+t[3]-1894986606|0,n=(n<<10|n>>>22)+r|0,s+=(r^(n|~i))+t[10]-1051523|0,s=(s<<15|s>>>17)+n|0,i+=(n^(s|~r))+t[1]-2054922799|0,i=(i<<21|i>>>11)+s|0,r+=(s^(i|~n))+t[8]+1873313359|0,r=(r<<6|r>>>26)+i|0,n+=(i^(r|~s))+t[15]-30611744|0,n=(n<<10|n>>>22)+r|0,s+=(r^(n|~i))+t[6]-1560198380|0,s=(s<<15|s>>>17)+n|0,i+=(n^(s|~r))+t[13]+1309151649|0,i=(i<<21|i>>>11)+s|0,r+=(s^(i|~n))+t[4]-145523070|0,r=(r<<6|r>>>26)+i|0,n+=(i^(r|~s))+t[11]-1120210379|0,n=(n<<10|n>>>22)+r|0,s+=(r^(n|~i))+t[2]+718787259|0,s=(s<<15|s>>>17)+n|0,i+=(n^(s|~r))+t[9]-343485551|0,i=(i<<21|i>>>11)+s|0,e[0]=r+e[0]|0,e[1]=i+e[1]|0,e[2]=s+e[2]|0,e[3]=n+e[3]|0}start(){return this._dataLength=0,this._bufferLength=0,this._state.set(e.stateIdentity),this}appendStr(t){let r=this._buffer8,i=this._buffer32,s=this._bufferLength,n,o;for(o=0;o<t.length;o+=1){if((n=t.charCodeAt(o))<128)r[s++]=n;else if(n<2048)r[s++]=(n>>>6)+192,r[s++]=63&n|128;else if(n<55296||n>56319)r[s++]=(n>>>12)+224,r[s++]=n>>>6&63|128,r[s++]=63&n|128;else{if((n=(n-55296)*1024+(t.charCodeAt(++o)-56320)+65536)>1114111)throw Error("Unicode standard supports code points up to U+10FFFF");r[s++]=(n>>>18)+240,r[s++]=n>>>12&63|128,r[s++]=n>>>6&63|128,r[s++]=63&n|128}s>=64&&(this._dataLength+=64,e._md5cycle(this._state,i),s-=64,i[0]=i[16])}return this._bufferLength=s,this}appendAsciiStr(t){let r=this._buffer8,i=this._buffer32,s=this._bufferLength,n,o=0;for(;;){for(n=Math.min(t.length-o,64-s);n--;)r[s++]=t.charCodeAt(o++);if(s<64)break;this._dataLength+=64,e._md5cycle(this._state,i),s=0}return this._bufferLength=s,this}appendByteArray(t){let r=this._buffer8,i=this._buffer32,s=this._bufferLength,n,o=0;for(;;){for(n=Math.min(t.length-o,64-s);n--;)r[s++]=t[o++];if(s<64)break;this._dataLength+=64,e._md5cycle(this._state,i),s=0}return this._bufferLength=s,this}getState(){let e=this._state;return{buffer:String.fromCharCode.apply(null,Array.from(this._buffer8)),buflen:this._bufferLength,length:this._dataLength,state:[e[0],e[1],e[2],e[3]]}}setState(e){let t=e.buffer,r=e.state,i=this._state,s;for(this._dataLength=e.length,this._bufferLength=e.buflen,i[0]=r[0],i[1]=r[1],i[2]=r[2],i[3]=r[3],s=0;s<t.length;s+=1)this._buffer8[s]=t.charCodeAt(s)}end(t=!1){let r=this._bufferLength,i=this._buffer8,s=this._buffer32,n=(r>>2)+1;this._dataLength+=r;let o=8*this._dataLength;if(i[r]=128,i[r+1]=i[r+2]=i[r+3]=0,s.set(e.buffer32Identity.subarray(n),n),r>55&&(e._md5cycle(this._state,s),s.set(e.buffer32Identity)),o<=4294967295)s[14]=o;else{let e=o.toString(16).match(/(.*?)(.{0,8})$/);if(null===e)return;let t=parseInt(e[2],16),r=parseInt(e[1],16)||0;s[14]=t,s[15]=r}return e._md5cycle(this._state,s),t?this._state:e._hex(this._state)}},"Md5"),w(I,"stateIdentity",new Int32Array([1732584193,-271733879,-1732584194,271733878])),w(I,"buffer32Identity",new Int32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])),w(I,"hexChars","0123456789abcdef"),w(I,"hexOut",[]),w(I,"onePassHasher",new I),R=I}),M={};function N(e){return i.getRandomValues(s.alloc(e))}function D(e){if("sha256"===e)return{update:function(e){return{digest:function(){return s.from(L(e))}}}};if("md5"===e)return{update:function(e){return{digest:function(){return"string"==typeof e?R.hashStr(e):R.hashByteArray(e)}}}};throw Error(`Hash type '${e}' not supported`)}function B(e,t){if("sha256"!==e)throw Error(`Only sha256 is supported (requested: '${e}')`);return{update:function(e){return{digest:function(){"string"==typeof t&&(t=new TextEncoder().encode(t)),"string"==typeof e&&(e=new TextEncoder().encode(e));let r=t.length;if(r>64)t=L(t);else if(r<64){let e=new Uint8Array(64);e.set(t),t=e}let i=new Uint8Array(64),n=new Uint8Array(64);for(let e=0;e<64;e++)i[e]=54^t[e],n[e]=92^t[e];let o=new Uint8Array(e.length+64);o.set(i,0),o.set(e,64);let a=new Uint8Array(96);return a.set(n,0),a.set(L(o),64),s.from(L(a))}}}}}m(M,{createHash:()=>D,createHmac:()=>B,randomBytes:()=>N});var $=p(()=>{x(),k(),O(),d(N,"randomBytes"),d(D,"createHash"),d(B,"createHmac")}),q=g(e=>{x(),e.parse=function(e,t){return new r(e,t).parse()};var t=class e{constructor(e,t){this.source=e,this.transform=t||i,this.position=0,this.entries=[],this.recorded=[],this.dimension=0}isEof(){return this.position>=this.source.length}nextCharacter(){var e=this.source[this.position++];return"\\"===e?{value:this.source[this.position++],escaped:!0}:{value:e,escaped:!1}}record(e){this.recorded.push(e)}newEntry(e){var t;(this.recorded.length>0||e)&&("NULL"!==(t=this.recorded.join(""))||e||(t=null),null!==t&&(t=this.transform(t)),this.entries.push(t),this.recorded=[])}consumeDimensions(){if("["===this.source[0])for(;!this.isEof()&&"="!==this.nextCharacter().value;);}parse(t){var r,i,s;for(this.consumeDimensions();!this.isEof();)if("{"!==(r=this.nextCharacter()).value||s){if("}"!==r.value||s)'"'!==r.value||r.escaped?","!==r.value||s?this.record(r.value):this.newEntry():(s&&this.newEntry(!0),s=!s);else if(this.dimension--,!this.dimension&&(this.newEntry(),t))return this.entries}else this.dimension++,this.dimension>1&&(i=new e(this.source.substr(this.position-1),this.transform),this.entries.push(i.parse(!0)),this.position+=i.position-2);if(0!==this.dimension)throw Error("array dimension not balanced");return this.entries}};d(t,"ArrayParser");var r=t;function i(e){return e}d(i,"identity")}),Q=g((e,t)=>{x();var r=q();t.exports={create:function(e,t){return{parse:function(){return r.parse(e,t)}}}}}),j=g((e,t)=>{x();var r=/(\d{1,})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})(\.\d{1,})?.*?( BC)?$/,i=/^(\d{1,})-(\d{2})-(\d{2})( BC)?$/,s=/([Z+-])(\d{2})?:?(\d{2})?:?(\d{2})?/,n=/^-?infinity$/;function o(e){var t=i.exec(e);if(t){var r=parseInt(t[1],10);t[4]&&(r=l(r));var s=new Date(r,parseInt(t[2],10)-1,t[3]);return h(r)&&s.setFullYear(r),s}}function a(e){if(e.endsWith("+00"))return 0;var t=s.exec(e.split(" ")[1]);if(t){var r=t[1];return"Z"===r?0:(3600*parseInt(t[2],10)+60*parseInt(t[3]||0,10)+parseInt(t[4]||0,10))*("-"===r?-1:1)*1e3}}function l(e){return-(e-1)}function h(e){return e>=0&&e<100}t.exports=d(function(e){if(n.test(e))return Number(e.replace("i","I"));var t=r.exec(e);if(!t)return o(e)||null;var i=!!t[8],s=parseInt(t[1],10);i&&(s=l(s));var u=parseInt(t[2],10)-1,c=t[3],f=parseInt(t[4],10),d=parseInt(t[5],10),p=parseInt(t[6],10),g=t[7];g=g?1e3*parseFloat(g):0;var m,y=a(e);return null!=y?(m=new Date(Date.UTC(s,u,c,f,d,p,g)),h(s)&&m.setUTCFullYear(s),0!==y&&m.setTime(m.getTime()-y)):(m=new Date(s,u,c,f,d,p,g),h(s)&&m.setFullYear(s)),m},"parseDate"),d(o,"getDate"),d(a,"timeZoneOffset"),d(l,"bcYearToNegativeYear"),d(h,"is0To99")}),U=g((e,t)=>{x(),t.exports=i;var r=Object.prototype.hasOwnProperty;function i(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)r.call(i,s)&&(e[s]=i[s])}return e}d(i,"extend")}),F=g((e,t)=>{x();var r=U();function i(e){if(!(this instanceof i))return new i(e);r(this,p(e))}t.exports=i,d(i,"PostgresInterval");var s=["seconds","minutes","hours","days","months","years"];i.prototype.toPostgres=function(){var e=s.filter(this.hasOwnProperty,this);return this.milliseconds&&0>e.indexOf("seconds")&&e.push("seconds"),0===e.length?"0":e.map(function(e){var t=this[e]||0;return"seconds"===e&&this.milliseconds&&(t=(t+this.milliseconds/1e3).toFixed(6).replace(/\.?0+$/,"")),t+" "+e},this).join(" ")};var n={years:"Y",months:"M",days:"D",hours:"H",minutes:"M",seconds:"S"},o=["years","months","days"],a=["hours","minutes","seconds"];i.prototype.toISOString=i.prototype.toISO=function(){return"P"+o.map(e,this).join("")+"T"+a.map(e,this).join("");function e(e){var t=this[e]||0;return"seconds"===e&&this.milliseconds&&(t=(t+this.milliseconds/1e3).toFixed(6).replace(/0+$/,"")),t+n[e]}};var l="([+-]?\\d+)",h=new RegExp([l+"\\s+years?",l+"\\s+mons?",l+"\\s+days?","([+-])?([\\d]*):(\\d\\d):(\\d\\d)\\.?(\\d{1,6})?"].map(function(e){return"("+e+")?"}).join("\\s*")),u={years:2,months:4,days:6,hours:9,minutes:10,seconds:11,milliseconds:12},c=["hours","minutes","seconds","milliseconds"];function f(e){return parseInt(e+"000000".slice(e.length),10)/1e3}function p(e){if(!e)return{};var t=h.exec(e),r="-"===t[8];return Object.keys(u).reduce(function(e,i){var s=t[u[i]];return s&&(s="milliseconds"===i?f(s):parseInt(s,10))&&(r&&~c.indexOf(i)&&(s*=-1),e[i]=s),e},{})}d(f,"parseMilliseconds"),d(p,"parse")}),z=g((e,t)=>{x(),t.exports=d(function(e){if(/^\\x/.test(e))return new s(e.substr(2),"hex");for(var t="",r=0;r<e.length;)if("\\"!==e[r])t+=e[r],++r;else if(/[0-7]{3}/.test(e.substr(r+1,3)))t+=String.fromCharCode(parseInt(e.substr(r+1,3),8)),r+=4;else{for(var i=1;r+i<e.length&&"\\"===e[r+i];)i++;for(var n=0;n<Math.floor(i/2);++n)t+="\\";r+=2*Math.floor(i/2)}return new s(t,"binary")},"parseBytea")}),H=g((e,t)=>{x();var r=q(),i=Q(),s=j(),n=F(),o=z();function a(e){return d(function(t){return null===t?t:e(t)},"nullAllowed")}function l(e){return null===e?e:"TRUE"===e||"t"===e||"true"===e||"y"===e||"yes"===e||"on"===e||"1"===e}function h(e){return e?r.parse(e,l):null}function u(e){return parseInt(e,10)}function c(e){return e?r.parse(e,a(u)):null}function f(e){return e?r.parse(e,a(function(e){return S(e).trim()})):null}d(a,"allowNull"),d(l,"parseBool"),d(h,"parseBoolArray"),d(u,"parseBaseTenInt"),d(c,"parseIntegerArray"),d(f,"parseBigIntegerArray");var p=d(function(e){return e?i.create(e,function(e){return null!==e&&(e=E(e)),e}).parse():null},"parsePointArray"),g=d(function(e){return e?i.create(e,function(e){return null!==e&&(e=parseFloat(e)),e}).parse():null},"parseFloatArray"),m=d(function(e){return e?i.create(e).parse():null},"parseStringArray"),y=d(function(e){return e?i.create(e,function(e){return null!==e&&(e=s(e)),e}).parse():null},"parseDateArray"),b=d(function(e){return e?i.create(e,function(e){return null!==e&&(e=n(e)),e}).parse():null},"parseIntervalArray"),v=d(function(e){return e?r.parse(e,a(o)):null},"parseByteAArray"),w=d(function(e){return parseInt(e,10)},"parseInteger"),S=d(function(e){var t=String(e);return/^\d+$/.test(t)?t:e},"parseBigInteger"),_=d(function(e){return e?r.parse(e,a(JSON.parse)):null},"parseJsonArray"),E=d(function(e){return"("!==e[0]?null:{x:parseFloat((e=e.substring(1,e.length-1).split(","))[0]),y:parseFloat(e[1])}},"parsePoint"),C=d(function(e){if("<"!==e[0]&&"("!==e[1])return null;for(var t="(",r="",i=!1,s=2;s<e.length-1;s++){if(i||(t+=e[s]),")"===e[s]){i=!0;continue}i&&","!==e[s]&&(r+=e[s])}var n=E(t);return n.radius=parseFloat(r),n},"parseCircle"),A=d(function(e){e(20,S),e(21,w),e(23,w),e(26,w),e(700,parseFloat),e(701,parseFloat),e(16,l),e(1082,s),e(1114,s),e(1184,s),e(600,E),e(651,m),e(718,C),e(1e3,h),e(1001,v),e(1005,c),e(1007,c),e(1028,c),e(1016,f),e(1017,p),e(1021,g),e(1022,g),e(1231,g),e(1014,m),e(1015,m),e(1008,m),e(1009,m),e(1040,m),e(1041,m),e(1115,y),e(1182,y),e(1185,y),e(1186,n),e(1187,b),e(17,o),e(114,JSON.parse.bind(JSON)),e(3802,JSON.parse.bind(JSON)),e(199,_),e(3807,_),e(3907,m),e(2951,m),e(791,m),e(1183,m),e(1270,m)},"init");t.exports={init:A}}),W=g((e,t)=>{function r(e){var t=e.readInt32BE(0),r=e.readUInt32BE(4),i="";t<0&&(t=~t+(0===r),r=~r+1>>>0,i="-");var s,n,o,a,l,h,u="";if(s=t%1e6,t=t/1e6>>>0,r=(n=4294967296*s+r)/1e6>>>0,o=""+(n-1e6*r),0===r&&0===t)return i+o+u;for(a="",l=6-o.length,h=0;h<l;h++)a+="0";if(u=a+o+u,s=t%1e6,t=t/1e6>>>0,r=(n=4294967296*s+r)/1e6>>>0,o=""+(n-1e6*r),0===r&&0===t)return i+o+u;for(a="",l=6-o.length,h=0;h<l;h++)a+="0";if(u=a+o+u,s=t%1e6,t=t/1e6>>>0,r=(n=4294967296*s+r)/1e6>>>0,o=""+(n-1e6*r),0===r&&0===t)return i+o+u;for(a="",l=6-o.length,h=0;h<l;h++)a+="0";return u=a+o+u,i+(o=""+(n=4294967296*(s=t%1e6)+r)%1e6)+u}x(),d(r,"readInt8"),t.exports=r}),V=g((e,t)=>{x();var r=W(),i=d(function(e,t,r,i,s){r=r||0,i=i||!1,s=s||function(e,t,r){return e*Math.pow(2,r)+t};var n=r>>3,o=d(function(e){return i?255&~e:e},"inv"),a=255,l=8-r%8;t<l&&(a=255<<8-t&255,l=t),r&&(a>>=r%8);var h=0;r%8+t>=8&&(h=s(0,o(e[n])&a,l));for(var u=t+r>>3,c=n+1;c<u;c++)h=s(h,o(e[c]),8);var f=(t+r)%8;return f>0&&(h=s(h,o(e[u])>>8-f,f)),h},"parseBits"),s=d(function(e,t,r){var s=Math.pow(2,r-1)-1,n=i(e,1),o=i(e,r,1);if(0===o)return 0;var a=1,l=i(e,t,r+1,!1,d(function(e,t,r){0===e&&(e=1);for(var i=1;i<=r;i++)a/=2,(t&1<<r-i)>0&&(e+=a);return e},"parsePrecisionBits"));return o==Math.pow(2,r+1)-1?0===l?0===n?1/0:-1/0:NaN:(0===n?1:-1)*Math.pow(2,o-s)*l},"parseFloatFromBits"),n=d(function(e){return 1==i(e,1)?-1*(i(e,15,1,!0)+1):i(e,15,1)},"parseInt16"),o=d(function(e){return 1==i(e,1)?-1*(i(e,31,1,!0)+1):i(e,31,1)},"parseInt32"),a=d(function(e){return s(e,23,8)},"parseFloat32"),l=d(function(e){return s(e,52,11)},"parseFloat64"),h=d(function(e){var t=i(e,16,32);if(49152==t)return NaN;for(var r=Math.pow(1e4,i(e,16,16)),s=0,n=i(e,16),o=0;o<n;o++)s+=i(e,16,64+16*o)*r,r/=1e4;var a=Math.pow(10,i(e,16,48));return(0===t?1:-1)*Math.round(s*a)/a},"parseNumeric"),u=d(function(e,t){var r=i(t,1),s=i(t,63,1),n=new Date((0===r?1:-1)*s/1e3+9466848e5);return e||n.setTime(n.getTime()+6e4*n.getTimezoneOffset()),n.usec=s%1e3,n.getMicroSeconds=function(){return this.usec},n.setMicroSeconds=function(e){this.usec=e},n.getUTCMicroSeconds=function(){return this.usec},n},"parseDate"),c=d(function(e){for(var t=i(e,32),r=(i(e,32,32),i(e,32,64)),s=96,n=[],o=0;o<t;o++)n[o]=i(e,32,s),s+=64;var a=d(function(t){var r,n=i(e,32,s);return(s+=32,4294967295==n)?null:23==t||20==t?(r=i(e,8*n,s),s+=8*n,r):25==t?e.toString(this.encoding,s>>3,(s+=n<<3)>>3):void console.log("ERROR: ElementType not implemented: "+t)},"parseElement"),l=d(function(e,t){var r,i=[];if(e.length>1){var s=e.shift();for(r=0;r<s;r++)i[r]=l(e,t);e.unshift(s)}else for(r=0;r<e[0];r++)i[r]=a(t);return i},"parse");return l(n,r)},"parseArray"),f=d(function(e){return e.toString("utf8")},"parseText"),p=d(function(e){return null===e?null:i(e,8)>0},"parseBool"),g=d(function(e){e(20,r),e(21,n),e(23,o),e(26,o),e(1700,h),e(700,a),e(701,l),e(16,p),e(1114,u.bind(null,!1)),e(1184,u.bind(null,!0)),e(1e3,c),e(1007,c),e(1016,c),e(1008,c),e(1009,c),e(25,f)},"init");t.exports={init:g}}),K=g((e,t)=>{x(),t.exports={BOOL:16,BYTEA:17,CHAR:18,INT8:20,INT2:21,INT4:23,REGPROC:24,TEXT:25,OID:26,TID:27,XID:28,CID:29,JSON:114,XML:142,PG_NODE_TREE:194,SMGR:210,PATH:602,POLYGON:604,CIDR:650,FLOAT4:700,FLOAT8:701,ABSTIME:702,RELTIME:703,TINTERVAL:704,CIRCLE:718,MACADDR8:774,MONEY:790,MACADDR:829,INET:869,ACLITEM:1033,BPCHAR:1042,VARCHAR:1043,DATE:1082,TIME:1083,TIMESTAMP:1114,TIMESTAMPTZ:1184,INTERVAL:1186,TIMETZ:1266,BIT:1560,VARBIT:1562,NUMERIC:1700,REFCURSOR:1790,REGPROCEDURE:2202,REGOPER:2203,REGOPERATOR:2204,REGCLASS:2205,REGTYPE:2206,UUID:2950,TXID_SNAPSHOT:2970,PG_LSN:3220,PG_NDISTINCT:3361,PG_DEPENDENCIES:3402,TSVECTOR:3614,TSQUERY:3615,GTSVECTOR:3642,REGCONFIG:3734,REGDICTIONARY:3769,JSONB:3802,REGNAMESPACE:4089,REGROLE:4096}}),G=g(e=>{x();var t=H(),r=V(),i=Q(),s=K();e.getTypeParser=a,e.setTypeParser=l,e.arrayParser=i,e.builtins=s;var n={text:{},binary:{}};function o(e){return String(e)}function a(e,t){return n[t=t||"text"]&&n[t][e]||o}function l(e,t,r){"function"==typeof t&&(r=t,t="text"),n[t][e]=r}d(o,"noParse"),d(a,"getTypeParser"),d(l,"setTypeParser"),t.init(function(e,t){n.text[e]=t}),r.init(function(e,t){n.binary[e]=t})}),J=g((e,t)=>{x(),t.exports={host:"localhost",user:"win32"===n.platform?n.env.USERNAME:n.env.USER,database:void 0,password:null,connectionString:void 0,port:5432,rows:0,binary:!1,max:10,idleTimeoutMillis:3e4,client_encoding:"",ssl:!1,application_name:void 0,fallback_application_name:void 0,options:void 0,parseInputDatesAsUTC:!1,statement_timeout:!1,lock_timeout:!1,idle_in_transaction_session_timeout:!1,query_timeout:!1,connect_timeout:0,keepalives:1,keepalives_idle:0};var r=G(),i=r.getTypeParser(20,"text"),s=r.getTypeParser(1016,"text");t.exports.__defineSetter__("parseInt8",function(e){r.setTypeParser(20,"text",e?r.getTypeParser(23,"text"):i),r.setTypeParser(1016,"text",e?r.getTypeParser(1007,"text"):s)})}),Y=g((e,t)=>{x();var r=($(),v(M)),i=J();function n(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'}function o(e){for(var t="{",r=0;r<e.length;r++)r>0&&(t+=","),null===e[r]||typeof e[r]>"u"?t+="NULL":Array.isArray(e[r])?t+=o(e[r]):e[r]instanceof s?t+="\\\\x"+e[r].toString("hex"):t+=n(a(e[r]));return t+"}"}d(n,"escapeElement"),d(o,"arrayString");var a=d(function(e,t){if(null==e)return null;if(e instanceof s)return e;if(ArrayBuffer.isView(e)){var r=s.from(e.buffer,e.byteOffset,e.byteLength);return r.length===e.byteLength?r:r.slice(e.byteOffset,e.byteOffset+e.byteLength)}return e instanceof Date?i.parseInputDatesAsUTC?c(e):u(e):Array.isArray(e)?o(e):"object"==typeof e?l(e,t):e.toString()},"prepareValue");function l(e,t){if(e&&"function"==typeof e.toPostgres){if(-1!==(t=t||[]).indexOf(e))throw Error('circular reference detected while preparing "'+e+'" for query');return t.push(e),a(e.toPostgres(a),t)}return JSON.stringify(e)}function h(e,t){for(e=""+e;e.length<t;)e="0"+e;return e}function u(e){var t=-e.getTimezoneOffset(),r=e.getFullYear(),i=r<1;i&&(r=Math.abs(r)+1);var s=h(r,4)+"-"+h(e.getMonth()+1,2)+"-"+h(e.getDate(),2)+"T"+h(e.getHours(),2)+":"+h(e.getMinutes(),2)+":"+h(e.getSeconds(),2)+"."+h(e.getMilliseconds(),3);return t<0?(s+="-",t*=-1):s+="+",s+=h(Math.floor(t/60),2)+":"+h(t%60,2),i&&(s+=" BC"),s}function c(e){var t=e.getUTCFullYear(),r=t<1;r&&(t=Math.abs(t)+1);var i=h(t,4)+"-"+h(e.getUTCMonth()+1,2)+"-"+h(e.getUTCDate(),2)+"T"+h(e.getUTCHours(),2)+":"+h(e.getUTCMinutes(),2)+":"+h(e.getUTCSeconds(),2)+"."+h(e.getUTCMilliseconds(),3);return i+="+00:00",r&&(i+=" BC"),i}function f(e,t,r){return e="string"==typeof e?{text:e}:e,t&&("function"==typeof t?e.callback=t:e.values=t),r&&(e.callback=r),e}d(l,"prepareObject"),d(h,"pad"),d(u,"dateToString"),d(c,"dateToStringUTC"),d(f,"normalizeQueryConfig");var p=d(function(e){return r.createHash("md5").update(e,"utf-8").digest("hex")},"md5"),g=d(function(e,t,r){var i=p(t+e);return"md5"+p(s.concat([s.from(i),r]))},"postgresMd5PasswordHash");t.exports={prepareValue:d(function(e){return a(e)},"prepareValueWrapper"),normalizeQueryConfig:f,postgresMd5PasswordHash:g,md5:p}}),X=g((e,t)=>{x();var r=($(),v(M));function i(e){if(-1===e.indexOf("SCRAM-SHA-256"))throw Error("SASL: Only mechanism SCRAM-SHA-256 is currently supported");let t=r.randomBytes(18).toString("base64");return{mechanism:"SCRAM-SHA-256",clientNonce:t,response:"n,,n=*,r="+t,message:"SASLInitialResponse"}}function n(e,t,r){if("SASLInitialResponse"!==e.message)throw Error("SASL: Last message was not SASLInitialResponse");if("string"!=typeof t)throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a string");if("string"!=typeof r)throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: serverData must be a string");let i=u(r);if(i.nonce.startsWith(e.clientNonce)){if(i.nonce.length===e.clientNonce.length)throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce is too short")}else throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce does not start with client nonce");var n=m(t,s.from(i.salt,"base64"),i.iteration),o=g(n,"Client Key"),a=p(o),l="n=*,r="+e.clientNonce,h="r="+i.nonce+",s="+i.salt+",i="+i.iteration,c="c=biws,r="+i.nonce,d=l+","+h+","+c,y=f(o,g(a,d)).toString("base64"),b=g(n,"Server Key"),v=g(b,d);e.message="SASLResponse",e.serverSignature=v.toString("base64"),e.response=c+",p="+y}function o(e,t){if("SASLResponse"!==e.message)throw Error("SASL: Last message was not SASLResponse");if("string"!=typeof t)throw Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: serverData must be a string");let{serverSignature:r}=c(t);if(r!==e.serverSignature)throw Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature does not match")}function a(e){if("string"!=typeof e)throw TypeError("SASL: text must be a string");return e.split("").map((t,r)=>e.charCodeAt(r)).every(e=>e>=33&&e<=43||e>=45&&e<=126)}function l(e){return/^(?:[a-zA-Z0-9+/]{4})*(?:[a-zA-Z0-9+/]{2}==|[a-zA-Z0-9+/]{3}=)?$/.test(e)}function h(e){if("string"!=typeof e)throw TypeError("SASL: attribute pairs text must be a string");return new Map(e.split(",").map(e=>{if(!/^.=/.test(e))throw Error("SASL: Invalid attribute pair entry");return[e[0],e.substring(2)]}))}function u(e){let t=h(e),r=t.get("r");if(r){if(!a(r))throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce must only contain printable characters")}else throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce missing");let i=t.get("s");if(i){if(!l(i))throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt must be base64")}else throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt missing");let s=t.get("i");if(s){if(!/^[1-9][0-9]*$/.test(s))throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: invalid iteration count")}else throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: iteration missing");return{nonce:r,salt:i,iteration:parseInt(s,10)}}function c(e){let t=h(e).get("v");if(t){if(!l(t))throw Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature must be base64")}else throw Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature is missing");return{serverSignature:t}}function f(e,t){if(!s.isBuffer(e))throw TypeError("first argument must be a Buffer");if(!s.isBuffer(t))throw TypeError("second argument must be a Buffer");if(e.length!==t.length)throw Error("Buffer lengths must match");if(0===e.length)throw Error("Buffers cannot be empty");return s.from(e.map((r,i)=>e[i]^t[i]))}function p(e){return r.createHash("sha256").update(e).digest()}function g(e,t){return r.createHmac("sha256",e).update(t).digest()}function m(e,t,r){for(var i=g(e,s.concat([t,s.from([0,0,0,1])])),n=i,o=0;o<r-1;o++)n=f(n,i=g(e,i));return n}d(i,"startSession"),d(n,"continueSession"),d(o,"finalizeSession"),d(a,"isPrintableChars"),d(l,"isBase64"),d(h,"parseAttributePairs"),d(u,"parseServerFirstMessage"),d(c,"parseServerFinalMessage"),d(f,"xorBuffers"),d(p,"sha256"),d(g,"hmacSha256"),d(m,"Hi"),t.exports={startSession:i,continueSession:n,finalizeSession:o}}),Z={};function ee(...e){return e.join("/")}m(Z,{join:()=>ee});var et=p(()=>{x(),d(ee,"join")}),er={};function ei(e,t){t(Error("No filesystem"))}m(er,{stat:()=>ei});var es=p(()=>{x(),d(ei,"stat")}),en={};m(en,{default:()=>eo});var eo,ea=p(()=>{x(),eo={}}),el={};m(el,{StringDecoder:()=>eu});var eh,eu,ec=p(()=>{x(),d(eh=class{constructor(e){w(this,"td"),this.td=new TextDecoder(e)}write(e){return this.td.decode(e,{stream:!0})}end(e){return this.td.decode(e)}},"StringDecoder"),eu=eh}),ef=g((e,t)=>{x();var{Transform:r}=(ea(),v(en)),{StringDecoder:i}=(ec(),v(el)),s=Symbol("last"),n=Symbol("decoder");function o(e,t,r){let i;if(this.overflow){if(1===(i=this[n].write(e).split(this.matcher)).length)return r();i.shift(),this.overflow=!1}else this[s]+=this[n].write(e),i=this[s].split(this.matcher);this[s]=i.pop();for(let e=0;e<i.length;e++)try{l(this,this.mapper(i[e]))}catch(e){return r(e)}if(this.overflow=this[s].length>this.maxLength,this.overflow&&!this.skipOverflow){r(Error("maximum buffer reached"));return}r()}function a(e){if(this[s]+=this[n].end(),this[s])try{l(this,this.mapper(this[s]))}catch(t){return e(t)}e()}function l(e,t){void 0!==t&&e.push(t)}function h(e){return e}function u(e,t,l){switch(e=e||/\r?\n/,t=t||h,l=l||{},arguments.length){case 1:"function"==typeof e?(t=e,e=/\r?\n/):"object"!=typeof e||e instanceof RegExp||e[Symbol.split]||(l=e,e=/\r?\n/);break;case 2:"function"==typeof e?(l=t,t=e,e=/\r?\n/):"object"==typeof t&&(l=t,t=h)}(l=Object.assign({},l)).autoDestroy=!0,l.transform=o,l.flush=a,l.readableObjectMode=!0;let u=new r(l);return u[s]="",u[n]=new i("utf8"),u.matcher=e,u.mapper=t,u.maxLength=l.maxLength,u.skipOverflow=l.skipOverflow||!1,u.overflow=!1,u._destroy=function(e,t){this._writableState.errorEmitted=!1,t(e)},u}d(o,"transform"),d(a,"flush"),d(l,"push"),d(h,"noop"),d(u,"split"),t.exports=u}),ed=g((e,t)=>{x();var r=(et(),v(Z)),i=(ea(),v(en)).Stream,s=ef(),o=(T(),v(A)),a="win32"===n.platform,l=n.stderr;function h(e){return(61440&e)==32768}d(h,"isRegFile");var u=["host","port","database","user","password"],c=u.length,f=u[c-1];function p(){if(l instanceof i&&!0===l.writable){var e=Array.prototype.slice.call(arguments).concat(`
`);l.write(o.format.apply(o,e))}}d(p,"warn"),Object.defineProperty(t.exports,"isWin",{get:function(){return a},set:function(e){a=e}}),t.exports.warnTo=function(e){var t=l;return l=e,t},t.exports.getFileName=function(e){var t=e||n.env;return t.PGPASSFILE||(a?r.join(t.APPDATA||"./","postgresql","pgpass.conf"):r.join(t.HOME||"./",".pgpass"))},t.exports.usePgPass=function(e,t){return!Object.prototype.hasOwnProperty.call(n.env,"PGPASSWORD")&&(!!a||(t=t||"<unkn>",h(e.mode)?!(63&e.mode)||(p('WARNING: password file "%s" has group or world access; permissions should be u=rw (0600) or less',t),!1):(p('WARNING: password file "%s" is not a plain file',t),!1)))};var g=t.exports.match=function(e,t){return u.slice(0,-1).reduce(function(r,i,s){return 1==s&&Number(e[i]||5432)===Number(t[i])?r&&!0:r&&("*"===t[i]||t[i]===e[i])},!0)};t.exports.getPassword=function(e,t,r){var i,n=t.pipe(s());function o(t){var r=m(t);r&&y(r)&&g(e,r)&&(i=r[f],n.end())}d(o,"onLine");var a=d(function(){t.destroy(),r(i)},"onEnd"),l=d(function(e){t.destroy(),p("WARNING: error on reading file: %s",e),r(void 0)},"onErr");t.on("error",l),n.on("data",o).on("end",a).on("error",l)};var m=t.exports.parseLine=function(e){if(e.length<11||e.match(/^\s+#/))return null;for(var t="",r="",i=0,s=0,o={},a=d(function(t,r,i){var s=e.substring(r,i);Object.hasOwnProperty.call(n.env,"PGPASS_NO_DEESCAPE")||(s=s.replace(/\\([:\\])/g,"$1")),o[u[t]]=s},"addToObj"),l=0;l<e.length-1;l+=1){if(t=e.charAt(l+1),r=e.charAt(l),i==c-1){a(i,s);break}l>=0&&":"==t&&"\\"!==r&&(a(i,s,l+1),s=l+2,i+=1)}return o=Object.keys(o).length===c?o:null},y=t.exports.isValidEntry=function(e){for(var t={0:function(e){return e.length>0},1:function(e){return"*"===e||isFinite(e=Number(e))&&e>0&&e<9007199254740992&&Math.floor(e)===e},2:function(e){return e.length>0},3:function(e){return e.length>0},4:function(e){return e.length>0}},r=0;r<u.length;r+=1)if(!(0,t[r])(e[u[r]]||""))return!1;return!0}}),ep=g((e,t)=>{x(),et(),v(Z);var r=(es(),v(er)),i=ed();t.exports=function(e,t){var s=i.getFileName();r.stat(s,function(n,o){if(n||!i.usePgPass(o,s))return t(void 0);var a=r.createReadStream(s);i.getPassword(e,a,t)})},t.exports.warnTo=i.warnTo}),eg=g((e,t)=>{x();var r=G();function i(e){this._types=e||r,this.text={},this.binary={}}d(i,"TypeOverrides"),i.prototype.getOverrides=function(e){switch(e){case"text":return this.text;case"binary":return this.binary;default:return{}}},i.prototype.setTypeParser=function(e,t,r){"function"==typeof t&&(r=t,t="text"),this.getOverrides(t)[e]=r},i.prototype.getTypeParser=function(e,t){return t=t||"text",this.getOverrides(t)[e]||this._types.getTypeParser(e,t)},t.exports=i}),em={};m(em,{default:()=>ey});var ey,eb=p(()=>{x(),ey={}}),ev={};function ew(e,t=!1){let{protocol:r}=new URL(e),i="http:"+e.substring(r.length),{username:s,password:n,host:o,hostname:a,port:l,pathname:h,search:u,searchParams:c,hash:f}=new URL(i),d=s+":"+(n=decodeURIComponent(n)),p=t?Object.fromEntries(c.entries()):u;return{href:e,protocol:r,auth:d,username:s,password:n,host:o,hostname:a,port:l,pathname:h,search:u,query:p,hash:f}}m(ev,{parse:()=>ew});var eS=p(()=>{x(),d(ew,"parse")}),e_=g((e,t)=>{x();var r=(eS(),v(ev)),i=(es(),v(er));function s(e){if("/"===e.charAt(0)){var t=e.split(" ");return{host:t[0],database:t[1]}}var s=r.parse(/ |%[^a-f0-9]|%[a-f0-9][^a-f0-9]/i.test(e)?encodeURI(e).replace(/\%25(\d\d)/g,"%$1"):e,!0),t=s.query;for(var n in t)Array.isArray(t[n])&&(t[n]=t[n][t[n].length-1]);var o=(s.auth||":").split(":");if(t.user=o[0],t.password=o.splice(1).join(":"),t.port=s.port,"socket:"==s.protocol)return t.host=decodeURI(s.pathname),t.database=s.query.db,t.client_encoding=s.query.encoding,t;t.host||(t.host=s.hostname);var a=s.pathname;if(!t.host&&a&&/^%2f/i.test(a)){var l=a.split("/");t.host=decodeURIComponent(l[0]),a=l.splice(1).join("/")}switch(a&&"/"===a.charAt(0)&&(a=a.slice(1)||null),t.database=a&&decodeURI(a),("true"===t.ssl||"1"===t.ssl)&&(t.ssl=!0),"0"===t.ssl&&(t.ssl=!1),(t.sslcert||t.sslkey||t.sslrootcert||t.sslmode)&&(t.ssl={}),t.sslcert&&(t.ssl.cert=i.readFileSync(t.sslcert).toString()),t.sslkey&&(t.ssl.key=i.readFileSync(t.sslkey).toString()),t.sslrootcert&&(t.ssl.ca=i.readFileSync(t.sslrootcert).toString()),t.sslmode){case"disable":t.ssl=!1;break;case"prefer":case"require":case"verify-ca":case"verify-full":break;case"no-verify":t.ssl.rejectUnauthorized=!1}return t}d(s,"parse"),t.exports=s,s.parse=s}),eE=g((e,t)=>{x();var r=(eb(),v(em)),i=J(),s=e_().parse,o=d(function(e,t,r){return void 0===r?r=n.env["PG"+e.toUpperCase()]:!1===r||(r=n.env[r]),t[e]||r||i[e]},"val"),a=d(function(){switch(n.env.PGSSLMODE){case"disable":return!1;case"prefer":case"require":case"verify-ca":case"verify-full":return!0;case"no-verify":return{rejectUnauthorized:!1}}return i.ssl},"readSSLConfigFromEnvironment"),l=d(function(e){return"'"+(""+e).replace(/\\/g,"\\\\").replace(/'/g,"\\'")+"'"},"quoteParamValue"),h=d(function(e,t,r){var i=t[r];null!=i&&e.push(r+"="+l(i))},"add"),u=class{constructor(e){(e="string"==typeof e?s(e):e||{}).connectionString&&(e=Object.assign({},e,s(e.connectionString))),this.user=o("user",e),this.database=o("database",e),void 0===this.database&&(this.database=this.user),this.port=parseInt(o("port",e),10),this.host=o("host",e),Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:o("password",e)}),this.binary=o("binary",e),this.options=o("options",e),this.ssl=typeof e.ssl>"u"?a():e.ssl,"string"==typeof this.ssl&&"true"===this.ssl&&(this.ssl=!0),"no-verify"===this.ssl&&(this.ssl={rejectUnauthorized:!1}),this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this.client_encoding=o("client_encoding",e),this.replication=o("replication",e),this.isDomainSocket=!(this.host||"").indexOf("/"),this.application_name=o("application_name",e,"PGAPPNAME"),this.fallback_application_name=o("fallback_application_name",e,!1),this.statement_timeout=o("statement_timeout",e,!1),this.lock_timeout=o("lock_timeout",e,!1),this.idle_in_transaction_session_timeout=o("idle_in_transaction_session_timeout",e,!1),this.query_timeout=o("query_timeout",e,!1),void 0===e.connectionTimeoutMillis?this.connect_timeout=n.env.PGCONNECT_TIMEOUT||0:this.connect_timeout=Math.floor(e.connectionTimeoutMillis/1e3),!1===e.keepAlive?this.keepalives=0:!0===e.keepAlive&&(this.keepalives=1),"number"==typeof e.keepAliveInitialDelayMillis&&(this.keepalives_idle=Math.floor(e.keepAliveInitialDelayMillis/1e3))}getLibpqConnectionString(e){var t=[];h(t,this,"user"),h(t,this,"password"),h(t,this,"port"),h(t,this,"application_name"),h(t,this,"fallback_application_name"),h(t,this,"connect_timeout"),h(t,this,"options");var i="object"==typeof this.ssl?this.ssl:this.ssl?{sslmode:this.ssl}:{};if(h(t,i,"sslmode"),h(t,i,"sslca"),h(t,i,"sslkey"),h(t,i,"sslcert"),h(t,i,"sslrootcert"),this.database&&t.push("dbname="+l(this.database)),this.replication&&t.push("replication="+l(this.replication)),this.host&&t.push("host="+l(this.host)),this.isDomainSocket)return e(null,t.join(" "));this.client_encoding&&t.push("client_encoding="+l(this.client_encoding)),r.lookup(this.host,function(r,i){return r?e(r,null):(t.push("hostaddr="+l(i)),e(null,t.join(" ")))})}};d(u,"ConnectionParameters"),t.exports=u}),ex=g((e,t)=>{x();var r=G(),i=/^([A-Za-z]+)(?: (\d+))?(?: (\d+))?/,s=class{constructor(e,t){this.command=null,this.rowCount=null,this.oid=null,this.rows=[],this.fields=[],this._parsers=void 0,this._types=t,this.RowCtor=null,this.rowAsArray="array"===e,this.rowAsArray&&(this.parseRow=this._parseRowAsArray)}addCommandComplete(e){var t;(t=e.text?i.exec(e.text):i.exec(e.command))&&(this.command=t[1],t[3]?(this.oid=parseInt(t[2],10),this.rowCount=parseInt(t[3],10)):t[2]&&(this.rowCount=parseInt(t[2],10)))}_parseRowAsArray(e){for(var t=Array(e.length),r=0,i=e.length;r<i;r++){var s=e[r];null!==s?t[r]=this._parsers[r](s):t[r]=null}return t}parseRow(e){for(var t={},r=0,i=e.length;r<i;r++){var s=e[r],n=this.fields[r].name;null!==s?t[n]=this._parsers[r](s):t[n]=null}return t}addRow(e){this.rows.push(e)}addFields(e){this.fields=e,this.fields.length&&(this._parsers=Array(e.length));for(var t=0;t<e.length;t++){var i=e[t];this._types?this._parsers[t]=this._types.getTypeParser(i.dataTypeID,i.format||"text"):this._parsers[t]=r.getTypeParser(i.dataTypeID,i.format||"text")}}};d(s,"Result"),t.exports=s}),eC=g((e,t)=>{x();var{EventEmitter:r}=C(),i=ex(),s=Y(),o=class extends r{constructor(e,t,r){super(),e=s.normalizeQueryConfig(e,t,r),this.text=e.text,this.values=e.values,this.rows=e.rows,this.types=e.types,this.name=e.name,this.binary=e.binary,this.portal=e.portal||"",this.callback=e.callback,this._rowMode=e.rowMode,n.domain&&e.callback&&(this.callback=n.domain.bind(e.callback)),this._result=new i(this._rowMode,this.types),this._results=this._result,this.isPreparedStatement=!1,this._canceledDueToError=!1,this._promise=null}requiresPreparation(){return!!this.name||!!this.rows||!!this.text&&!!this.values&&this.values.length>0}_checkForMultirow(){this._result.command&&(Array.isArray(this._results)||(this._results=[this._result]),this._result=new i(this._rowMode,this.types),this._results.push(this._result))}handleRowDescription(e){this._checkForMultirow(),this._result.addFields(e.fields),this._accumulateRows=this.callback||!this.listeners("row").length}handleDataRow(e){let t;if(!this._canceledDueToError){try{t=this._result.parseRow(e.fields)}catch(e){this._canceledDueToError=e;return}this.emit("row",t,this._result),this._accumulateRows&&this._result.addRow(t)}}handleCommandComplete(e,t){this._checkForMultirow(),this._result.addCommandComplete(e),this.rows&&t.sync()}handleEmptyQuery(e){this.rows&&e.sync()}handleError(e,t){if(this._canceledDueToError&&(e=this._canceledDueToError,this._canceledDueToError=!1),this.callback)return this.callback(e);this.emit("error",e)}handleReadyForQuery(e){if(this._canceledDueToError)return this.handleError(this._canceledDueToError,e);if(this.callback)try{this.callback(null,this._results)}catch(e){n.nextTick(()=>{throw e})}this.emit("end",this._results)}submit(e){if("string"!=typeof this.text&&"string"!=typeof this.name)return Error("A query must have either text or a name. Supplying neither is unsupported.");let t=e.parsedStatements[this.name];return this.text&&t&&this.text!==t?Error(`Prepared statements must be \
unique - '${this.name}' was used for a different statement`):this.values&&!Array.isArray(this.values)?Error("Query values must be an array"):(this.requiresPreparation()?this.prepare(e):e.query(this.text),null)}hasBeenParsed(e){return this.name&&e.parsedStatements[this.name]}handlePortalSuspended(e){this._getRows(e,this.rows)}_getRows(e,t){e.execute({portal:this.portal,rows:t}),t?e.flush():e.sync()}prepare(e){this.isPreparedStatement=!0,this.hasBeenParsed(e)||e.parse({text:this.text,name:this.name,types:this.types});try{e.bind({portal:this.portal,statement:this.name,values:this.values,binary:this.binary,valueMapper:s.prepareValue})}catch(t){this.handleError(t,e);return}e.describe({type:"P",name:this.portal||""}),this._getRows(e,this.rows)}handleCopyInResponse(e){e.sendCopyFail("No source stream defined")}handleCopyData(e,t){}};d(o,"Query"),t.exports=o}),eA={};function eP(e){return 0}m(eA,{Socket:()=>eI,isIP:()=>eP});var eT,eL,eI,eR=p(()=>{x(),eT=b(C(),1),d(eP,"isIP"),d(eL=class e extends eT.EventEmitter{constructor(){super(...arguments),w(this,"opts",{}),w(this,"connecting",!1),w(this,"pending",!0),w(this,"writable",!0),w(this,"encrypted",!1),w(this,"authorized",!1),w(this,"destroyed",!1),w(this,"ws",null),w(this,"writeBuffer"),w(this,"tlsState",0),w(this,"tlsRead"),w(this,"tlsWrite")}static get poolQueryViaFetch(){return e.opts.poolQueryViaFetch??e.defaults.poolQueryViaFetch}static set poolQueryViaFetch(t){e.opts.poolQueryViaFetch=t}static get fetchEndpoint(){return e.opts.fetchEndpoint??e.defaults.fetchEndpoint}static set fetchEndpoint(t){e.opts.fetchEndpoint=t}static get fetchConnectionCache(){return e.opts.fetchConnectionCache??e.defaults.fetchConnectionCache}static set fetchConnectionCache(t){e.opts.fetchConnectionCache=t}static get fetchFunction(){return e.opts.fetchFunction??e.defaults.fetchFunction}static set fetchFunction(t){e.opts.fetchFunction=t}static get webSocketConstructor(){return e.opts.webSocketConstructor??e.defaults.webSocketConstructor}static set webSocketConstructor(t){e.opts.webSocketConstructor=t}get webSocketConstructor(){return this.opts.webSocketConstructor??e.webSocketConstructor}set webSocketConstructor(e){this.opts.webSocketConstructor=e}static get wsProxy(){return e.opts.wsProxy??e.defaults.wsProxy}static set wsProxy(t){e.opts.wsProxy=t}get wsProxy(){return this.opts.wsProxy??e.wsProxy}set wsProxy(e){this.opts.wsProxy=e}static get coalesceWrites(){return e.opts.coalesceWrites??e.defaults.coalesceWrites}static set coalesceWrites(t){e.opts.coalesceWrites=t}get coalesceWrites(){return this.opts.coalesceWrites??e.coalesceWrites}set coalesceWrites(e){this.opts.coalesceWrites=e}static get useSecureWebSocket(){return e.opts.useSecureWebSocket??e.defaults.useSecureWebSocket}static set useSecureWebSocket(t){e.opts.useSecureWebSocket=t}get useSecureWebSocket(){return this.opts.useSecureWebSocket??e.useSecureWebSocket}set useSecureWebSocket(e){this.opts.useSecureWebSocket=e}static get forceDisablePgSSL(){return e.opts.forceDisablePgSSL??e.defaults.forceDisablePgSSL}static set forceDisablePgSSL(t){e.opts.forceDisablePgSSL=t}get forceDisablePgSSL(){return this.opts.forceDisablePgSSL??e.forceDisablePgSSL}set forceDisablePgSSL(e){this.opts.forceDisablePgSSL=e}static get disableSNI(){return e.opts.disableSNI??e.defaults.disableSNI}static set disableSNI(t){e.opts.disableSNI=t}get disableSNI(){return this.opts.disableSNI??e.disableSNI}set disableSNI(e){this.opts.disableSNI=e}static get pipelineConnect(){return e.opts.pipelineConnect??e.defaults.pipelineConnect}static set pipelineConnect(t){e.opts.pipelineConnect=t}get pipelineConnect(){return this.opts.pipelineConnect??e.pipelineConnect}set pipelineConnect(e){this.opts.pipelineConnect=e}static get subtls(){return e.opts.subtls??e.defaults.subtls}static set subtls(t){e.opts.subtls=t}get subtls(){return this.opts.subtls??e.subtls}set subtls(e){this.opts.subtls=e}static get pipelineTLS(){return e.opts.pipelineTLS??e.defaults.pipelineTLS}static set pipelineTLS(t){e.opts.pipelineTLS=t}get pipelineTLS(){return this.opts.pipelineTLS??e.pipelineTLS}set pipelineTLS(e){this.opts.pipelineTLS=e}static get rootCerts(){return e.opts.rootCerts??e.defaults.rootCerts}static set rootCerts(t){e.opts.rootCerts=t}get rootCerts(){return this.opts.rootCerts??e.rootCerts}set rootCerts(e){this.opts.rootCerts=e}wsProxyAddrForHost(e,t){let r=this.wsProxy;if(void 0===r)throw Error("No WebSocket proxy is configured. Please refer to https://github.com/neondatabase/serverless#run-your-own-websocket-proxy");return"function"==typeof r?r(e,t):`${r}?address=${e}:${t}`}setNoDelay(){return this}setKeepAlive(){return this}ref(){return this}unref(){return this}async connect(e,t,r){let i;this.connecting=!0,r&&this.once("connect",r);try{i=this.wsProxyAddrForHost(t,"string"==typeof e?parseInt(e,10):e)}catch(e){this.emit("error",e),this.emit("close");return}return this.ws=await new Promise(async e=>{try{let t=(this.useSecureWebSocket?"wss:":"ws:")+"//"+i,r;if(void 0!==this.webSocketConstructor)r=new this.webSocketConstructor(t);else try{r=new WebSocket(t)}catch{r=new __unstable_WebSocket(t)}r.addEventListener("open",()=>{e(r)})}catch(t){try{let r=(this.useSecureWebSocket?"https:":"http:")+"//"+i;await fetch(r,{headers:{Upgrade:"websocket"}}).then(r=>{let i=r.webSocket;if(null==i)throw t;i.accept(),e(i)})}catch{this.emit("error",Error("All attempts to open a WebSocket to connect to the database failed. Please refer to https://github.com/neondatabase/serverless#run-on-node")),this.emit("close");return}}}),this.ws.binaryType="arraybuffer",this.ws.addEventListener("error",e=>{this.emit("error",e),this.emit("close")}),this.ws.addEventListener("close",()=>{this.emit("close")}),this.ws.addEventListener("message",e=>{if(0===this.tlsState){let t=s.from(e.data);this.emit("data",t)}}),this.connecting=!1,this.pending=!1,this.emit("connect"),this.emit("ready"),this}async startTls(e){if(void 0===this.subtls)throw Error("For Postgres SSL connections, you must set `neonConfig.subtls` to the subtls library. See https://github.com/neondatabase/serverless/blob/main/CONFIG.md for more information.");this.tlsState=1;let t=this.subtls.TrustedCert.fromPEM(this.rootCerts),r=new this.subtls.WebSocketReadQueue(this.ws),i=r.read.bind(r),s=this.rawWrite.bind(this),[n,o]=await this.subtls.startTls(e,t,i,s,{useSNI:!this.disableSNI,expectPreData:this.pipelineTLS?new Uint8Array([83]):void 0});this.tlsRead=n,this.tlsWrite=o,this.tlsState=2,this.encrypted=!0,this.authorized=!0,this.emit("secureConnection",this),this.tlsReadLoop()}async tlsReadLoop(){for(;;){let e=await this.tlsRead();if(void 0===e)break;{let t=s.from(e);this.emit("data",t)}}}rawWrite(e){if(!this.coalesceWrites){this.ws.send(e);return}if(void 0===this.writeBuffer)this.writeBuffer=e,setTimeout(()=>{this.ws.send(this.writeBuffer),this.writeBuffer=void 0},0);else{let t=new Uint8Array(this.writeBuffer.length+e.length);t.set(this.writeBuffer),t.set(e,this.writeBuffer.length),this.writeBuffer=t}}write(e,t="utf8",r=e=>{}){return 0===e.length?r():("string"==typeof e&&(e=s.from(e,t)),0===this.tlsState?this.rawWrite(e):1===this.tlsState?this.once("secureConnection",()=>this.write(e,t,r)):this.tlsWrite(e),!0)}end(e=s.alloc(0),t="utf8",r){return this.write(e,t,()=>{this.ws.close(),r&&r()}),this}destroy(){return this.destroyed=!0,this.end()}},"Socket"),w(eL,"defaults",{poolQueryViaFetch:!1,fetchEndpoint:e=>"https://"+e+"/sql",fetchConnectionCache:!1,fetchFunction:void 0,webSocketConstructor:void 0,wsProxy:e=>e+"/v2",useSecureWebSocket:!0,forceDisablePgSSL:!0,coalesceWrites:!0,pipelineConnect:"password",subtls:void 0,rootCerts:"",pipelineTLS:!1,disableSNI:!1}),w(eL,"opts",{}),eI=eL}),ek=g(e=>{x(),Object.defineProperty(e,"__esModule",{value:!0}),e.NoticeMessage=e.DataRowMessage=e.CommandCompleteMessage=e.ReadyForQueryMessage=e.NotificationResponseMessage=e.BackendKeyDataMessage=e.AuthenticationMD5Password=e.ParameterStatusMessage=e.ParameterDescriptionMessage=e.RowDescriptionMessage=e.Field=e.CopyResponse=e.CopyDataMessage=e.DatabaseError=e.copyDone=e.emptyQuery=e.replicationStart=e.portalSuspended=e.noData=e.closeComplete=e.bindComplete=e.parseComplete=void 0,e.parseComplete={name:"parseComplete",length:5},e.bindComplete={name:"bindComplete",length:5},e.closeComplete={name:"closeComplete",length:5},e.noData={name:"noData",length:5},e.portalSuspended={name:"portalSuspended",length:5},e.replicationStart={name:"replicationStart",length:4},e.emptyQuery={name:"emptyQuery",length:4},e.copyDone={name:"copyDone",length:4};var t=class extends Error{constructor(e,t,r){super(e),this.length=t,this.name=r}};d(t,"DatabaseError"),e.DatabaseError=t;var r=class{constructor(e,t){this.length=e,this.chunk=t,this.name="copyData"}};d(r,"CopyDataMessage"),e.CopyDataMessage=r;var i=class{constructor(e,t,r,i){this.length=e,this.name=t,this.binary=r,this.columnTypes=Array(i)}};d(i,"CopyResponse"),e.CopyResponse=i;var s=class{constructor(e,t,r,i,s,n,o){this.name=e,this.tableID=t,this.columnID=r,this.dataTypeID=i,this.dataTypeSize=s,this.dataTypeModifier=n,this.format=o}};d(s,"Field"),e.Field=s;var n=class{constructor(e,t){this.length=e,this.fieldCount=t,this.name="rowDescription",this.fields=Array(this.fieldCount)}};d(n,"RowDescriptionMessage"),e.RowDescriptionMessage=n;var o=class{constructor(e,t){this.length=e,this.parameterCount=t,this.name="parameterDescription",this.dataTypeIDs=Array(this.parameterCount)}};d(o,"ParameterDescriptionMessage"),e.ParameterDescriptionMessage=o;var a=class{constructor(e,t,r){this.length=e,this.parameterName=t,this.parameterValue=r,this.name="parameterStatus"}};d(a,"ParameterStatusMessage"),e.ParameterStatusMessage=a;var l=class{constructor(e,t){this.length=e,this.salt=t,this.name="authenticationMD5Password"}};d(l,"AuthenticationMD5Password"),e.AuthenticationMD5Password=l;var h=class{constructor(e,t,r){this.length=e,this.processID=t,this.secretKey=r,this.name="backendKeyData"}};d(h,"BackendKeyDataMessage"),e.BackendKeyDataMessage=h;var u=class{constructor(e,t,r,i){this.length=e,this.processId=t,this.channel=r,this.payload=i,this.name="notification"}};d(u,"NotificationResponseMessage"),e.NotificationResponseMessage=u;var c=class{constructor(e,t){this.length=e,this.status=t,this.name="readyForQuery"}};d(c,"ReadyForQueryMessage"),e.ReadyForQueryMessage=c;var f=class{constructor(e,t){this.length=e,this.text=t,this.name="commandComplete"}};d(f,"CommandCompleteMessage"),e.CommandCompleteMessage=f;var p=class{constructor(e,t){this.length=e,this.fields=t,this.name="dataRow",this.fieldCount=t.length}};d(p,"DataRowMessage"),e.DataRowMessage=p;var g=class{constructor(e,t){this.length=e,this.message=t,this.name="notice"}};d(g,"NoticeMessage"),e.NoticeMessage=g}),eO=g(e=>{x(),Object.defineProperty(e,"__esModule",{value:!0}),e.Writer=void 0;var t=class{constructor(e=256){this.size=e,this.offset=5,this.headerPosition=0,this.buffer=s.allocUnsafe(e)}ensure(e){if(this.buffer.length-this.offset<e){var t=this.buffer,r=t.length+(t.length>>1)+e;this.buffer=s.allocUnsafe(r),t.copy(this.buffer)}}addInt32(e){return this.ensure(4),this.buffer[this.offset++]=e>>>24&255,this.buffer[this.offset++]=e>>>16&255,this.buffer[this.offset++]=e>>>8&255,this.buffer[this.offset++]=e>>>0&255,this}addInt16(e){return this.ensure(2),this.buffer[this.offset++]=e>>>8&255,this.buffer[this.offset++]=e>>>0&255,this}addCString(e){if(e){var t=s.byteLength(e);this.ensure(t+1),this.buffer.write(e,this.offset,"utf-8"),this.offset+=t}else this.ensure(1);return this.buffer[this.offset++]=0,this}addString(e=""){var t=s.byteLength(e);return this.ensure(t),this.buffer.write(e,this.offset),this.offset+=t,this}add(e){return this.ensure(e.length),e.copy(this.buffer,this.offset),this.offset+=e.length,this}join(e){if(e){this.buffer[this.headerPosition]=e;let t=this.offset-(this.headerPosition+1);this.buffer.writeInt32BE(t,this.headerPosition+1)}return this.buffer.slice(e?0:5,this.offset)}flush(e){var t=this.join(e);return this.offset=5,this.headerPosition=0,this.buffer=s.allocUnsafe(this.size),t}};d(t,"Writer"),e.Writer=t}),eM=g(e=>{x(),Object.defineProperty(e,"__esModule",{value:!0}),e.serialize=void 0;var t=eO(),r=new t.Writer,i=d(e=>{for(let t of(r.addInt16(3).addInt16(0),Object.keys(e)))r.addCString(t).addCString(e[t]);r.addCString("client_encoding").addCString("UTF8");var i=r.addCString("").flush(),s=i.length+4;return new t.Writer().addInt32(s).add(i).flush()},"startup"),n=d(()=>{let e=s.allocUnsafe(8);return e.writeInt32BE(8,0),e.writeInt32BE(80877103,4),e},"requestSsl"),o=d(e=>r.addCString(e).flush(112),"password"),a=d(function(e,t){return r.addCString(e).addInt32(s.byteLength(t)).addString(t),r.flush(112)},"sendSASLInitialResponseMessage"),l=d(function(e){return r.addString(e).flush(112)},"sendSCRAMClientFinalMessage"),h=d(e=>r.addCString(e).flush(81),"query"),u=[],c=d(e=>{let t=e.name||"";t.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",t,t.length),console.error("This can cause conflicts and silent errors executing queries"));let i=e.types||u;for(var s=i.length,n=r.addCString(t).addCString(e.text).addInt16(s),o=0;o<s;o++)n.addInt32(i[o]);return r.flush(80)},"parse"),f=new t.Writer,p=d(function(e,t){for(let i=0;i<e.length;i++){let n=t?t(e[i],i):e[i];null==n?(r.addInt16(0),f.addInt32(-1)):n instanceof s?(r.addInt16(1),f.addInt32(n.length),f.add(n)):(r.addInt16(0),f.addInt32(s.byteLength(n)),f.addString(n))}},"writeValues"),g=d((e={})=>{let t=e.portal||"",i=e.statement||"",s=e.binary||!1,n=e.values||u,o=n.length;return r.addCString(t).addCString(i),r.addInt16(o),p(n,e.valueMapper),r.addInt16(o),r.add(f.flush()),r.addInt16(s?1:0),r.flush(66)},"bind"),m=s.from([69,0,0,0,9,0,0,0,0,0]),y=d(e=>{if(!e||!e.portal&&!e.rows)return m;let t=e.portal||"",r=e.rows||0,i=s.byteLength(t),n=4+i+1+4,o=s.allocUnsafe(1+n);return o[0]=69,o.writeInt32BE(n,1),o.write(t,5,"utf-8"),o[i+5]=0,o.writeUInt32BE(r,o.length-4),o},"execute"),b=d((e,t)=>{let r=s.allocUnsafe(16);return r.writeInt32BE(16,0),r.writeInt16BE(1234,4),r.writeInt16BE(5678,6),r.writeInt32BE(e,8),r.writeInt32BE(t,12),r},"cancel"),v=d((e,t)=>{let r=4+s.byteLength(t)+1,i=s.allocUnsafe(1+r);return i[0]=e,i.writeInt32BE(r,1),i.write(t,5,"utf-8"),i[r]=0,i},"cstringMessage"),w=r.addCString("P").flush(68),S=r.addCString("S").flush(68),_=d(e=>e.name?v(68,`${e.type}${e.name||""}`):"P"===e.type?w:S,"describe"),E=d(e=>v(67,`${e.type}${e.name||""}`),"close"),C=d(e=>r.add(e).flush(100),"copyData"),A=d(e=>v(102,e),"copyFail"),P=d(e=>s.from([e,0,0,0,4]),"codeOnlyBuffer"),T=P(72),L=P(83),I=P(88),R=P(99);e.serialize={startup:i,password:o,requestSsl:n,sendSASLInitialResponseMessage:a,sendSCRAMClientFinalMessage:l,query:h,parse:c,bind:g,execute:y,describe:_,close:E,flush:()=>T,sync:()=>L,end:()=>I,copyData:C,copyDone:()=>R,copyFail:A,cancel:b}}),eN=g(e=>{x(),Object.defineProperty(e,"__esModule",{value:!0}),e.BufferReader=void 0;var t=s.allocUnsafe(0),r=class{constructor(e=0){this.offset=e,this.buffer=t,this.encoding="utf-8"}setBuffer(e,t){this.offset=e,this.buffer=t}int16(){let e=this.buffer.readInt16BE(this.offset);return this.offset+=2,e}byte(){let e=this.buffer[this.offset];return this.offset++,e}int32(){let e=this.buffer.readInt32BE(this.offset);return this.offset+=4,e}string(e){let t=this.buffer.toString(this.encoding,this.offset,this.offset+e);return this.offset+=e,t}cstring(){let e=this.offset,t=e;for(;0!==this.buffer[t++];);return this.offset=t,this.buffer.toString(this.encoding,e,t-1)}bytes(e){let t=this.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}};d(r,"BufferReader"),e.BufferReader=r}),eD={};m(eD,{default:()=>eB});var eB,e$=p(()=>{x(),eB={}}),eq=g(e=>{x();var t=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.Parser=void 0;var r=ek(),i=eN(),n=t((e$(),v(eD))),o=s.allocUnsafe(0),a=class{constructor(e){if(this.buffer=o,this.bufferLength=0,this.bufferOffset=0,this.reader=new i.BufferReader,e?.mode==="binary")throw Error("Binary mode not supported yet");this.mode=e?.mode||"text"}parse(e,t){this.mergeBuffer(e);let r=this.bufferOffset+this.bufferLength,i=this.bufferOffset;for(;i+5<=r;){let e=this.buffer[i],s=this.buffer.readUInt32BE(i+1),n=1+s;if(n+i<=r)t(this.handlePacket(i+5,e,s,this.buffer)),i+=n;else break}i===r?(this.buffer=o,this.bufferLength=0,this.bufferOffset=0):(this.bufferLength=r-i,this.bufferOffset=i)}mergeBuffer(e){if(this.bufferLength>0){let t=this.bufferLength+e.byteLength;if(t+this.bufferOffset>this.buffer.byteLength){let e;if(t<=this.buffer.byteLength&&this.bufferOffset>=this.bufferLength)e=this.buffer;else{let r=2*this.buffer.byteLength;for(;t>=r;)r*=2;e=s.allocUnsafe(r)}this.buffer.copy(e,0,this.bufferOffset,this.bufferOffset+this.bufferLength),this.buffer=e,this.bufferOffset=0}e.copy(this.buffer,this.bufferOffset+this.bufferLength),this.bufferLength=t}else this.buffer=e,this.bufferOffset=0,this.bufferLength=e.byteLength}handlePacket(e,t,i,s){switch(t){case 50:return r.bindComplete;case 49:return r.parseComplete;case 51:return r.closeComplete;case 110:return r.noData;case 115:return r.portalSuspended;case 99:return r.copyDone;case 87:return r.replicationStart;case 73:return r.emptyQuery;case 68:return this.parseDataRowMessage(e,i,s);case 67:return this.parseCommandCompleteMessage(e,i,s);case 90:return this.parseReadyForQueryMessage(e,i,s);case 65:return this.parseNotificationMessage(e,i,s);case 82:return this.parseAuthenticationResponse(e,i,s);case 83:return this.parseParameterStatusMessage(e,i,s);case 75:return this.parseBackendKeyData(e,i,s);case 69:return this.parseErrorMessage(e,i,s,"error");case 78:return this.parseErrorMessage(e,i,s,"notice");case 84:return this.parseRowDescriptionMessage(e,i,s);case 116:return this.parseParameterDescriptionMessage(e,i,s);case 71:return this.parseCopyInMessage(e,i,s);case 72:return this.parseCopyOutMessage(e,i,s);case 100:return this.parseCopyData(e,i,s);default:n.default.fail(`unknown message code: ${t.toString(16)}`)}}parseReadyForQueryMessage(e,t,i){this.reader.setBuffer(e,i);let s=this.reader.string(1);return new r.ReadyForQueryMessage(t,s)}parseCommandCompleteMessage(e,t,i){this.reader.setBuffer(e,i);let s=this.reader.cstring();return new r.CommandCompleteMessage(t,s)}parseCopyData(e,t,i){let s=i.slice(e,e+(t-4));return new r.CopyDataMessage(t,s)}parseCopyInMessage(e,t,r){return this.parseCopyMessage(e,t,r,"copyInResponse")}parseCopyOutMessage(e,t,r){return this.parseCopyMessage(e,t,r,"copyOutResponse")}parseCopyMessage(e,t,i,s){this.reader.setBuffer(e,i);let n=0!==this.reader.byte(),o=this.reader.int16(),a=new r.CopyResponse(t,s,n,o);for(let e=0;e<o;e++)a.columnTypes[e]=this.reader.int16();return a}parseNotificationMessage(e,t,i){this.reader.setBuffer(e,i);let s=this.reader.int32(),n=this.reader.cstring(),o=this.reader.cstring();return new r.NotificationResponseMessage(t,s,n,o)}parseRowDescriptionMessage(e,t,i){this.reader.setBuffer(e,i);let s=this.reader.int16(),n=new r.RowDescriptionMessage(t,s);for(let e=0;e<s;e++)n.fields[e]=this.parseField();return n}parseField(){let e=this.reader.cstring(),t=this.reader.int32(),i=this.reader.int16(),s=this.reader.int32(),n=this.reader.int16(),o=this.reader.int32(),a=0===this.reader.int16()?"text":"binary";return new r.Field(e,t,i,s,n,o,a)}parseParameterDescriptionMessage(e,t,i){this.reader.setBuffer(e,i);let s=this.reader.int16(),n=new r.ParameterDescriptionMessage(t,s);for(let e=0;e<s;e++)n.dataTypeIDs[e]=this.reader.int32();return n}parseDataRowMessage(e,t,i){this.reader.setBuffer(e,i);let s=this.reader.int16(),n=Array(s);for(let e=0;e<s;e++){let t=this.reader.int32();n[e]=-1===t?null:this.reader.string(t)}return new r.DataRowMessage(t,n)}parseParameterStatusMessage(e,t,i){this.reader.setBuffer(e,i);let s=this.reader.cstring(),n=this.reader.cstring();return new r.ParameterStatusMessage(t,s,n)}parseBackendKeyData(e,t,i){this.reader.setBuffer(e,i);let s=this.reader.int32(),n=this.reader.int32();return new r.BackendKeyDataMessage(t,s,n)}parseAuthenticationResponse(e,t,i){this.reader.setBuffer(e,i);let s=this.reader.int32(),n={name:"authenticationOk",length:t};switch(s){case 0:break;case 3:8===n.length&&(n.name="authenticationCleartextPassword");break;case 5:if(12===n.length){n.name="authenticationMD5Password";let e=this.reader.bytes(4);return new r.AuthenticationMD5Password(t,e)}break;case 10:let o;n.name="authenticationSASL",n.mechanisms=[];do(o=this.reader.cstring())&&n.mechanisms.push(o);while(o);break;case 11:n.name="authenticationSASLContinue",n.data=this.reader.string(t-8);break;case 12:n.name="authenticationSASLFinal",n.data=this.reader.string(t-8);break;default:throw Error("Unknown authenticationOk message type "+s)}return n}parseErrorMessage(e,t,i,s){this.reader.setBuffer(e,i);let n={},o=this.reader.string(1);for(;"\x00"!==o;)n[o]=this.reader.cstring(),o=this.reader.string(1);let a=n.M,l="notice"===s?new r.NoticeMessage(t,a):new r.DatabaseError(a,t,s);return l.severity=n.S,l.code=n.C,l.detail=n.D,l.hint=n.H,l.position=n.P,l.internalPosition=n.p,l.internalQuery=n.q,l.where=n.W,l.schema=n.s,l.table=n.t,l.column=n.c,l.dataType=n.d,l.constraint=n.n,l.file=n.F,l.line=n.L,l.routine=n.R,l}};d(a,"Parser"),e.Parser=a}),eQ=g(e=>{x(),Object.defineProperty(e,"__esModule",{value:!0}),e.DatabaseError=e.serialize=e.parse=void 0;var t=ek();Object.defineProperty(e,"DatabaseError",{enumerable:!0,get:function(){return t.DatabaseError}});var r=eM();Object.defineProperty(e,"serialize",{enumerable:!0,get:function(){return r.serialize}});var i=eq();function s(e,t){let r=new i.Parser;return e.on("data",e=>r.parse(e,t)),new Promise(t=>e.on("end",()=>t()))}d(s,"parse"),e.parse=s}),ej={};function eU({socket:e,servername:t}){return e.startTls(t),e}m(ej,{connect:()=>eU});var eF=p(()=>{x(),d(eU,"connect")}),ez=g((e,t)=>{x();var r=(eR(),v(eA)),i=C().EventEmitter,{parse:s,serialize:n}=eQ(),o=n.flush(),a=n.sync(),l=n.end(),h=class extends i{constructor(e){super(),e=e||{},this.stream=e.stream||new r.Socket,this._keepAlive=e.keepAlive,this._keepAliveInitialDelayMillis=e.keepAliveInitialDelayMillis,this.lastBuffer=!1,this.parsedStatements={},this.ssl=e.ssl||!1,this._ending=!1,this._emitMessage=!1;var t=this;this.on("newListener",function(e){"message"===e&&(t._emitMessage=!0)})}connect(e,t){var i=this;this._connecting=!0,this.stream.setNoDelay(!0),this.stream.connect(e,t),this.stream.once("connect",function(){i._keepAlive&&i.stream.setKeepAlive(!0,i._keepAliveInitialDelayMillis),i.emit("connect")});let s=d(function(e){i._ending&&("ECONNRESET"===e.code||"EPIPE"===e.code)||i.emit("error",e)},"reportStreamError");if(this.stream.on("error",s),this.stream.on("close",function(){i.emit("end")}),!this.ssl)return this.attachListeners(this.stream);this.stream.once("data",function(e){switch(e.toString("utf8")){case"S":break;case"N":return i.stream.end(),i.emit("error",Error("The server does not support SSL connections"));default:return i.stream.end(),i.emit("error",Error("There was an error establishing an SSL connection"))}var n=(eF(),v(ej));let o={socket:i.stream};!0!==i.ssl&&(Object.assign(o,i.ssl),"key"in i.ssl&&(o.key=i.ssl.key)),0===r.isIP(t)&&(o.servername=t);try{i.stream=n.connect(o)}catch(e){return i.emit("error",e)}i.attachListeners(i.stream),i.stream.on("error",s),i.emit("sslconnect")})}attachListeners(e){e.on("end",()=>{this.emit("end")}),s(e,e=>{var t="error"===e.name?"errorMessage":e.name;this._emitMessage&&this.emit("message",e),this.emit(t,e)})}requestSsl(){this.stream.write(n.requestSsl())}startup(e){this.stream.write(n.startup(e))}cancel(e,t){this._send(n.cancel(e,t))}password(e){this._send(n.password(e))}sendSASLInitialResponseMessage(e,t){this._send(n.sendSASLInitialResponseMessage(e,t))}sendSCRAMClientFinalMessage(e){this._send(n.sendSCRAMClientFinalMessage(e))}_send(e){return!!this.stream.writable&&this.stream.write(e)}query(e){this._send(n.query(e))}parse(e){this._send(n.parse(e))}bind(e){this._send(n.bind(e))}execute(e){this._send(n.execute(e))}flush(){this.stream.writable&&this.stream.write(o)}sync(){this._ending=!0,this._send(o),this._send(a)}ref(){this.stream.ref()}unref(){this.stream.unref()}end(){if(this._ending=!0,!this._connecting||!this.stream.writable){this.stream.end();return}return this.stream.write(l,()=>{this.stream.end()})}close(e){this._send(n.close(e))}describe(e){this._send(n.describe(e))}sendCopyFromChunk(e){this._send(n.copyData(e))}endCopyFrom(){this._send(n.copyDone())}sendCopyFail(e){this._send(n.copyFail(e))}};d(h,"Connection"),t.exports=h}),eH=g((e,r)=>{x();var i=C().EventEmitter,s=(T(),v(A),Y()),o=X(),a=ep(),l=eg(),h=eE(),u=eC(),c=J(),f=ez(),p=class extends i{constructor(e){super(),this.connectionParameters=new h(e),this.user=this.connectionParameters.user,this.database=this.connectionParameters.database,this.port=this.connectionParameters.port,this.host=this.connectionParameters.host,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:this.connectionParameters.password}),this.replication=this.connectionParameters.replication;var r=e||{};this._Promise=r.Promise||t.Promise,this._types=new l(r.types),this._ending=!1,this._connecting=!1,this._connected=!1,this._connectionError=!1,this._queryable=!0,this.connection=r.connection||new f({stream:r.stream,ssl:this.connectionParameters.ssl,keepAlive:r.keepAlive||!1,keepAliveInitialDelayMillis:r.keepAliveInitialDelayMillis||0,encoding:this.connectionParameters.client_encoding||"utf8"}),this.queryQueue=[],this.binary=r.binary||c.binary,this.processID=null,this.secretKey=null,this.ssl=this.connectionParameters.ssl||!1,this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this._connectionTimeoutMillis=r.connectionTimeoutMillis||0}_errorAllQueries(e){let t=d(t=>{n.nextTick(()=>{t.handleError(e,this.connection)})},"enqueueError");this.activeQuery&&(t(this.activeQuery),this.activeQuery=null),this.queryQueue.forEach(t),this.queryQueue.length=0}_connect(e){var t=this,r=this.connection;if(this._connectionCallback=e,this._connecting||this._connected){let t=Error("Client has already been connected. You cannot reuse a client.");n.nextTick(()=>{e(t)});return}this._connecting=!0,this.connectionTimeoutHandle,this._connectionTimeoutMillis>0&&(this.connectionTimeoutHandle=setTimeout(()=>{r._ending=!0,r.stream.destroy(Error("timeout expired"))},this._connectionTimeoutMillis)),this.host&&0===this.host.indexOf("/")?r.connect(this.host+"/.s.PGSQL."+this.port):r.connect(this.port,this.host),r.on("connect",function(){t.ssl?r.requestSsl():r.startup(t.getStartupConf())}),r.on("sslconnect",function(){r.startup(t.getStartupConf())}),this._attachListeners(r),r.once("end",()=>{let e=this._ending?Error("Connection terminated"):Error("Connection terminated unexpectedly");clearTimeout(this.connectionTimeoutHandle),this._errorAllQueries(e),this._ending||(this._connecting&&!this._connectionError?this._connectionCallback?this._connectionCallback(e):this._handleErrorEvent(e):this._connectionError||this._handleErrorEvent(e)),n.nextTick(()=>{this.emit("end")})})}connect(e){if(e){this._connect(e);return}return new this._Promise((e,t)=>{this._connect(r=>{r?t(r):e()})})}_attachListeners(e){e.on("authenticationCleartextPassword",this._handleAuthCleartextPassword.bind(this)),e.on("authenticationMD5Password",this._handleAuthMD5Password.bind(this)),e.on("authenticationSASL",this._handleAuthSASL.bind(this)),e.on("authenticationSASLContinue",this._handleAuthSASLContinue.bind(this)),e.on("authenticationSASLFinal",this._handleAuthSASLFinal.bind(this)),e.on("backendKeyData",this._handleBackendKeyData.bind(this)),e.on("error",this._handleErrorEvent.bind(this)),e.on("errorMessage",this._handleErrorMessage.bind(this)),e.on("readyForQuery",this._handleReadyForQuery.bind(this)),e.on("notice",this._handleNotice.bind(this)),e.on("rowDescription",this._handleRowDescription.bind(this)),e.on("dataRow",this._handleDataRow.bind(this)),e.on("portalSuspended",this._handlePortalSuspended.bind(this)),e.on("emptyQuery",this._handleEmptyQuery.bind(this)),e.on("commandComplete",this._handleCommandComplete.bind(this)),e.on("parseComplete",this._handleParseComplete.bind(this)),e.on("copyInResponse",this._handleCopyInResponse.bind(this)),e.on("copyData",this._handleCopyData.bind(this)),e.on("notification",this._handleNotification.bind(this))}_checkPgPass(e){let t=this.connection;"function"==typeof this.password?this._Promise.resolve().then(()=>this.password()).then(r=>{if(void 0!==r){if("string"!=typeof r){t.emit("error",TypeError("Password must be a string"));return}this.connectionParameters.password=this.password=r}else this.connectionParameters.password=this.password=null;e()}).catch(e=>{t.emit("error",e)}):null!==this.password?e():a(this.connectionParameters,t=>{void 0!==t&&(this.connectionParameters.password=this.password=t),e()})}_handleAuthCleartextPassword(e){this._checkPgPass(()=>{this.connection.password(this.password)})}_handleAuthMD5Password(e){this._checkPgPass(()=>{let t=s.postgresMd5PasswordHash(this.user,this.password,e.salt);this.connection.password(t)})}_handleAuthSASL(e){this._checkPgPass(()=>{this.saslSession=o.startSession(e.mechanisms),this.connection.sendSASLInitialResponseMessage(this.saslSession.mechanism,this.saslSession.response)})}_handleAuthSASLContinue(e){o.continueSession(this.saslSession,this.password,e.data),this.connection.sendSCRAMClientFinalMessage(this.saslSession.response)}_handleAuthSASLFinal(e){o.finalizeSession(this.saslSession,e.data),this.saslSession=null}_handleBackendKeyData(e){this.processID=e.processID,this.secretKey=e.secretKey}_handleReadyForQuery(e){this._connecting&&(this._connecting=!1,this._connected=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback&&(this._connectionCallback(null,this),this._connectionCallback=null),this.emit("connect"));let{activeQuery:t}=this;this.activeQuery=null,this.readyForQuery=!0,t&&t.handleReadyForQuery(this.connection),this._pulseQueryQueue()}_handleErrorWhileConnecting(e){if(!this._connectionError){if(this._connectionError=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback)return this._connectionCallback(e);this.emit("error",e)}}_handleErrorEvent(e){if(this._connecting)return this._handleErrorWhileConnecting(e);this._queryable=!1,this._errorAllQueries(e),this.emit("error",e)}_handleErrorMessage(e){if(this._connecting)return this._handleErrorWhileConnecting(e);let t=this.activeQuery;if(!t){this._handleErrorEvent(e);return}this.activeQuery=null,t.handleError(e,this.connection)}_handleRowDescription(e){this.activeQuery.handleRowDescription(e)}_handleDataRow(e){this.activeQuery.handleDataRow(e)}_handlePortalSuspended(e){this.activeQuery.handlePortalSuspended(this.connection)}_handleEmptyQuery(e){this.activeQuery.handleEmptyQuery(this.connection)}_handleCommandComplete(e){this.activeQuery.handleCommandComplete(e,this.connection)}_handleParseComplete(e){this.activeQuery.name&&(this.connection.parsedStatements[this.activeQuery.name]=this.activeQuery.text)}_handleCopyInResponse(e){this.activeQuery.handleCopyInResponse(this.connection)}_handleCopyData(e){this.activeQuery.handleCopyData(e,this.connection)}_handleNotification(e){this.emit("notification",e)}_handleNotice(e){this.emit("notice",e)}getStartupConf(){var e=this.connectionParameters,t={user:e.user,database:e.database},r=e.application_name||e.fallback_application_name;return r&&(t.application_name=r),e.replication&&(t.replication=""+e.replication),e.statement_timeout&&(t.statement_timeout=String(parseInt(e.statement_timeout,10))),e.lock_timeout&&(t.lock_timeout=String(parseInt(e.lock_timeout,10))),e.idle_in_transaction_session_timeout&&(t.idle_in_transaction_session_timeout=String(parseInt(e.idle_in_transaction_session_timeout,10))),e.options&&(t.options=e.options),t}cancel(e,t){if(e.activeQuery===t){var r=this.connection;this.host&&0===this.host.indexOf("/")?r.connect(this.host+"/.s.PGSQL."+this.port):r.connect(this.port,this.host),r.on("connect",function(){r.cancel(e.processID,e.secretKey)})}else -1!==e.queryQueue.indexOf(t)&&e.queryQueue.splice(e.queryQueue.indexOf(t),1)}setTypeParser(e,t,r){return this._types.setTypeParser(e,t,r)}getTypeParser(e,t){return this._types.getTypeParser(e,t)}escapeIdentifier(e){return'"'+e.replace(/"/g,'""')+'"'}escapeLiteral(e){for(var t=!1,r="'",i=0;i<e.length;i++){var s=e[i];"'"===s?r+=s+s:"\\"===s?(r+=s+s,t=!0):r+=s}return r+="'",!0===t&&(r=" E"+r),r}_pulseQueryQueue(){if(!0===this.readyForQuery){if(this.activeQuery=this.queryQueue.shift(),this.activeQuery){this.readyForQuery=!1,this.hasExecuted=!0;let e=this.activeQuery.submit(this.connection);e&&n.nextTick(()=>{this.activeQuery.handleError(e,this.connection),this.readyForQuery=!0,this._pulseQueryQueue()})}else this.hasExecuted&&(this.activeQuery=null,this.emit("drain"))}}query(e,t,r){var i,s,o,a,l;if(null==e)throw TypeError("Client was passed a null or undefined query");return"function"==typeof e.submit?(o=e.query_timeout||this.connectionParameters.query_timeout,s=i=e,"function"==typeof t&&(i.callback=i.callback||t)):(o=this.connectionParameters.query_timeout,(i=new u(e,t,r)).callback||(s=new this._Promise((e,t)=>{i.callback=(r,i)=>r?t(r):e(i)}))),o&&(l=i.callback,a=setTimeout(()=>{var e=Error("Query read timeout");n.nextTick(()=>{i.handleError(e,this.connection)}),l(e),i.callback=()=>{};var t=this.queryQueue.indexOf(i);t>-1&&this.queryQueue.splice(t,1),this._pulseQueryQueue()},o),i.callback=(e,t)=>{clearTimeout(a),l(e,t)}),this.binary&&!i.binary&&(i.binary=!0),i._result&&!i._result._types&&(i._result._types=this._types),this._queryable?this._ending?n.nextTick(()=>{i.handleError(Error("Client was closed and is not queryable"),this.connection)}):(this.queryQueue.push(i),this._pulseQueryQueue()):n.nextTick(()=>{i.handleError(Error("Client has encountered a connection error and is not queryable"),this.connection)}),s}ref(){this.connection.ref()}unref(){this.connection.unref()}end(e){if(this._ending=!0,!this.connection._connecting){if(!e)return this._Promise.resolve();e()}if(this.activeQuery||!this._queryable?this.connection.stream.destroy():this.connection.end(),!e)return new this._Promise(e=>{this.connection.once("end",e)});this.connection.once("end",e)}};d(p,"Client"),p.Query=u,r.exports=p}),eW=g((e,i)=>{x();var s=C().EventEmitter,o=d(function(){},"NOOP"),a=d((e,t)=>{let r=e.findIndex(t);return -1===r?void 0:e.splice(r,1)[0]},"removeWhere"),l=class{constructor(e,t,r){this.client=e,this.idleListener=t,this.timeoutId=r}};d(l,"IdleItem");var h=class{constructor(e){this.callback=e}};function u(){throw Error("Release called on client which has already been released to the pool.")}function c(e,t){let r,i;return t?{callback:t,result:void 0}:{callback:d(function(e,t){e?r(e):i(t)},"cb"),result:new e(function(e,t){i=e,r=t}).catch(e=>{throw Error.captureStackTrace(e),e})}}function f(e,t){return d(function r(i){i.client=t,t.removeListener("error",r),t.on("error",()=>{e.log("additional client error after disconnection due to error",i)}),e._remove(t),e.emit("error",i,t)},"idleListener")}d(h,"PendingItem"),d(u,"throwOnDoubleRelease"),d(c,"promisify"),d(f,"makeIdleListener");var p=class extends s{constructor(e,r){super(),this.options=Object.assign({},e),null!=e&&"password"in e&&Object.defineProperty(this.options,"password",{configurable:!0,enumerable:!1,writable:!0,value:e.password}),null!=e&&e.ssl&&e.ssl.key&&Object.defineProperty(this.options.ssl,"key",{enumerable:!1}),this.options.max=this.options.max||this.options.poolSize||10,this.options.maxUses=this.options.maxUses||1/0,this.options.allowExitOnIdle=this.options.allowExitOnIdle||!1,this.options.maxLifetimeSeconds=this.options.maxLifetimeSeconds||0,this.log=this.options.log||function(){},this.Client=this.options.Client||r||e0().Client,this.Promise=this.options.Promise||t.Promise,typeof this.options.idleTimeoutMillis>"u"&&(this.options.idleTimeoutMillis=1e4),this._clients=[],this._idle=[],this._expired=new WeakSet,this._pendingQueue=[],this._endCallback=void 0,this.ending=!1,this.ended=!1}_isFull(){return this._clients.length>=this.options.max}_pulseQueue(){if(this.log("pulse queue"),this.ended){this.log("pulse queue ended");return}if(this.ending){this.log("pulse queue on ending"),this._idle.length&&this._idle.slice().map(e=>{this._remove(e.client)}),this._clients.length||(this.ended=!0,this._endCallback());return}if(!this._pendingQueue.length){this.log("no queued requests");return}if(!this._idle.length&&this._isFull())return;let e=this._pendingQueue.shift();if(this._idle.length){let t=this._idle.pop();clearTimeout(t.timeoutId);let r=t.client;r.ref&&r.ref();let i=t.idleListener;return this._acquireClient(r,e,i,!1)}if(!this._isFull())return this.newClient(e);throw Error("unexpected condition")}_remove(e){let t=a(this._idle,t=>t.client===e);void 0!==t&&clearTimeout(t.timeoutId),this._clients=this._clients.filter(t=>t!==e),e.end(),this.emit("remove",e)}connect(e){if(this.ending){let t=Error("Cannot use a pool after calling end on the pool");return e?e(t):this.Promise.reject(t)}let t=c(this.Promise,e),r=t.result;if(this._isFull()||this._idle.length){if(this._idle.length&&n.nextTick(()=>this._pulseQueue()),!this.options.connectionTimeoutMillis)return this._pendingQueue.push(new h(t.callback)),r;let e=d((e,r,i)=>{clearTimeout(s),t.callback(e,r,i)},"queueCallback"),i=new h(e),s=setTimeout(()=>{a(this._pendingQueue,t=>t.callback===e),i.timedOut=!0,t.callback(Error("timeout exceeded when trying to connect"))},this.options.connectionTimeoutMillis);return this._pendingQueue.push(i),r}return this.newClient(new h(t.callback)),r}newClient(e){let t=new this.Client(this.options);this._clients.push(t);let r=f(this,t);this.log("checking client timeout");let i,s=!1;this.options.connectionTimeoutMillis&&(i=setTimeout(()=>{this.log("ending client due to timeout"),s=!0,t.connection?t.connection.stream.destroy():t.end()},this.options.connectionTimeoutMillis)),this.log("connecting new client"),t.connect(n=>{if(i&&clearTimeout(i),t.on("error",r),n)this.log("client failed to connect",n),this._clients=this._clients.filter(e=>e!==t),s&&(n.message="Connection terminated due to connection timeout"),this._pulseQueue(),e.timedOut||e.callback(n,void 0,o);else{if(this.log("new client connected"),0!==this.options.maxLifetimeSeconds){let e=setTimeout(()=>{this.log("ending client due to expired lifetime"),this._expired.add(t),-1!==this._idle.findIndex(e=>e.client===t)&&this._acquireClient(t,new h((e,t,r)=>r()),r,!1)},1e3*this.options.maxLifetimeSeconds);e.unref(),t.once("end",()=>clearTimeout(e))}return this._acquireClient(t,e,r,!0)}})}_acquireClient(e,t,r,i){i&&this.emit("connect",e),this.emit("acquire",e),e.release=this._releaseOnce(e,r),e.removeListener("error",r),t.timedOut?i&&this.options.verify?this.options.verify(e,e.release):e.release():i&&this.options.verify?this.options.verify(e,r=>{if(r)return e.release(r),t.callback(r,void 0,o);t.callback(void 0,e,e.release)}):t.callback(void 0,e,e.release)}_releaseOnce(e,t){let r=!1;return i=>{r&&u(),r=!0,this._release(e,t,i)}}_release(e,t,r){let i;if(e.on("error",t),e._poolUseCount=(e._poolUseCount||0)+1,this.emit("release",r,e),r||this.ending||!e._queryable||e._ending||e._poolUseCount>=this.options.maxUses){e._poolUseCount>=this.options.maxUses&&this.log("remove expended client"),this._remove(e),this._pulseQueue();return}if(this._expired.has(e)){this.log("remove expired client"),this._expired.delete(e),this._remove(e),this._pulseQueue();return}this.options.idleTimeoutMillis&&(i=setTimeout(()=>{this.log("remove idle client"),this._remove(e)},this.options.idleTimeoutMillis),this.options.allowExitOnIdle&&i.unref()),this.options.allowExitOnIdle&&e.unref(),this._idle.push(new l(e,t,i)),this._pulseQueue()}query(e,t,i){if("function"==typeof e){let t=c(this.Promise,e);return r(function(){return t.callback(Error("Passing a function as the first parameter to pool.query is not supported"))}),t.result}"function"==typeof t&&(i=t,t=void 0);let s=c(this.Promise,i);return i=s.callback,this.connect((r,s)=>{if(r)return i(r);let n=!1,o=d(e=>{n||(n=!0,s.release(e),i(e))},"onError");s.once("error",o),this.log("dispatching query");try{s.query(e,t,(e,t)=>{if(this.log("query dispatched"),s.removeListener("error",o),!n)return n=!0,s.release(e),e?i(e):i(void 0,t)})}catch(e){return s.release(e),i(e)}}),s.result}end(e){if(this.log("ending"),this.ending){let t=Error("Called end on pool more than once");return e?e(t):this.Promise.reject(t)}this.ending=!0;let t=c(this.Promise,e);return this._endCallback=t.callback,this._pulseQueue(),t.result}get waitingCount(){return this._pendingQueue.length}get idleCount(){return this._idle.length}get expiredCount(){return this._clients.reduce((e,t)=>e+(this._expired.has(t)?1:0),0)}get totalCount(){return this._clients.length}};d(p,"Pool"),i.exports=p}),eV={};m(eV,{default:()=>eK});var eK,eG=p(()=>{x(),eK={}}),eJ=g((e,t)=>{t.exports={name:"pg",version:"8.8.0",description:"PostgreSQL client - pure javascript & libpq with the same API",keywords:["database","libpq","pg","postgre","postgres","postgresql","rdbms"],homepage:"https://github.com/brianc/node-postgres",repository:{type:"git",url:"git://github.com/brianc/node-postgres.git",directory:"packages/pg"},author:"Brian Carlson <brian.m.carlson@gmail.com>",main:"./lib",dependencies:{"buffer-writer":"2.0.0","packet-reader":"1.0.0","pg-connection-string":"^2.5.0","pg-pool":"^3.5.2","pg-protocol":"^1.5.0","pg-types":"^2.1.0",pgpass:"1.x"},devDependencies:{async:"2.6.4",bluebird:"3.5.2",co:"4.6.0","pg-copy-streams":"0.3.0"},peerDependencies:{"pg-native":">=3.0.1"},peerDependenciesMeta:{"pg-native":{optional:!0}},scripts:{test:"make test-all"},files:["lib","SPONSORS.md"],license:"MIT",engines:{node:">= 8.0.0"},gitHead:"c99fb2c127ddf8d712500db2c7b9a5491a178655"}}),eY=g((e,t)=>{x();var i=C().EventEmitter,s=(T(),v(A)),o=Y(),a=t.exports=function(e,t,r){i.call(this),e=o.normalizeQueryConfig(e,t,r),this.text=e.text,this.values=e.values,this.name=e.name,this.callback=e.callback,this.state="new",this._arrayMode="array"===e.rowMode,this._emitRowEvents=!1,this.on("newListener",(function(e){"row"===e&&(this._emitRowEvents=!0)}).bind(this))};s.inherits(a,i);var l={sqlState:"code",statementPosition:"position",messagePrimary:"message",context:"where",schemaName:"schema",tableName:"table",columnName:"column",dataTypeName:"dataType",constraintName:"constraint",sourceFile:"file",sourceLine:"line",sourceFunction:"routine"};a.prototype.handleError=function(e){var t=this.native.pq.resultErrorFields();if(t)for(var r in t)e[l[r]||r]=t[r];this.callback?this.callback(e):this.emit("error",e),this.state="error"},a.prototype.then=function(e,t){return this._getPromise().then(e,t)},a.prototype.catch=function(e){return this._getPromise().catch(e)},a.prototype._getPromise=function(){return this._promise||(this._promise=new Promise((function(e,t){this._once("end",e),this._once("error",t)}).bind(this))),this._promise},a.prototype.submit=function(e){this.state="running";var t=this;this.native=e.native,e.native.arrayMode=this._arrayMode;var i=d(function(i,s,n){if(e.native.arrayMode=!1,r(function(){t.emit("_done")}),i)return t.handleError(i);t._emitRowEvents&&(n.length>1?s.forEach((e,r)=>{e.forEach(e=>{t.emit("row",e,n[r])})}):s.forEach(function(e){t.emit("row",e,n)})),t.state="end",t.emit("end",n),t.callback&&t.callback(null,n)},"after");if(n.domain&&(i=n.domain.bind(i)),this.name){this.name.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",this.name,this.name.length),console.error("This can cause conflicts and silent errors executing queries"));var s=(this.values||[]).map(o.prepareValue);if(e.namedQueries[this.name]){if(this.text&&e.namedQueries[this.name]!==this.text){let e=Error(`Pre\
pared statements must be unique - '${this.name}' was used for a different statem\
ent`);return i(e)}return e.native.execute(this.name,s,i)}return e.native.prepare(this.name,this.text,s.length,function(r){return r?i(r):(e.namedQueries[t.name]=t.text,t.native.execute(t.name,s,i))})}if(this.values){if(!Array.isArray(this.values)){let e=Error("Query values must be an array");return i(e)}var a=this.values.map(o.prepareValue);e.native.query(this.text,a,i)}else e.native.query(this.text,i)}}),eX=g((e,r)=>{x();var i=(eG(),v(eV)),s=eg(),o=(eJ(),C().EventEmitter),a=(T(),v(A)),l=eE(),h=eY(),u=r.exports=function(e){o.call(this),e=e||{},this._Promise=e.Promise||t.Promise,this._types=new s(e.types),this.native=new i({types:this._types}),this._queryQueue=[],this._ending=!1,this._connecting=!1,this._connected=!1,this._queryable=!0;var r=this.connectionParameters=new l(e);this.user=r.user,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:r.password}),this.database=r.database,this.host=r.host,this.port=r.port,this.namedQueries={}};u.Query=h,a.inherits(u,o),u.prototype._errorAllQueries=function(e){let t=d(t=>{n.nextTick(()=>{t.native=this.native,t.handleError(e)})},"enqueueError");this._hasActiveQuery()&&(t(this._activeQuery),this._activeQuery=null),this._queryQueue.forEach(t),this._queryQueue.length=0},u.prototype._connect=function(e){var t=this;if(this._connecting){n.nextTick(()=>e(Error("Client has already been connected. You cannot reuse a client.")));return}this._connecting=!0,this.connectionParameters.getLibpqConnectionString(function(r,i){if(r)return e(r);t.native.connect(i,function(r){if(r)return t.native.end(),e(r);t._connected=!0,t.native.on("error",function(e){t._queryable=!1,t._errorAllQueries(e),t.emit("error",e)}),t.native.on("notification",function(e){t.emit("notification",{channel:e.relname,payload:e.extra})}),t.emit("connect"),t._pulseQueryQueue(!0),e()})})},u.prototype.connect=function(e){if(e){this._connect(e);return}return new this._Promise((e,t)=>{this._connect(r=>{r?t(r):e()})})},u.prototype.query=function(e,t,r){var i,s,o,a,l;if(null==e)throw TypeError("Client was passed a null or undefined query");if("function"==typeof e.submit)o=e.query_timeout||this.connectionParameters.query_timeout,s=i=e,"function"==typeof t&&(e.callback=t);else if(o=this.connectionParameters.query_timeout,!(i=new h(e,t,r)).callback){let e,t;s=new this._Promise((r,i)=>{e=r,t=i}),i.callback=(r,i)=>r?t(r):e(i)}return o&&(l=i.callback,a=setTimeout(()=>{var e=Error("Query read timeout");n.nextTick(()=>{i.handleError(e,this.connection)}),l(e),i.callback=()=>{};var t=this._queryQueue.indexOf(i);t>-1&&this._queryQueue.splice(t,1),this._pulseQueryQueue()},o),i.callback=(e,t)=>{clearTimeout(a),l(e,t)}),this._queryable?this._ending?(i.native=this.native,n.nextTick(()=>{i.handleError(Error("Client was closed and is not queryable"))})):(this._queryQueue.push(i),this._pulseQueryQueue()):(i.native=this.native,n.nextTick(()=>{i.handleError(Error("Client has encountered a connection error and is not queryable"))})),s},u.prototype.end=function(e){var t,r=this;return this._ending=!0,this._connected||this.once("connect",this.end.bind(this,e)),e||(t=new this._Promise(function(t,r){e=d(e=>e?r(e):t(),"cb")})),this.native.end(function(){r._errorAllQueries(Error("Connection terminated")),n.nextTick(()=>{r.emit("end"),e&&e()})}),t},u.prototype._hasActiveQuery=function(){return this._activeQuery&&"error"!==this._activeQuery.state&&"end"!==this._activeQuery.state},u.prototype._pulseQueryQueue=function(e){if(this._connected&&!this._hasActiveQuery()){var t=this._queryQueue.shift();if(!t){e||this.emit("drain");return}this._activeQuery=t,t.submit(this);var r=this;t.once("_done",function(){r._pulseQueryQueue()})}},u.prototype.cancel=function(e){this._activeQuery===e?this.native.cancel(function(){}):-1!==this._queryQueue.indexOf(e)&&this._queryQueue.splice(this._queryQueue.indexOf(e),1)},u.prototype.ref=function(){},u.prototype.unref=function(){},u.prototype.setTypeParser=function(e,t,r){return this._types.setTypeParser(e,t,r)},u.prototype.getTypeParser=function(e,t){return this._types.getTypeParser(e,t)}}),eZ=g((e,t)=>{x(),t.exports=eX()}),e0=g((e,t)=>{x();var r=eH(),i=J(),s=ez(),o=eW(),{DatabaseError:a}=eQ(),l=d(e=>{var t;return d(t=class extends o{constructor(t){super(t,e)}},"BoundPool"),t},"poolFactory"),h=d(function(e){this.defaults=i,this.Client=e,this.Query=this.Client.Query,this.Pool=l(this.Client),this._pools=[],this.Connection=s,this.types=G(),this.DatabaseError=a},"PG");"u">typeof n.env.NODE_PG_FORCE_NATIVE?t.exports=new h(eZ()):(t.exports=new h(r),Object.defineProperty(t.exports,"native",{configurable:!0,enumerable:!1,get(){var e=null;try{e=new h(eZ())}catch(e){if("MODULE_NOT_FOUND"!==e.code)throw e}return Object.defineProperty(t.exports,"native",{value:e}),e}}))}),e1={};m(e1,{Client:()=>ti,ClientBase:()=>tt.ClientBase,Connection:()=>tt.Connection,DatabaseError:()=>tt.DatabaseError,NeonDbError:()=>e3,Pool:()=>to,Query:()=>tt.Query,defaults:()=>tt.defaults,neon:()=>e8,neonConfig:()=>eI,types:()=>tt.types}),e.exports=v(e1),x();var e2=b(e0());eR(),x(),eS(),eR();var e6=b(Y()),e5=class extends Error{constructor(){super(...arguments),w(this,"name","NeonDbError"),w(this,"code",null),w(this,"sourceError")}};d(e5,"NeonDbError");var e3=e5,e4="transaction() expects an array of queries, or a function returning an array of queries";function e8(e,{arrayMode:t,fullResults:r,fetchOptions:i,isolationLevel:s,readOnly:n,deferrable:o,queryCallback:a,resultCallback:l}={}){let h;if(!e)throw Error("No database connection string was provided to `neon()`. Perhaps an environment variable has not been set?");try{h=ew(e)}catch{throw Error("Database connection string provided to `neon()` is not a valid URL. Connection string: "+String(e))}let{protocol:u,username:c,password:f,hostname:p,port:g,pathname:m}=h;if("postgres:"!==u&&"postgresql:"!==u||!c||!f||!p||!m)throw Error("Database connection string format for `neon()` should be: postgresql://user:password@host.tld/dbname?option=value");function y(e,...t){let r,i;if("string"==typeof e)r=e,i=t[1],t=t[0]??[];else{r="";for(let i=0;i<e.length;i++)r+=e[i],i<t.length&&(r+="$"+(i+1))}let s={query:r,params:t=t.map(e=>(0,e6.prepareValue)(e))};return a&&a(s),e7(b,s,i)}async function b(a,h){let u,c=i??{},{fetchEndpoint:f,fetchConnectionCache:d,fetchFunction:m}=eI,y="function"==typeof f?f(p,g):f,b=Array.isArray(a)?{queries:a}:a,v=t??!1,w=r??!1,S=s,_=n,E=o;void 0!==h&&(void 0!==h.arrayMode&&(v=h.arrayMode),void 0!==h.fullResults&&(w=h.fullResults),void 0!==h.fetchOptions&&(c={...c,...h.fetchOptions}),void 0!==h.isolationLevel&&(S=h.isolationLevel),void 0!==h.readOnly&&(_=h.readOnly),void 0!==h.deferrable&&(E=h.deferrable));let x={"Neon-Connection-String":e,"Neon-Raw-Text-Output":"true","Neon-Array-Mode":"true"};!0===d&&(x["Neon-Pool-Opt-In"]="true"),Array.isArray(a)&&(void 0!==S&&(x["Neon-Batch-Isolation-Level"]=S),void 0!==_&&(x["Neon-Batch-Read-Only"]=String(_)),void 0!==E&&(x["Neon-Batch-Deferrable"]=String(E)));try{u=await (m??fetch)(y,{method:"POST",body:JSON.stringify(b),headers:x,...c})}catch(t){let e=new e3(`Error connecting to data\
base: ${t.message}`);throw e.sourceError=t,e}if(u.ok){let e=await u.json();if(!Array.isArray(a))return e9(e,{arrayMode:v,fullResults:w,parameterizedQuery:a,resultCallback:l});{let t=e.results;if(!Array.isArray(t))throw new e3("Neon internal error: unexpected result format");return t.map((e,t)=>e9(e,{arrayMode:v,fullResults:w,parameterizedQuery:a[t],resultCallback:l}))}}{let{status:e}=u;if(400===e){let{message:e,code:t}=await u.json(),r=new e3(e);throw r.code=t,r}{let t=await u.text();throw new e3(`Server error (HTTP status ${e}): ${t}`)}}}return d(y,"resolve"),y.transaction=async(e,t)=>{if("function"==typeof e&&(e=e(y)),!Array.isArray(e))throw Error(e4);return b(e.map(e=>{if("NeonQueryPromise"!==e[Symbol.toStringTag])throw Error(e4);return e.parameterizedQuery}),t)},d(b,"execute"),y}function e7(e,t,r){return{[Symbol.toStringTag]:"NeonQueryPromise",parameterizedQuery:t,opts:r,then:(i,s)=>e(t,r).then(i,s),catch:i=>e(t,r).catch(i),finally:i=>e(t,r).finally(i)}}function e9(e,{arrayMode:t,fullResults:r,parameterizedQuery:i,resultCallback:s}){let n=e.fields.map(e=>e.name),o=e.fields.map(e=>tt.types.getTypeParser(e.dataTypeID)),a=!0===t?e.rows.map(e=>e.map((e,t)=>null===e?null:o[t](e))):e.rows.map(e=>Object.fromEntries(e.map((e,t)=>[n[t],null===e?null:o[t](e)])));return s&&s(i,e,a,{arrayMode:t,fullResults:r}),r?(e.viaNeonFetch=!0,e.rowAsArray=t,e.rows=a,e):a}d(e8,"neon"),d(e7,"createNeonQueryPromise"),d(e9,"processQueryResult");var te=b(eE()),tt=b(e0()),tr=class extends e2.Client{constructor(e){super(e),this.config=e}get neonConfig(){return this.connection.stream}connect(e){let{neonConfig:t}=this;t.forceDisablePgSSL&&(this.ssl=this.connection.ssl=!1),this.ssl&&t.useSecureWebSocket&&console.warn("SSL is enabled for both Postgres (e.g. ?sslmode=require in the connection string + forceDisablePgSSL = false) and the WebSocket tunnel (useSecureWebSocket = true). Double encryption will increase latency and CPU usage. It may be appropriate to disable SSL in the Postgres connection parameters or set forceDisablePgSSL = true.");let r=this.config?.host!==void 0||this.config?.connectionString!==void 0||void 0!==n.env.PGHOST,i=n.env.USER??n.env.USERNAME;if(!r&&"localhost"===this.host&&this.user===i&&this.database===i&&null===this.password)throw Error(`No datab\
ase host or connection string was set, and key parameters have default values (h\
ost: localhost, user: ${i}, db: ${i}, password: null). Is an environment variabl\
e missing? Alternatively, if you intended to connect with these parameters, plea\
se set the host to 'localhost' explicitly.`);let s=super.connect(e),o=t.pipelineTLS&&this.ssl,a="password"===t.pipelineConnect;if(!o&&!t.pipelineConnect)return s;let l=this.connection;if(o&&l.on("connect",()=>l.stream.emit("data","S")),a){l.removeAllListeners("authenticationCleartextPassword"),l.removeAllListeners("readyForQuery"),l.once("readyForQuery",()=>l.on("readyForQuery",this._handleReadyForQuery.bind(this)));let e=this.ssl?"sslconnect":"connect";l.on(e,()=>{this._handleAuthCleartextPassword(),this._handleReadyForQuery()})}return s}async _handleAuthSASLContinue(e){let t=this.saslSession,r=this.password,n=e.data;if("SASLInitialResponse"!==t.message||"string"!=typeof r||"string"!=typeof n)throw Error("SASL: protocol error");let o=Object.fromEntries(n.split(",").map(e=>{if(!/^.=/.test(e))throw Error("SASL: Invalid attribute pair entry");return[e[0],e.substring(2)]})),a=o.r,l=o.s,h=o.i;if(!a||!/^[!-+--~]+$/.test(a))throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce missing/unprintable");if(!l||!/^(?:[a-zA-Z0-9+/]{4})*(?:[a-zA-Z0-9+/]{2}==|[a-zA-Z0-9+/]{3}=)?$/.test(l))throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt missing/not base64");if(!h||!/^[1-9][0-9]*$/.test(h))throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: missing/invalid iteration count");if(!a.startsWith(t.clientNonce))throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce does not start with client nonce");if(a.length===t.clientNonce.length)throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce is too short");let u=parseInt(h,10),c=s.from(l,"base64"),f=new TextEncoder,d=f.encode(r),p=await i.subtle.importKey("raw",d,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),g=new Uint8Array(await i.subtle.sign("HMAC",p,s.concat([c,s.from([0,0,0,1])]))),m=g;for(var y=0;y<u-1;y++)g=new Uint8Array(await i.subtle.sign("HMAC",p,g)),m=s.from(m.map((e,t)=>m[t]^g[t]));let b=m,v=await i.subtle.importKey("raw",b,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),w=new Uint8Array(await i.subtle.sign("HMAC",v,f.encode("Client Key"))),S=await i.subtle.digest("SHA-256",w),_="n=*,r="+t.clientNonce,E="r="+a+",s="+l+",i="+u,x="c=biws,r="+a,C=_+","+E+","+x,A=await i.subtle.importKey("raw",S,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);var P=new Uint8Array(await i.subtle.sign("HMAC",A,f.encode(C))),T=s.from(w.map((e,t)=>w[t]^P[t])).toString("base64");let L=await i.subtle.importKey("raw",b,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),I=await i.subtle.sign("HMAC",L,f.encode("Server Key")),R=await i.subtle.importKey("raw",I,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);var k=s.from(await i.subtle.sign("HMAC",R,f.encode(C)));t.message="SASLResponse",t.serverSignature=k.toString("base64"),t.response=x+",p="+T,this.connection.sendSCRAMClientFinalMessage(this.saslSession.response)}};d(tr,"NeonClient");var ti=tr;function ts(e,t){let r,i;return t?{callback:t,result:void 0}:{callback:d(function(e,t){e?r(e):i(t)},"cb"),result:new e(function(e,t){i=e,r=t})}}d(ts,"promisify");var tn=class extends e2.Pool{constructor(){super(...arguments),w(this,"Client",ti),w(this,"hasFetchUnsupportedListeners",!1)}on(e,t){return"error"!==e&&(this.hasFetchUnsupportedListeners=!0),super.on(e,t)}query(e,t,r){if(!eI.poolQueryViaFetch||this.hasFetchUnsupportedListeners||"function"==typeof e)return super.query(e,t,r);"function"==typeof t&&(r=t,t=void 0);let i=ts(this.Promise,r);r=i.callback;try{let i=new te.default(this.options),s=encodeURIComponent,n=encodeURI,o=`postgresql://${s(i.user)}:${s(i.password)}@${s(i.host)}/${n(i.database)}`,a="string"==typeof e?e:e.text,l=t??e.values??[];e8(o,{fullResults:!0,arrayMode:"array"===e.rowMode})(a,l).then(e=>r(void 0,e)).catch(e=>r(e))}catch(e){r(e)}return i.result}};d(tn,"NeonPool");var to=tn;/*! Bundled license information:

ieee754/index.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

buffer/index.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)
*/},668:e=>{"use strict";var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,n={};function o(e){var t;let r=["path"in e&&e.path&&`Path=${e.path}`,"expires"in e&&(e.expires||0===e.expires)&&`Expires=${("number"==typeof e.expires?new Date(e.expires):e.expires).toUTCString()}`,"maxAge"in e&&"number"==typeof e.maxAge&&`Max-Age=${e.maxAge}`,"domain"in e&&e.domain&&`Domain=${e.domain}`,"secure"in e&&e.secure&&"Secure","httpOnly"in e&&e.httpOnly&&"HttpOnly","sameSite"in e&&e.sameSite&&`SameSite=${e.sameSite}`,"priority"in e&&e.priority&&`Priority=${e.priority}`].filter(Boolean);return`${e.name}=${encodeURIComponent(null!=(t=e.value)?t:"")}; ${r.join("; ")}`}function a(e){let t=new Map;for(let r of e.split(/; */)){if(!r)continue;let e=r.indexOf("=");if(-1===e){t.set(r,"true");continue}let[i,s]=[r.slice(0,e),r.slice(e+1)];try{t.set(i,decodeURIComponent(null!=s?s:"true"))}catch{}}return t}function l(e){var t,r;if(!e)return;let[[i,s],...n]=a(e),{domain:o,expires:l,httponly:c,maxage:f,path:d,samesite:p,secure:g,priority:m}=Object.fromEntries(n.map(([e,t])=>[e.toLowerCase(),t])),y={name:i,value:decodeURIComponent(s),domain:o,...l&&{expires:new Date(l)},...c&&{httpOnly:!0},..."string"==typeof f&&{maxAge:Number(f)},path:d,...p&&{sameSite:h.includes(t=(t=p).toLowerCase())?t:void 0},...g&&{secure:!0},...m&&{priority:u.includes(r=(r=m).toLowerCase())?r:void 0}};return function(e){let t={};for(let r in e)e[r]&&(t[r]=e[r]);return t}(y)}((e,r)=>{for(var i in r)t(e,i,{get:r[i],enumerable:!0})})(n,{RequestCookies:()=>c,ResponseCookies:()=>f,parseCookie:()=>a,parseSetCookie:()=>l,stringifyCookie:()=>o}),e.exports=((e,n,o,a)=>{if(n&&"object"==typeof n||"function"==typeof n)for(let o of i(n))s.call(e,o)||void 0===o||t(e,o,{get:()=>n[o],enumerable:!(a=r(n,o))||a.enumerable});return e})(t({},"__esModule",{value:!0}),n);var h=["strict","lax","none"],u=["low","medium","high"],c=class{constructor(e){this._parsed=new Map,this._headers=e;let t=e.get("cookie");if(t){let e=a(t);for(let[t,r]of e)this._parsed.set(t,{name:t,value:r})}}[Symbol.iterator](){return this._parsed[Symbol.iterator]()}get size(){return this._parsed.size}get(...e){let t="string"==typeof e[0]?e[0]:e[0].name;return this._parsed.get(t)}getAll(...e){var t;let r=Array.from(this._parsed);if(!e.length)return r.map(([e,t])=>t);let i="string"==typeof e[0]?e[0]:null==(t=e[0])?void 0:t.name;return r.filter(([e])=>e===i).map(([e,t])=>t)}has(e){return this._parsed.has(e)}set(...e){let[t,r]=1===e.length?[e[0].name,e[0].value]:e,i=this._parsed;return i.set(t,{name:t,value:r}),this._headers.set("cookie",Array.from(i).map(([e,t])=>o(t)).join("; ")),this}delete(e){let t=this._parsed,r=Array.isArray(e)?e.map(e=>t.delete(e)):t.delete(e);return this._headers.set("cookie",Array.from(t).map(([e,t])=>o(t)).join("; ")),r}clear(){return this.delete(Array.from(this._parsed.keys())),this}[Symbol.for("edge-runtime.inspect.custom")](){return`RequestCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}toString(){return[...this._parsed.values()].map(e=>`${e.name}=${encodeURIComponent(e.value)}`).join("; ")}},f=class{constructor(e){var t,r,i;this._parsed=new Map,this._headers=e;let s=null!=(i=null!=(r=null==(t=e.getSetCookie)?void 0:t.call(e))?r:e.get("set-cookie"))?i:[],n=Array.isArray(s)?s:function(e){if(!e)return[];var t,r,i,s,n,o=[],a=0;function l(){for(;a<e.length&&/\s/.test(e.charAt(a));)a+=1;return a<e.length}for(;a<e.length;){for(t=a,n=!1;l();)if(","===(r=e.charAt(a))){for(i=a,a+=1,l(),s=a;a<e.length&&"="!==(r=e.charAt(a))&&";"!==r&&","!==r;)a+=1;a<e.length&&"="===e.charAt(a)?(n=!0,a=s,o.push(e.substring(t,i)),t=a):a=i+1}else a+=1;(!n||a>=e.length)&&o.push(e.substring(t,e.length))}return o}(s);for(let e of n){let t=l(e);t&&this._parsed.set(t.name,t)}}get(...e){let t="string"==typeof e[0]?e[0]:e[0].name;return this._parsed.get(t)}getAll(...e){var t;let r=Array.from(this._parsed.values());if(!e.length)return r;let i="string"==typeof e[0]?e[0]:null==(t=e[0])?void 0:t.name;return r.filter(e=>e.name===i)}has(e){return this._parsed.has(e)}set(...e){let[t,r,i]=1===e.length?[e[0].name,e[0].value,e[0]]:e,s=this._parsed;return s.set(t,function(e={name:"",value:""}){return"number"==typeof e.expires&&(e.expires=new Date(e.expires)),e.maxAge&&(e.expires=new Date(Date.now()+1e3*e.maxAge)),(null===e.path||void 0===e.path)&&(e.path="/"),e}({name:t,value:r,...i})),function(e,t){for(let[,r]of(t.delete("set-cookie"),e)){let e=o(r);t.append("set-cookie",e)}}(s,this._headers),this}delete(...e){let[t,r,i]="string"==typeof e[0]?[e[0]]:[e[0].name,e[0].path,e[0].domain];return this.set({name:t,path:r,domain:i,value:"",expires:new Date(0)})}[Symbol.for("edge-runtime.inspect.custom")](){return`ResponseCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}toString(){return[...this._parsed.values()].map(o).join("; ")}}},565:e=>{"use strict";(()=>{"undefined"!=typeof __nccwpck_require__&&(__nccwpck_require__.ab="//");var t={};(()=>{/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */t.parse=function(t,r){if("string"!=typeof t)throw TypeError("argument str must be a string");for(var s={},n=t.split(i),o=(r||{}).decode||e,a=0;a<n.length;a++){var l=n[a],h=l.indexOf("=");if(!(h<0)){var u=l.substr(0,h).trim(),c=l.substr(++h,l.length).trim();'"'==c[0]&&(c=c.slice(1,-1)),void 0==s[u]&&(s[u]=function(e,t){try{return t(e)}catch(t){return e}}(c,o))}}return s},t.serialize=function(e,t,i){var n=i||{},o=n.encode||r;if("function"!=typeof o)throw TypeError("option encode is invalid");if(!s.test(e))throw TypeError("argument name is invalid");var a=o(t);if(a&&!s.test(a))throw TypeError("argument val is invalid");var l=e+"="+a;if(null!=n.maxAge){var h=n.maxAge-0;if(isNaN(h)||!isFinite(h))throw TypeError("option maxAge is invalid");l+="; Max-Age="+Math.floor(h)}if(n.domain){if(!s.test(n.domain))throw TypeError("option domain is invalid");l+="; Domain="+n.domain}if(n.path){if(!s.test(n.path))throw TypeError("option path is invalid");l+="; Path="+n.path}if(n.expires){if("function"!=typeof n.expires.toUTCString)throw TypeError("option expires is invalid");l+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(l+="; HttpOnly"),n.secure&&(l+="; Secure"),n.sameSite)switch("string"==typeof n.sameSite?n.sameSite.toLowerCase():n.sameSite){case!0:case"strict":l+="; SameSite=Strict";break;case"lax":l+="; SameSite=Lax";break;case"none":l+="; SameSite=None";break;default:throw TypeError("option sameSite is invalid")}return l};var e=decodeURIComponent,r=encodeURIComponent,i=/; */,s=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/})(),e.exports=t})()},695:e=>{"use strict";(()=>{var t={806:(e,t,r)=>{let i=r(190),s=Symbol("max"),n=Symbol("length"),o=Symbol("lengthCalculator"),a=Symbol("allowStale"),l=Symbol("maxAge"),h=Symbol("dispose"),u=Symbol("noDisposeOnSet"),c=Symbol("lruList"),f=Symbol("cache"),d=Symbol("updateAgeOnGet"),p=()=>1;class g{constructor(e){if("number"==typeof e&&(e={max:e}),e||(e={}),e.max&&("number"!=typeof e.max||e.max<0))throw TypeError("max must be a non-negative number");this[s]=e.max||1/0;let t=e.length||p;if(this[o]="function"!=typeof t?p:t,this[a]=e.stale||!1,e.maxAge&&"number"!=typeof e.maxAge)throw TypeError("maxAge must be a number");this[l]=e.maxAge||0,this[h]=e.dispose,this[u]=e.noDisposeOnSet||!1,this[d]=e.updateAgeOnGet||!1,this.reset()}set max(e){if("number"!=typeof e||e<0)throw TypeError("max must be a non-negative number");this[s]=e||1/0,b(this)}get max(){return this[s]}set allowStale(e){this[a]=!!e}get allowStale(){return this[a]}set maxAge(e){if("number"!=typeof e)throw TypeError("maxAge must be a non-negative number");this[l]=e,b(this)}get maxAge(){return this[l]}set lengthCalculator(e){"function"!=typeof e&&(e=p),e!==this[o]&&(this[o]=e,this[n]=0,this[c].forEach(e=>{e.length=this[o](e.value,e.key),this[n]+=e.length})),b(this)}get lengthCalculator(){return this[o]}get length(){return this[n]}get itemCount(){return this[c].length}rforEach(e,t){t=t||this;for(let r=this[c].tail;null!==r;){let i=r.prev;S(this,e,r,t),r=i}}forEach(e,t){t=t||this;for(let r=this[c].head;null!==r;){let i=r.next;S(this,e,r,t),r=i}}keys(){return this[c].toArray().map(e=>e.key)}values(){return this[c].toArray().map(e=>e.value)}reset(){this[h]&&this[c]&&this[c].length&&this[c].forEach(e=>this[h](e.key,e.value)),this[f]=new Map,this[c]=new i,this[n]=0}dump(){return this[c].map(e=>!y(this,e)&&{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[c]}set(e,t,r){if((r=r||this[l])&&"number"!=typeof r)throw TypeError("maxAge must be a number");let i=r?Date.now():0,a=this[o](t,e);if(this[f].has(e)){if(a>this[s])return v(this,this[f].get(e)),!1;let o=this[f].get(e),l=o.value;return this[h]&&!this[u]&&this[h](e,l.value),l.now=i,l.maxAge=r,l.value=t,this[n]+=a-l.length,l.length=a,this.get(e),b(this),!0}let d=new w(e,t,a,i,r);return d.length>this[s]?(this[h]&&this[h](e,t),!1):(this[n]+=d.length,this[c].unshift(d),this[f].set(e,this[c].head),b(this),!0)}has(e){if(!this[f].has(e))return!1;let t=this[f].get(e).value;return!y(this,t)}get(e){return m(this,e,!0)}peek(e){return m(this,e,!1)}pop(){let e=this[c].tail;return e?(v(this,e),e.value):null}del(e){v(this,this[f].get(e))}load(e){this.reset();let t=Date.now();for(let r=e.length-1;r>=0;r--){let i=e[r],s=i.e||0;if(0===s)this.set(i.k,i.v);else{let e=s-t;e>0&&this.set(i.k,i.v,e)}}}prune(){this[f].forEach((e,t)=>m(this,t,!1))}}let m=(e,t,r)=>{let i=e[f].get(t);if(i){let t=i.value;if(y(e,t)){if(v(e,i),!e[a])return}else r&&(e[d]&&(i.value.now=Date.now()),e[c].unshiftNode(i));return t.value}},y=(e,t)=>{if(!t||!t.maxAge&&!e[l])return!1;let r=Date.now()-t.now;return t.maxAge?r>t.maxAge:e[l]&&r>e[l]},b=e=>{if(e[n]>e[s])for(let t=e[c].tail;e[n]>e[s]&&null!==t;){let r=t.prev;v(e,t),t=r}},v=(e,t)=>{if(t){let r=t.value;e[h]&&e[h](r.key,r.value),e[n]-=r.length,e[f].delete(r.key),e[c].removeNode(t)}};class w{constructor(e,t,r,i,s){this.key=e,this.value=t,this.length=r,this.now=i,this.maxAge=s||0}}let S=(e,t,r,i)=>{let s=r.value;y(e,s)&&(v(e,r),e[a]||(s=void 0)),s&&t.call(i,s.value,s.key,e)};e.exports=g},76:e=>{e.exports=function(e){e.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}},190:(e,t,r)=>{function i(e){var t=this;if(t instanceof i||(t=new i),t.tail=null,t.head=null,t.length=0,e&&"function"==typeof e.forEach)e.forEach(function(e){t.push(e)});else if(arguments.length>0)for(var r=0,s=arguments.length;r<s;r++)t.push(arguments[r]);return t}function Node(e,t,r,i){if(!(this instanceof Node))return new Node(e,t,r,i);this.list=i,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}e.exports=i,i.Node=Node,i.create=i,i.prototype.removeNode=function(e){if(e.list!==this)throw Error("removing node which does not belong to this list");var t=e.next,r=e.prev;return t&&(t.prev=r),r&&(r.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=r),e.list.length--,e.next=null,e.prev=null,e.list=null,t},i.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}},i.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}},i.prototype.push=function(){for(var e,t=0,r=arguments.length;t<r;t++)e=arguments[t],this.tail=new Node(e,this.tail,null,this),this.head||(this.head=this.tail),this.length++;return this.length},i.prototype.unshift=function(){for(var e,t=0,r=arguments.length;t<r;t++)e=arguments[t],this.head=new Node(e,null,this.head,this),this.tail||(this.tail=this.head),this.length++;return this.length},i.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}},i.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}},i.prototype.forEach=function(e,t){t=t||this;for(var r=this.head,i=0;null!==r;i++)e.call(t,r.value,i,this),r=r.next},i.prototype.forEachReverse=function(e,t){t=t||this;for(var r=this.tail,i=this.length-1;null!==r;i--)e.call(t,r.value,i,this),r=r.prev},i.prototype.get=function(e){for(var t=0,r=this.head;null!==r&&t<e;t++)r=r.next;if(t===e&&null!==r)return r.value},i.prototype.getReverse=function(e){for(var t=0,r=this.tail;null!==r&&t<e;t++)r=r.prev;if(t===e&&null!==r)return r.value},i.prototype.map=function(e,t){t=t||this;for(var r=new i,s=this.head;null!==s;)r.push(e.call(t,s.value,this)),s=s.next;return r},i.prototype.mapReverse=function(e,t){t=t||this;for(var r=new i,s=this.tail;null!==s;)r.push(e.call(t,s.value,this)),s=s.prev;return r},i.prototype.reduce=function(e,t){var r,i=this.head;if(arguments.length>1)r=t;else if(this.head)i=this.head.next,r=this.head.value;else throw TypeError("Reduce of empty list with no initial value");for(var s=0;null!==i;s++)r=e(r,i.value,s),i=i.next;return r},i.prototype.reduceReverse=function(e,t){var r,i=this.tail;if(arguments.length>1)r=t;else if(this.tail)i=this.tail.prev,r=this.tail.value;else throw TypeError("Reduce of empty list with no initial value");for(var s=this.length-1;null!==i;s--)r=e(r,i.value,s),i=i.prev;return r},i.prototype.toArray=function(){for(var e=Array(this.length),t=0,r=this.head;null!==r;t++)e[t]=r.value,r=r.next;return e},i.prototype.toArrayReverse=function(){for(var e=Array(this.length),t=0,r=this.tail;null!==r;t++)e[t]=r.value,r=r.prev;return e},i.prototype.slice=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var r=new i;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var s=0,n=this.head;null!==n&&s<e;s++)n=n.next;for(;null!==n&&s<t;s++,n=n.next)r.push(n.value);return r},i.prototype.sliceReverse=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var r=new i;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var s=this.length,n=this.tail;null!==n&&s>t;s--)n=n.prev;for(;null!==n&&s>e;s--,n=n.prev)r.push(n.value);return r},i.prototype.splice=function(e,t){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,i=this.head;null!==i&&r<e;r++)i=i.next;for(var s=[],r=0;i&&r<t;r++)s.push(i.value),i=this.removeNode(i);null===i&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var r=2;r<arguments.length;r++)i=function(e,t,r){var i=t===e.head?new Node(r,null,t,e):new Node(r,t,t.next,e);return null===i.next&&(e.tail=i),null===i.prev&&(e.head=i),e.length++,i}(this,i,arguments[r]);return s},i.prototype.reverse=function(){for(var e=this.head,t=this.tail,r=e;null!==r;r=r.prev){var i=r.prev;r.prev=r.next,r.next=i}return this.head=t,this.tail=e,this};try{r(76)(i)}catch(e){}}},r={};function i(e){var s=r[e];if(void 0!==s)return s.exports;var n=r[e]={exports:{}},o=!0;try{t[e](n,n.exports,i),o=!1}finally{o&&delete r[e]}return n.exports}i.ab="//";var s=i(806);e.exports=s})()},198:e=>{"use strict";!function(){var t={114:function(e){function t(e){if("string"!=typeof e)throw TypeError("Path must be a string. Received "+JSON.stringify(e))}function r(e,t){for(var r,i="",s=0,n=-1,o=0,a=0;a<=e.length;++a){if(a<e.length)r=e.charCodeAt(a);else if(47===r)break;else r=47;if(47===r){if(n===a-1||1===o);else if(n!==a-1&&2===o){if(i.length<2||2!==s||46!==i.charCodeAt(i.length-1)||46!==i.charCodeAt(i.length-2)){if(i.length>2){var l=i.lastIndexOf("/");if(l!==i.length-1){-1===l?(i="",s=0):s=(i=i.slice(0,l)).length-1-i.lastIndexOf("/"),n=a,o=0;continue}}else if(2===i.length||1===i.length){i="",s=0,n=a,o=0;continue}}t&&(i.length>0?i+="/..":i="..",s=2)}else i.length>0?i+="/"+e.slice(n+1,a):i=e.slice(n+1,a),s=a-n-1;n=a,o=0}else 46===r&&-1!==o?++o:o=-1}return i}var i={resolve:function(){for(var e,i,s="",n=!1,o=arguments.length-1;o>=-1&&!n;o--)o>=0?i=arguments[o]:(void 0===e&&(e=""),i=e),t(i),0!==i.length&&(s=i+"/"+s,n=47===i.charCodeAt(0));return(s=r(s,!n),n)?s.length>0?"/"+s:"/":s.length>0?s:"."},normalize:function(e){if(t(e),0===e.length)return".";var i=47===e.charCodeAt(0),s=47===e.charCodeAt(e.length-1);return(0!==(e=r(e,!i)).length||i||(e="."),e.length>0&&s&&(e+="/"),i)?"/"+e:e},isAbsolute:function(e){return t(e),e.length>0&&47===e.charCodeAt(0)},join:function(){if(0==arguments.length)return".";for(var e,r=0;r<arguments.length;++r){var s=arguments[r];t(s),s.length>0&&(void 0===e?e=s:e+="/"+s)}return void 0===e?".":i.normalize(e)},relative:function(e,r){if(t(e),t(r),e===r||(e=i.resolve(e))===(r=i.resolve(r)))return"";for(var s=1;s<e.length&&47===e.charCodeAt(s);++s);for(var n=e.length,o=n-s,a=1;a<r.length&&47===r.charCodeAt(a);++a);for(var l=r.length-a,h=o<l?o:l,u=-1,c=0;c<=h;++c){if(c===h){if(l>h){if(47===r.charCodeAt(a+c))return r.slice(a+c+1);if(0===c)return r.slice(a+c)}else o>h&&(47===e.charCodeAt(s+c)?u=c:0===c&&(u=0));break}var f=e.charCodeAt(s+c);if(f!==r.charCodeAt(a+c))break;47===f&&(u=c)}var d="";for(c=s+u+1;c<=n;++c)(c===n||47===e.charCodeAt(c))&&(0===d.length?d+="..":d+="/..");return d.length>0?d+r.slice(a+u):(a+=u,47===r.charCodeAt(a)&&++a,r.slice(a))},_makeLong:function(e){return e},dirname:function(e){if(t(e),0===e.length)return".";for(var r=e.charCodeAt(0),i=47===r,s=-1,n=!0,o=e.length-1;o>=1;--o)if(47===(r=e.charCodeAt(o))){if(!n){s=o;break}}else n=!1;return -1===s?i?"/":".":i&&1===s?"//":e.slice(0,s)},basename:function(e,r){if(void 0!==r&&"string"!=typeof r)throw TypeError('"ext" argument must be a string');t(e);var i,s=0,n=-1,o=!0;if(void 0!==r&&r.length>0&&r.length<=e.length){if(r.length===e.length&&r===e)return"";var a=r.length-1,l=-1;for(i=e.length-1;i>=0;--i){var h=e.charCodeAt(i);if(47===h){if(!o){s=i+1;break}}else -1===l&&(o=!1,l=i+1),a>=0&&(h===r.charCodeAt(a)?-1==--a&&(n=i):(a=-1,n=l))}return s===n?n=l:-1===n&&(n=e.length),e.slice(s,n)}for(i=e.length-1;i>=0;--i)if(47===e.charCodeAt(i)){if(!o){s=i+1;break}}else -1===n&&(o=!1,n=i+1);return -1===n?"":e.slice(s,n)},extname:function(e){t(e);for(var r=-1,i=0,s=-1,n=!0,o=0,a=e.length-1;a>=0;--a){var l=e.charCodeAt(a);if(47===l){if(!n){i=a+1;break}continue}-1===s&&(n=!1,s=a+1),46===l?-1===r?r=a:1!==o&&(o=1):-1!==r&&(o=-1)}return -1===r||-1===s||0===o||1===o&&r===s-1&&r===i+1?"":e.slice(r,s)},format:function(e){var t,r;if(null===e||"object"!=typeof e)throw TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return t=e.dir||e.root,r=e.base||(e.name||"")+(e.ext||""),t?t===e.root?t+r:t+"/"+r:r},parse:function(e){t(e);var r,i={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return i;var s=e.charCodeAt(0),n=47===s;n?(i.root="/",r=1):r=0;for(var o=-1,a=0,l=-1,h=!0,u=e.length-1,c=0;u>=r;--u){if(47===(s=e.charCodeAt(u))){if(!h){a=u+1;break}continue}-1===l&&(h=!1,l=u+1),46===s?-1===o?o=u:1!==c&&(c=1):-1!==o&&(c=-1)}return -1===o||-1===l||0===c||1===c&&o===l-1&&o===a+1?-1!==l&&(0===a&&n?i.base=i.name=e.slice(1,l):i.base=i.name=e.slice(a,l)):(0===a&&n?(i.name=e.slice(1,o),i.base=e.slice(1,l)):(i.name=e.slice(a,o),i.base=e.slice(a,l)),i.ext=e.slice(o,l)),a>0?i.dir=e.slice(0,a-1):n&&(i.dir="/"),i},sep:"/",delimiter:":",win32:null,posix:null};i.posix=i,e.exports=i}},r={};function i(e){var s=r[e];if(void 0!==s)return s.exports;var n=r[e]={exports:{}},o=!0;try{t[e](n,n.exports,i),o=!1}finally{o&&delete r[e]}return n.exports}i.ab="//";var s=i(114);e.exports=s}()},395:(e,t,r)=>{"use strict";let i;i=r(198),e.exports=i},985:e=>{"use strict";e.exports=["chrome 64","edge 79","firefox 67","opera 51","safari 12"]}},e=>{var t=e(e.s=714);(_ENTRIES="undefined"==typeof _ENTRIES?{}:_ENTRIES)["middleware_pages/api/users"]=t}]);
//# sourceMappingURL=users.js.map;
  export default (function () {
    const module = { exports: {}, loaded: false };
    const fn = (function(module,exports) {var d=Object.defineProperty;var m=e=>d(e,"__esModule",{value:!0});var y=(e,r)=>{m(e);for(var t in r)d(e,t,{get:r[t],enumerable:!0})};y(exports,{default:()=>x});function h(e){let r={};return e&&e.forEach((t,i)=>{r[i]=t,i.toLowerCase()==="set-cookie"&&(r[i]=C(t))}),r}function C(e){let r=[],t=0,i,a,p,n,s;function c(){for(;t<e.length&&/\s/.test(e.charAt(t));)t+=1;return t<e.length}function o(){return a=e.charAt(t),a!=="="&&a!==";"&&a!==","}for(;t<e.length;){for(i=t,s=!1;c();)if(a=e.charAt(t),a===","){for(p=t,t+=1,c(),n=t;t<e.length&&o();)t+=1;t<e.length&&e.charAt(t)==="="?(s=!0,t=n,r.push(e.substring(i,p)),i=t):t=p+1}else t+=1;(!s||t>=e.length)&&r.push(e.substring(i,e.length))}return r}function x(e){let r=e.staticRoutes.map(i=>({regexp:new RegExp(i.namedRegex),page:i.page})),t=e.dynamicRoutes?.map(i=>({regexp:new RegExp(i.namedRegex),page:i.page}))||[];return async function(a,p){let n=new URL(a.url).pathname,s={};if(e.nextConfig?.basePath&&n.startsWith(e.nextConfig.basePath)&&(n=n.replace(e.nextConfig.basePath,"")||"/"),e.nextConfig?.i18n)for(let o of e.nextConfig.i18n.locales){let g=new RegExp(`^/${o}($|/)`,"i");if(n.match(g)){n=n.replace(g,"/")||"/";break}}for(let o of r)if(o.regexp.exec(n)){s.name=o.page;break}if(!s.name){let o=R(n);for(let g of t||[]){if(o&&!R(g.page))continue;let f=g.regexp.exec(n);if(f){s={name:g.page,params:f.groups};break}}}let c=await _ENTRIES[`middleware_${e.name}`].default.call({},{request:{url:a.url,method:a.method,headers:h(a.headers),ip:u(a.headers,l.Ip),geo:{city:u(a.headers,l.City,!0),country:u(a.headers,l.Country,!0),latitude:u(a.headers,l.Latitude),longitude:u(a.headers,l.Longitude),region:u(a.headers,l.Region,!0)},nextConfig:e.nextConfig,page:s,body:a.body}});return p.waitUntil(c.waitUntil),c.response}}function u(e,r,t=!1){let i=e.get(r)||void 0;return t&&i?decodeURIComponent(i):i}function R(e){return e==="/api"||e.startsWith("/api/")}var l;(function(n){n.City="x-vercel-ip-city",n.Country="x-vercel-ip-country",n.Ip="x-real-ip",n.Latitude="x-vercel-ip-latitude",n.Longitude="x-vercel-ip-longitude",n.Region="x-vercel-ip-country-region"})(l||(l={}));

});
    fn(module, module.exports);
    return module.exports;
  }).call({}).default(
    {"name":"pages/api/users","staticRoutes":[],"dynamicRoutes":[],"nextConfig":{"basePath":""}}
  )
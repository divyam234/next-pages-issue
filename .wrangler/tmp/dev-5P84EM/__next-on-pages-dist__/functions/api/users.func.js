globalThis._ENTRIES={};self.__PRERENDER_MANIFEST='{"version":4,"routes":{},"dynamicRoutes":{},"preview":{"previewModeId":"a7303520c3fb6eb76690a93223eb2e1b","previewModeSigningKey":"4496751e24e2fe66a4f7f8d8b02d85ddcf09fcfa24346a0051835853e9cb08f6","previewModeEncryptionKey":"e03c2efd6d497fa4ff29c7fc9158b31a8957783e475320d048e7aee439189cf1"},"notFoundRoutes":[]}';(()=>{"use strict";var Xe={},We={};function Ce(he){var oe=We[he];if(oe!==void 0)return oe.exports;var ee=We[he]={exports:{}},Re=!0;try{Xe[he](ee,ee.exports,Ce),Re=!1}finally{Re&&delete We[he]}return ee.exports}Ce.m=Xe,(()=>{var he=[];Ce.O=(oe,ee,Re,Ae)=>{if(ee){Ae=Ae||0;for(var ae=he.length;ae>0&&he[ae-1][2]>Ae;ae--)he[ae]=he[ae-1];he[ae]=[ee,Re,Ae];return}for(var F=1/0,ae=0;ae<he.length;ae++){for(var[ee,Re,Ae]=he[ae],P=!0,T=0;T<ee.length;T++)(Ae&!1||F>=Ae)&&Object.keys(Ce.O).every(ue=>Ce.O[ue](ee[T]))?ee.splice(T--,1):(P=!1,Ae<F&&(F=Ae));if(P){he.splice(ae--,1);var I=Re();I!==void 0&&(oe=I)}}return oe}})(),Ce.n=he=>{var oe=he&&he.__esModule?()=>he.default:()=>he;return Ce.d(oe,{a:oe}),oe},Ce.d=(he,oe)=>{for(var ee in oe)Ce.o(oe,ee)&&!Ce.o(he,ee)&&Object.defineProperty(he,ee,{enumerable:!0,get:oe[ee]})},Ce.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),Ce.o=(he,oe)=>Object.prototype.hasOwnProperty.call(he,oe),Ce.r=he=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(he,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(he,"__esModule",{value:!0})},(()=>{var he={993:0};Ce.O.j=Re=>he[Re]===0;var oe=(Re,Ae)=>{var[ae,F,P]=Ae,T,I,i=0;if(ae.some(j=>he[j]!==0)){for(T in F)Ce.o(F,T)&&(Ce.m[T]=F[T]);if(P)var N=P(Ce)}for(Re&&Re(Ae);i<ae.length;i++)I=ae[i],Ce.o(he,I)&&he[I]&&he[I][0](),he[I]=0;return Ce.O(N)},ee=self.webpackChunk_N_E=self.webpackChunk_N_E||[];ee.forEach(oe.bind(null,0)),ee.push=oe.bind(null,ee.push.bind(ee))})()})();(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[829],{714:(Xe,We,Ce)=>{"use strict";let he,oe,ee,Re,Ae,ae,F;Ce.r(We),Ce.d(We,{default:()=>ms});var P,T={};async function I(){if("_ENTRIES"in globalThis&&_ENTRIES.middleware_instrumentation&&_ENTRIES.middleware_instrumentation.register)try{await _ENTRIES.middleware_instrumentation.register()}catch(d){throw d.message=`An error occurred while loading instrumentation hook: ${d.message}`,d}}Ce.r(T),Ce.d(T,{users:()=>kr});let i=null;function N(){return i||(i=I()),i}function j(d){return`The edge runtime does not support Node.js '${d}' module.
Learn More: https://nextjs.org/docs/messages/node-module-in-edge-runtime`}process!==Ce.g.process&&(process.env=Ce.g.process.env,Ce.g.process=process),Object.defineProperty(globalThis,"__import_unsupported",{value:function(d){let e=new Proxy(function(){},{get(t,o){if(o==="then")return{};throw Error(j(d))},construct(){throw Error(j(d))},apply(t,o,b){if(typeof b[0]=="function")return b[0](e);throw Error(j(d))}});return new Proxy({},{get:()=>e})},enumerable:!1,configurable:!0}),N();class H extends Error{constructor({page:e}){super(`The middleware "${e}" accepts an async API directly with the form:
  
  export function middleware(request, event) {
    return NextResponse.redirect('/new-location')
  }
  
  Read more: https://nextjs.org/docs/messages/middleware-new-signature
  `)}}class ue extends Error{constructor(){super("The request.page has been deprecated in favour of `URLPattern`.\n  Read more: https://nextjs.org/docs/messages/middleware-request-page\n  ")}}class le extends Error{constructor(){super("The request.ua has been removed in favour of `userAgent` function.\n  Read more: https://nextjs.org/docs/messages/middleware-parse-user-agent\n  ")}}function fe(d){let e={},t=[];if(d)for(let[o,b]of d.entries())o.toLowerCase()==="set-cookie"?(t.push(...function(x){var O,M,Z,U,z,G=[],re=0;function we(){for(;re<x.length&&/\s/.test(x.charAt(re));)re+=1;return re<x.length}for(;re<x.length;){for(O=re,z=!1;we();)if((M=x.charAt(re))===","){for(Z=re,re+=1,we(),U=re;re<x.length&&(M=x.charAt(re))!=="="&&M!==";"&&M!==",";)re+=1;re<x.length&&x.charAt(re)==="="?(z=!0,re=U,G.push(x.substring(O,Z)),O=re):re=Z+1}else re+=1;(!z||re>=x.length)&&G.push(x.substring(O,x.length))}return G}(b)),e[o]=t.length===1?t[0]:t):e[o]=b;return e}function be(d){try{return String(new URL(String(d)))}catch(e){throw Error(`URL is malformed "${String(d)}". Please use only absolute URLs - https://nextjs.org/docs/messages/middleware-relative-urls`,{cause:e})}}let Ke=Symbol("response"),Je=Symbol("passThrough"),ut=Symbol("waitUntil");class de{constructor(e){this[ut]=[],this[Je]=!1}respondWith(e){this[Ke]||(this[Ke]=Promise.resolve(e))}passThroughOnException(){this[Je]=!0}waitUntil(e){this[ut].push(e)}}class dt extends de{constructor(e){super(e.request),this.sourcePage=e.page}get request(){throw new H({page:this.sourcePage})}respondWith(){throw new H({page:this.sourcePage})}}function Qe(d){return d.replace(/\/$/,"")||"/"}function Ne(d){let e=d.indexOf("#"),t=d.indexOf("?"),o=t>-1&&(e<0||t<e);return o||e>-1?{pathname:d.substring(0,o?t:e),query:o?d.substring(t,e>-1?e:void 0):"",hash:e>-1?d.slice(e):""}:{pathname:d,query:"",hash:""}}function J(d,e){if(!d.startsWith("/")||!e)return d;let{pathname:t,query:o,hash:b}=Ne(d);return""+e+t+o+b}function Ee(d,e){if(!d.startsWith("/")||!e)return d;let{pathname:t,query:o,hash:b}=Ne(d);return""+t+e+o+b}function ke(d,e){if(typeof d!="string")return!1;let{pathname:t}=Ne(d);return t===e||t.startsWith(e+"/")}function Ue(d,e){let t,o=d.split("/");return(e||[]).some(b=>!!o[1]&&o[1].toLowerCase()===b.toLowerCase()&&(t=b,o.splice(1,1),d=o.join("/")||"/",!0)),{pathname:d,detectedLocale:t}}let wt=/(?!^https?:\/\/)(127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}|\[::1\]|localhost)/;function Ct(d,e){return new URL(String(d).replace(wt,"localhost"),e&&String(e).replace(wt,"localhost"))}let ve=Symbol("NextURLInternal");class pt{constructor(e,t,o){let b,x;typeof t=="object"&&"pathname"in t||typeof t=="string"?(b=t,x=o||{}):x=o||t||{},this[ve]={url:Ct(e,b??x.base),options:x,basePath:""},this.analyze()}analyze(){var e,t,o,b,x;let O=function(U,z){var G,re;let{basePath:we,i18n:te,trailingSlash:Te}=(G=z.nextConfig)!=null?G:{},ye={pathname:U,trailingSlash:U!=="/"?U.endsWith("/"):Te};we&&ke(ye.pathname,we)&&(ye.pathname=function(Se,ge){if(!ke(Se,ge))return Se;let Oe=Se.slice(ge.length);return Oe.startsWith("/")?Oe:"/"+Oe}(ye.pathname,we),ye.basePath=we);let _e=ye.pathname;if(ye.pathname.startsWith("/_next/data/")&&ye.pathname.endsWith(".json")){let Se=ye.pathname.replace(/^\/_next\/data\//,"").replace(/\.json$/,"").split("/"),ge=Se[0];ye.buildId=ge,_e=Se[1]!=="index"?"/"+Se.slice(1).join("/"):"/",z.parseData===!0&&(ye.pathname=_e)}if(te){let Se=z.i18nProvider?z.i18nProvider.analyze(ye.pathname):Ue(ye.pathname,te.locales);ye.locale=Se.detectedLocale,ye.pathname=(re=Se.pathname)!=null?re:ye.pathname,!Se.detectedLocale&&ye.buildId&&(Se=z.i18nProvider?z.i18nProvider.analyze(_e):Ue(_e,te.locales)).detectedLocale&&(ye.locale=Se.detectedLocale)}return ye}(this[ve].url.pathname,{nextConfig:this[ve].options.nextConfig,parseData:!0,i18nProvider:this[ve].options.i18nProvider}),M=function(U,z){let G;if(z?.host&&!Array.isArray(z.host))G=z.host.toString().split(":",1)[0];else{if(!U.hostname)return;G=U.hostname}return G.toLowerCase()}(this[ve].url,this[ve].options.headers);this[ve].domainLocale=this[ve].options.i18nProvider?this[ve].options.i18nProvider.detectDomainLocale(M):function(U,z,G){if(U)for(let te of(G&&(G=G.toLowerCase()),U)){var re,we;let Te=(re=te.domain)==null?void 0:re.split(":",1)[0].toLowerCase();if(z===Te||G===te.defaultLocale.toLowerCase()||((we=te.locales)==null?void 0:we.some(ye=>ye.toLowerCase()===G)))return te}}((t=this[ve].options.nextConfig)==null||(e=t.i18n)==null?void 0:e.domains,M);let Z=((o=this[ve].domainLocale)==null?void 0:o.defaultLocale)||((x=this[ve].options.nextConfig)==null||(b=x.i18n)==null?void 0:b.defaultLocale);this[ve].url.pathname=O.pathname,this[ve].defaultLocale=Z,this[ve].basePath=O.basePath??"",this[ve].buildId=O.buildId,this[ve].locale=O.locale??Z,this[ve].trailingSlash=O.trailingSlash}formatPathname(){var e;let t;return t=function(o,b,x,O){if(!b||b===x)return o;let M=o.toLowerCase();return!O&&(ke(M,"/api")||ke(M,"/"+b.toLowerCase()))?o:J(o,"/"+b)}((e={basePath:this[ve].basePath,buildId:this[ve].buildId,defaultLocale:this[ve].options.forceLocale?void 0:this[ve].defaultLocale,locale:this[ve].locale,pathname:this[ve].url.pathname,trailingSlash:this[ve].trailingSlash}).pathname,e.locale,e.buildId?void 0:e.defaultLocale,e.ignorePrefix),(e.buildId||!e.trailingSlash)&&(t=Qe(t)),e.buildId&&(t=Ee(J(t,"/_next/data/"+e.buildId),e.pathname==="/"?"index.json":".json")),t=J(t,e.basePath),!e.buildId&&e.trailingSlash?t.endsWith("/")?t:Ee(t,"/"):Qe(t)}formatSearch(){return this[ve].url.search}get buildId(){return this[ve].buildId}set buildId(e){this[ve].buildId=e}get locale(){return this[ve].locale??""}set locale(e){var t,o;if(!this[ve].locale||!(!((o=this[ve].options.nextConfig)==null||(t=o.i18n)==null)&&t.locales.includes(e)))throw TypeError(`The NextURL configuration includes no locale "${e}"`);this[ve].locale=e}get defaultLocale(){return this[ve].defaultLocale}get domainLocale(){return this[ve].domainLocale}get searchParams(){return this[ve].url.searchParams}get host(){return this[ve].url.host}set host(e){this[ve].url.host=e}get hostname(){return this[ve].url.hostname}set hostname(e){this[ve].url.hostname=e}get port(){return this[ve].url.port}set port(e){this[ve].url.port=e}get protocol(){return this[ve].url.protocol}set protocol(e){this[ve].url.protocol=e}get href(){let e=this.formatPathname(),t=this.formatSearch();return`${this.protocol}//${this.host}${e}${t}${this.hash}`}set href(e){this[ve].url=Ct(e),this.analyze()}get origin(){return this[ve].url.origin}get pathname(){return this[ve].url.pathname}set pathname(e){this[ve].url.pathname=e}get hash(){return this[ve].url.hash}set hash(e){this[ve].url.hash=e}get search(){return this[ve].url.search}set search(e){this[ve].url.search=e}get password(){return this[ve].url.password}set password(e){this[ve].url.password=e}get username(){return this[ve].url.username}set username(e){this[ve].url.username=e}get basePath(){return this[ve].basePath}set basePath(e){this[ve].basePath=e.startsWith("/")?e:`/${e}`}toString(){return this.href}toJSON(){return this.href}[Symbol.for("edge-runtime.inspect.custom")](){return{href:this.href,origin:this.origin,protocol:this.protocol,username:this.username,password:this.password,host:this.host,hostname:this.hostname,port:this.port,pathname:this.pathname,search:this.search,searchParams:this.searchParams,hash:this.hash}}clone(){return new pt(String(this),this[ve].options)}}var Bt=Ce(668);let $t=Symbol("internal request");class qr extends Request{constructor(e,t={}){let o=typeof e!="string"&&"url"in e?e.url:String(e);be(o),e instanceof Request?super(e,t):super(o,t);let b=new pt(o,{headers:fe(this.headers),nextConfig:t.nextConfig});this[$t]={cookies:new Bt.RequestCookies(this.headers),geo:t.geo||{},ip:t.ip,nextUrl:b,url:b.toString()}}[Symbol.for("edge-runtime.inspect.custom")](){return{cookies:this.cookies,geo:this.geo,ip:this.ip,nextUrl:this.nextUrl,url:this.url,bodyUsed:this.bodyUsed,cache:this.cache,credentials:this.credentials,destination:this.destination,headers:Object.fromEntries(this.headers),integrity:this.integrity,keepalive:this.keepalive,method:this.method,mode:this.mode,redirect:this.redirect,referrer:this.referrer,referrerPolicy:this.referrerPolicy,signal:this.signal}}get cookies(){return this[$t].cookies}get geo(){return this[$t].geo}get ip(){return this[$t].ip}get nextUrl(){return this[$t].nextUrl}get page(){throw new ue}get ua(){throw new le}get url(){return this[$t].url}}let br=Symbol("internal response"),Qr=new Set([301,302,303,307,308]);function jr(d,e){var t;if(!(d==null||(t=d.request)==null)&&t.headers){if(!(d.request.headers instanceof Headers))throw Error("request.headers must be an instance of Headers");let o=[];for(let[b,x]of d.request.headers)e.set("x-middleware-request-"+b,x),o.push(b);e.set("x-middleware-override-headers",o.join(","))}}class zt extends Response{constructor(e,t={}){super(e,t),this[br]={cookies:new Bt.ResponseCookies(this.headers),url:t.url?new pt(t.url,{headers:fe(this.headers),nextConfig:t.nextConfig}):void 0}}[Symbol.for("edge-runtime.inspect.custom")](){return{cookies:this.cookies,url:this.url,body:this.body,bodyUsed:this.bodyUsed,headers:Object.fromEntries(this.headers),ok:this.ok,redirected:this.redirected,status:this.status,statusText:this.statusText,type:this.type}}get cookies(){return this[br].cookies}static json(e,t){let o=Response.json(e,t);return new zt(o.body,o)}static redirect(e,t){let o=typeof t=="number"?t:t?.status??307;if(!Qr.has(o))throw RangeError('Failed to execute "redirect" on "response": Invalid status code');let b=typeof t=="object"?t:{},x=new Headers(b?.headers);return x.set("Location",be(e)),new zt(null,{...b,headers:x,status:o})}static rewrite(e,t){let o=new Headers(t?.headers);return o.set("x-middleware-rewrite",be(e)),jr(t,o),new zt(null,{...t,headers:o})}static next(e){let t=new Headers(e?.headers);return t.set("x-middleware-next","1"),jr(e,t),new zt(null,{...e,headers:t})}}function Ur(d,e){let t=typeof e=="string"?new URL(e):e,o=new URL(d,e),b=t.protocol+"//"+t.host;return o.protocol+"//"+o.host===b?o.toString().replace(b,""):o.toString()}let Fr=[["RSC"],["Next-Router-State-Tree"],["Next-Router-Prefetch"]];Ce(985);let vr={client:"client",server:"server",edgeServer:"edge-server"};vr.client,vr.server,vr.edgeServer,Symbol("polyfills");let vi=["__nextFallback","__nextLocale","__nextInferredLocaleFromDefault","__nextDefaultLocale","__nextIsNotFound","_rsc"],wi=["__nextDataReq"];function zr(d){return d.startsWith("/")?d:"/"+d}let Ht="nxtP",Gt="x-prerender-revalidate",Jt=".meta",Hr="x-next-revalidated-tags",gt={shared:"shared",reactServerComponents:"rsc",serverSideRendering:"ssr",actionBrowser:"action-browser",api:"api",middleware:"middleware",edgeAsset:"edge-asset",appPagesBrowser:"app-pages-browser",appMetadataRoute:"app-metadata-route",appRouteHandler:"app-route-handler"};({...gt,GROUP:(gt.reactServerComponents,gt.actionBrowser,gt.appMetadataRoute,gt.appRouteHandler,gt.middleware,gt.api,gt.reactServerComponents,gt.actionBrowser,gt.appMetadataRoute,gt.appRouteHandler,gt.serverSideRendering,gt.appPagesBrowser)});class St{static get(e,t,o){let b=Reflect.get(e,t,o);return typeof b=="function"?b.bind(e):b}static set(e,t,o,b){return Reflect.set(e,t,o,b)}static has(e,t){return Reflect.has(e,t)}static deleteProperty(e,t){return Reflect.deleteProperty(e,t)}}class sr extends Error{constructor(){super("Headers cannot be modified. Read more: https://nextjs.org/docs/app/api-reference/functions/headers")}static callable(){throw new sr}}class At extends Headers{constructor(e){super(),this.headers=new Proxy(e,{get(t,o,b){if(typeof o=="symbol")return St.get(t,o,b);let x=o.toLowerCase(),O=Object.keys(e).find(M=>M.toLowerCase()===x);if(O!==void 0)return St.get(t,O,b)},set(t,o,b,x){if(typeof o=="symbol")return St.set(t,o,b,x);let O=o.toLowerCase(),M=Object.keys(e).find(Z=>Z.toLowerCase()===O);return St.set(t,M??o,b,x)},has(t,o){if(typeof o=="symbol")return St.has(t,o);let b=o.toLowerCase(),x=Object.keys(e).find(O=>O.toLowerCase()===b);return x!==void 0&&St.has(t,x)},deleteProperty(t,o){if(typeof o=="symbol")return St.deleteProperty(t,o);let b=o.toLowerCase(),x=Object.keys(e).find(O=>O.toLowerCase()===b);return x===void 0||St.deleteProperty(t,x)}})}static seal(e){return new Proxy(e,{get(t,o,b){switch(o){case"append":case"delete":case"set":return sr.callable;default:return St.get(t,o,b)}}})}merge(e){return Array.isArray(e)?e.join(", "):e}static from(e){return e instanceof Headers?e:new At(e)}append(e,t){let o=this.headers[e];typeof o=="string"?this.headers[e]=[o,t]:Array.isArray(o)?o.push(t):this.headers[e]=t}delete(e){delete this.headers[e]}get(e){let t=this.headers[e];return t!==void 0?this.merge(t):null}has(e){return this.headers[e]!==void 0}set(e,t){this.headers[e]=t}forEach(e,t){for(let[o,b]of this.entries())e.call(t,b,o,this)}*entries(){for(let e of Object.keys(this.headers)){let t=e.toLowerCase(),o=this.get(t);yield[t,o]}}*keys(){for(let e of Object.keys(this.headers))yield e.toLowerCase()}*values(){for(let e of Object.keys(this.headers))yield this.get(e)}[Symbol.iterator](){return this.entries()}}class nr extends Error{constructor(){super("Cookies can only be modified in a Server Action or Route Handler. Read more: https://nextjs.org/docs/app/api-reference/functions/cookies#cookiessetname-value-options")}static callable(){throw new nr}}class Wr{static seal(e){return new Proxy(e,{get(t,o,b){switch(o){case"clear":case"delete":case"set":return nr.callable;default:return St.get(t,o,b)}}})}}let wr=Symbol.for("next.mutated.cookies");class Kr{static wrap(e,t){let o=new Bt.ResponseCookies(new Headers);for(let M of e.getAll())o.set(M);let b=[],x=new Set,O=()=>{var M;let Z=fetch.__nextGetStaticStore==null||(M=fetch.__nextGetStaticStore.call(fetch))==null?void 0:M.getStore();if(Z&&(Z.pathWasRevalidated=!0),b=o.getAll().filter(z=>x.has(z.name)),t){let z=[];for(let G of b){let re=new Bt.ResponseCookies(new Headers);re.set(G),z.push(re.toString())}t(z)}};return new Proxy(o,{get(M,Z,U){switch(Z){case wr:return b;case"delete":return function(...z){x.add(typeof z[0]=="string"?z[0]:z[0].name);try{M.delete(...z)}finally{O()}};case"set":return function(...z){x.add(typeof z[0]=="string"?z[0]:z[0].name);try{return M.set(...z)}finally{O()}};default:return St.get(M,Z,U)}}})}}let Yt="__prerender_bypass";Symbol("__next_preview_data"),Symbol(Yt);class Vr{constructor(e,t,o,b){var x;let O=e&&function(Z,U){let z=At.from(Z.headers),G=z.get(Gt),re=G===U.previewModeId,we=z.has("x-prerender-revalidate-if-generated");return{isOnDemandRevalidate:re,revalidateOnlyGenerated:we}}(t,e).isOnDemandRevalidate,M=(x=o.get(Yt))==null?void 0:x.value;this.isEnabled=!!(!O&&M&&e&&M===e.previewModeId),this._previewModeId=e?.previewModeId,this._mutableCookies=b}enable(){if(!this._previewModeId)throw Error("Invariant: previewProps missing previewModeId this should never happen");this._mutableCookies.set({name:Yt,value:this._previewModeId,httpOnly:!0,sameSite:"none",secure:!0,path:"/"})}disable(){this._mutableCookies.set({name:Yt,value:"",httpOnly:!0,sameSite:"none",secure:!0,path:"/",expires:new Date(0)})}}let Gr={wrap(d,{req:e,res:t,renderOpts:o},b){let x;function O(U){t&&t.setHeader("Set-Cookie",U)}o&&"previewProps"in o&&(x=o.previewProps);let M={},Z={get headers(){return M.headers||(M.headers=function(U){let z=At.from(U);for(let G of Fr)z.delete(G.toString().toLowerCase());return At.seal(z)}(e.headers)),M.headers},get cookies(){return M.cookies||(M.cookies=function(U){let z=new Bt.RequestCookies(At.from(U));return Wr.seal(z)}(e.headers)),M.cookies},get mutableCookies(){return M.mutableCookies||(M.mutableCookies=function(U,z){let G=new Bt.RequestCookies(At.from(U));return Kr.wrap(G,z)}(e.headers,o?.onUpdateCookies||(t?O:void 0))),M.mutableCookies},get draftMode(){return M.draftMode||(M.draftMode=new Vr(x,e,this.cookies,this.mutableCookies)),M.draftMode}};return d.run(Z,b,Z)}},Xt=Error("Invariant: AsyncLocalStorage accessed in runtime where it is not available");class Si{disable(){throw Xt}getStore(){}run(){throw Xt}exit(){throw Xt}enterWith(){throw Xt}}let Jr=globalThis.AsyncLocalStorage,Ei=Jr?new Jr:new Si;class _i extends qr{constructor(e){super(e.input,e.init),this.sourcePage=e.page}get request(){throw new H({page:this.sourcePage})}respondWith(){throw new H({page:this.sourcePage})}waitUntil(){throw new H({page:this.sourcePage})}}async function Yr(d){let e,t;await N();let o=self.__BUILD_MANIFEST!==void 0,b=typeof self.__PRERENDER_MANIFEST=="string"?JSON.parse(self.__PRERENDER_MANIFEST):void 0;d.request.url=d.request.url.replace(/\.rsc($|\?)/,"$1");let x=new pt(d.request.url,{headers:d.request.headers,nextConfig:d.request.nextConfig}),O=[...x.searchParams.keys()];for(let ge of O){let Oe=x.searchParams.getAll(ge);if(ge!==Ht&&ge.startsWith(Ht)){let Fe=ge.substring(Ht.length);for(let Me of(x.searchParams.delete(Fe),Oe))x.searchParams.append(Fe,Me);x.searchParams.delete(ge)}}let M=x.buildId;x.buildId="";let Z=d.request.headers["x-nextjs-data"];Z&&x.pathname==="/index"&&(x.pathname="/");let U=function(ge){let Oe=new Headers;for(let[Fe,Me]of Object.entries(ge)){let qe=Array.isArray(Me)?Me:[Me];for(let rt of qe)rt!==void 0&&(typeof rt=="number"&&(rt=rt.toString()),Oe.append(Fe,rt))}return Oe}(d.request.headers),z=new Map;if(!o)for(let ge of Fr){let Oe=ge.toString().toLowerCase();U.get(Oe)&&(z.set(Oe,U.get(Oe)),U.delete(Oe))}let G=new _i({page:d.page,input:function(ge,Oe){let Fe=typeof ge=="string",Me=Fe?new URL(ge):ge;for(let qe of vi)Me.searchParams.delete(qe);if(Oe)for(let qe of wi)Me.searchParams.delete(qe);return Fe?Me.toString():Me}(x,!0).toString(),init:{body:d.request.body,geo:d.request.geo,headers:U,ip:d.request.ip,method:d.request.method,nextConfig:d.request.nextConfig,signal:d.request.signal}});Z&&Object.defineProperty(G,"__isData",{enumerable:!1,value:!0}),!globalThis.__incrementalCache&&d.IncrementalCache&&(globalThis.__incrementalCache=new d.IncrementalCache({appDir:!0,fetchCache:!0,minimalMode:!0,fetchCacheKeyPrefix:void 0,dev:!1,requestHeaders:d.request.headers,requestProtocol:"https",getPrerenderManifest:()=>({version:-1,routes:{},dynamicRoutes:{},notFoundRoutes:[],preview:{previewModeId:"development-id"}})}));let re=new dt({request:G,page:d.page});if((e=d.page==="/middleware"||d.page==="/src/middleware"?await Gr.wrap(Ei,{req:G,renderOpts:{onUpdateCookies:ge=>{t=ge},previewProps:b?.preview||{previewModeId:"development-id",previewModeEncryptionKey:"",previewModeSigningKey:""}}},()=>d.handler(G,re)):await d.handler(G,re))&&!(e instanceof Response))throw TypeError("Expected an instance of Response to be returned");e&&t&&e.headers.set("set-cookie",t);let te=e?.headers.get("x-middleware-rewrite");if(e&&te){let ge=new pt(te,{forceLocale:!0,headers:d.request.headers,nextConfig:d.request.nextConfig});ge.host===G.nextUrl.host&&(ge.buildId=M||ge.buildId,e.headers.set("x-middleware-rewrite",String(ge)));let Oe=Ur(String(ge),String(x));Z&&e.headers.set("x-nextjs-rewrite",Oe)}let Te=e?.headers.get("Location");if(e&&Te&&!o){let ge=new pt(Te,{forceLocale:!1,headers:d.request.headers,nextConfig:d.request.nextConfig});e=new Response(e.body,e),ge.host===G.nextUrl.host&&(ge.buildId=M||ge.buildId,e.headers.set("Location",String(ge))),Z&&(e.headers.delete("Location"),e.headers.set("x-nextjs-redirect",Ur(String(ge),String(x))))}let ye=e||zt.next(),_e=ye.headers.get("x-middleware-override-headers"),Se=[];if(_e){for(let[ge,Oe]of z)ye.headers.set(`x-middleware-request-${ge}`,Oe),Se.push(ge);Se.length>0&&ye.headers.set("x-middleware-override-headers",_e+","+Se.join(","))}return{response:ye,waitUntil:Promise.all(re[ut]),fetchMetrics:G.fetchMetrics}}var Xr=Ce(695),Sr=Ce.n(Xr);let qt=0,Er="x-vercel-cache-tags",Zt="x-vercel-sc-headers",_r="x-vercel-revalidate",Zr="x-vercel-cache-item-name";class or{static isAvailable(e){return!!(e._requestHeaders["x-vercel-sc-host"]||process.env.SUSPENSE_CACHE_URL)}constructor(e){if(this.debug=!!process.env.NEXT_PRIVATE_DEBUG_CACHE,this.headers={},this.headers["Content-Type"]="application/json",Zt in e._requestHeaders){let b=JSON.parse(e._requestHeaders[Zt]);for(let x in b)this.headers[x]=b[x];delete e._requestHeaders[Zt]}let t=e._requestHeaders["x-vercel-sc-host"]||process.env.SUSPENSE_CACHE_URL,o=e._requestHeaders["x-vercel-sc-basepath"]||process.env.SUSPENSE_CACHE_BASEPATH;process.env.SUSPENSE_CACHE_AUTH_TOKEN&&(this.headers.Authorization=`Bearer ${process.env.SUSPENSE_CACHE_AUTH_TOKEN}`),t?(this.cacheEndpoint=`https://${t}${o||""}`,this.debug&&console.log("using cache endpoint",this.cacheEndpoint)):this.debug&&console.log("no cache endpoint available"),e.maxMemoryCacheSize?he||(this.debug&&console.log("using memory store for fetch cache"),he=new(Sr())({max:e.maxMemoryCacheSize,length({value:b}){var x;if(!b)return 25;if(b.kind==="REDIRECT")return JSON.stringify(b.props).length;if(b.kind==="IMAGE")throw Error("invariant image should not be incremental-cache");return b.kind==="FETCH"?JSON.stringify(b.data||"").length:b.kind==="ROUTE"?b.body.length:b.html.length+(((x=JSON.stringify(b.pageData))==null?void 0:x.length)||0)}})):this.debug&&console.log("not using memory store for fetch cache")}async revalidateTag(e){if(this.debug&&console.log("revalidateTag",e),Date.now()<qt){this.debug&&console.log("rate limited ",qt);return}try{let t=await fetch(`${this.cacheEndpoint}/v1/suspense-cache/revalidate?tags=${e}`,{method:"POST",headers:this.headers,next:{internal:!0}});if(t.status===429){let o=t.headers.get("retry-after")||"60000";qt=Date.now()+parseInt(o)}if(!t.ok)throw Error(`Request failed with status ${t.status}.`)}catch(t){console.warn(`Failed to revalidate tag ${e}`,t)}}async get(...e){let[t,o={}]=e,{tags:b,softTags:x,kindHint:O,fetchIdx:M,fetchUrl:Z}=o;if(O!=="fetch")return null;if(Date.now()<qt)return this.debug&&console.log("rate limited"),null;let U=he?.get(t);if(Date.now()-(U?.lastModified||0)>2e3&&(U=void 0),!U&&this.cacheEndpoint)try{let z=Date.now(),G=await fetch(`${this.cacheEndpoint}/v1/suspense-cache/${t}`,{method:"GET",headers:{...this.headers,[Zr]:Z,[Er]:b?.join(",")||"","x-next-cache-soft-tags":x?.join(",")||""},next:{internal:!0,fetchType:"cache-get",fetchUrl:Z,fetchIdx:M}});if(G.status===429){let Te=G.headers.get("retry-after")||"60000";qt=Date.now()+parseInt(Te)}if(G.status===404)return this.debug&&console.log(`no fetch cache entry for ${t}, duration: ${Date.now()-z}ms`),null;if(!G.ok)throw console.error(await G.text()),Error(`invalid response from cache ${G.status}`);let re=await G.json();if(!re||re.kind!=="FETCH")throw this.debug&&console.log({cached:re}),Error("invalid cache value");let we=G.headers.get("x-vercel-cache-state"),te=G.headers.get("age");U={value:re,lastModified:we!=="fresh"?Date.now()-31536e3:Date.now()-1e3*parseInt(te||"0",10)},this.debug&&console.log(`got fetch cache entry for ${t}, duration: ${Date.now()-z}ms, size: ${Object.keys(re).length}, cache-state: ${we} tags: ${b?.join(",")} softTags: ${x?.join(",")}`),U&&he?.set(t,U)}catch(z){this.debug&&console.error("Failed to get from fetch-cache",z)}return U||null}async set(...e){let[t,o,b]=e,{fetchCache:x,fetchIdx:O,fetchUrl:M,tags:Z}=b;if(x){if(Date.now()<qt){this.debug&&console.log("rate limited");return}if(he?.set(t,{value:o,lastModified:Date.now()}),this.cacheEndpoint)try{let U=Date.now();o!==null&&"revalidate"in o&&(this.headers[_r]=o.revalidate.toString()),!this.headers[_r]&&o!==null&&"data"in o&&(this.headers["x-vercel-cache-control"]=o.data.headers["cache-control"]);let z=JSON.stringify({...o,tags:void 0});this.debug&&console.log("set cache",t);let G=await fetch(`${this.cacheEndpoint}/v1/suspense-cache/${t}`,{method:"POST",headers:{...this.headers,[Zr]:M||"",[Er]:Z?.join(",")||""},body:z,next:{internal:!0,fetchType:"cache-set",fetchUrl:M,fetchIdx:O}});if(G.status===429){let re=G.headers.get("retry-after")||"60000";qt=Date.now()+parseInt(re)}if(!G.ok)throw this.debug&&console.log(await G.text()),Error(`invalid response ${G.status}`);this.debug&&console.log(`successfully set to fetch-cache for ${t}, duration: ${Date.now()-U}ms, size: ${z.length}`)}catch(U){this.debug&&console.error("Failed to update fetch cache",U)}}}}var xi=Ce(395),Pt=Ce.n(xi);class ei{constructor(e){this.fs=e.fs,this.flushToDisk=e.flushToDisk,this.serverDistDir=e.serverDistDir,this.appDir=!!e._appDir,this.pagesDir=!!e._pagesDir,this.revalidatedTags=e.revalidatedTags,this.experimental=e.experimental,e.maxMemoryCacheSize&&!oe&&(oe=new(Sr())({max:e.maxMemoryCacheSize,length({value:t}){var o;if(!t)return 25;if(t.kind==="REDIRECT")return JSON.stringify(t.props).length;if(t.kind==="IMAGE")throw Error("invariant image should not be incremental-cache");return t.kind==="FETCH"?JSON.stringify(t.data||"").length:t.kind==="ROUTE"?t.body.length:t.html.length+(((o=JSON.stringify(t.pageData))==null?void 0:o.length)||0)}})),this.serverDistDir&&this.fs&&(this.tagsManifestPath=Pt().join(this.serverDistDir,"..","cache","fetch-cache","tags-manifest.json"),this.loadTagsManifest())}loadTagsManifest(){if(this.tagsManifestPath&&this.fs&&!ee)try{ee=JSON.parse(this.fs.readFileSync(this.tagsManifestPath,"utf8"))}catch{ee={version:1,items:{}}}}async revalidateTag(e){if(this.loadTagsManifest(),!ee||!this.tagsManifestPath)return;let t=ee.items[e]||{};t.revalidatedAt=Date.now(),ee.items[e]=t;try{await this.fs.mkdir(Pt().dirname(this.tagsManifestPath)),await this.fs.writeFile(this.tagsManifestPath,JSON.stringify(ee||{}))}catch(o){console.warn("Failed to update tags manifest.",o)}}async get(...e){var t,o,b;let[x,O={}]=e,{tags:M,softTags:Z,kindHint:U}=O,z=oe?.get(x);if((z==null||(t=z.value)==null?void 0:t.kind)==="PAGE"){let G,re=(b=z.value.headers)==null?void 0:b["x-next-cache-tags"];typeof re=="string"&&(G=re.split(",")),G?.length&&(this.loadTagsManifest(),G.some(te=>{var Te;return(ee==null||(Te=ee.items[te])==null?void 0:Te.revalidatedAt)&&ee?.items[te].revalidatedAt>=(z?.lastModified||Date.now())})&&(z=void 0))}return z&&(z==null||(o=z.value)==null?void 0:o.kind)==="FETCH"&&(this.loadTagsManifest(),[...M||[],...Z||[]].some(we=>{var te;return!!this.revalidatedTags.includes(we)||(ee==null||(te=ee.items[we])==null?void 0:te.revalidatedAt)&&ee?.items[we].revalidatedAt>=(z?.lastModified||Date.now())})&&(z=void 0)),z??null}async set(...e){let[t,o,b]=e;if(oe?.set(t,{value:o,lastModified:Date.now()}),this.flushToDisk){if(o?.kind==="ROUTE"){let x=this.getFilePath(`${t}.body`,"app");await this.fs.mkdir(Pt().dirname(x)),await this.fs.writeFile(x,o.body);let O={headers:o.headers,status:o.status,postponed:void 0};await this.fs.writeFile(x.replace(/\.body$/,Jt),JSON.stringify(O,null,2));return}if(o?.kind==="PAGE"){let x=typeof o.pageData=="string",O=this.getFilePath(`${t}.html`,x?"app":"pages");if(await this.fs.mkdir(Pt().dirname(O)),await this.fs.writeFile(O,o.html),await this.fs.writeFile(this.getFilePath(`${t}${x?this.experimental.ppr?".prefetch.rsc":".rsc":".json"}`,x?"app":"pages"),x?o.pageData:JSON.stringify(o.pageData)),o.headers||o.status){let M={headers:o.headers,status:o.status,postponed:o.postponed};await this.fs.writeFile(O.replace(/\.html$/,Jt),JSON.stringify(M))}}else if(o?.kind==="FETCH"){let x=this.getFilePath(t,"fetch");await this.fs.mkdir(Pt().dirname(x)),await this.fs.writeFile(x,JSON.stringify({...o,tags:b.tags}))}}}detectFileKind(e){if(!this.appDir&&!this.pagesDir)throw Error("Invariant: Can't determine file path kind, no page directory enabled");if(!this.appDir&&this.pagesDir)return"pages";if(this.appDir&&!this.pagesDir)return"app";let t=this.getFilePath(e,"pages");if(this.fs.existsSync(t))return"pages";if(t=this.getFilePath(e,"app"),this.fs.existsSync(t))return"app";throw Error(`Invariant: Unable to determine file path kind for ${e}`)}getFilePath(e,t){switch(t){case"fetch":return Pt().join(this.serverDistDir,"..","cache","fetch-cache",e);case"pages":return Pt().join(this.serverDistDir,"pages",e);case"app":return Pt().join(this.serverDistDir,"app",e);default:throw Error("Invariant: Can't determine file path kind")}}}let xr=["(..)(..)","(.)","(..)","(...)"],ti=/\/\[[^/]+?\](?=\/|$)/,ar=typeof performance<"u";function Wt(d){var e;return/^\/index(\/|$)/.test(d)&&((e=d).split("/").find(o=>xr.find(b=>o.startsWith(b)))!==void 0&&(e=function(o){let b,x,O;for(let M of o.split("/"))if(x=xr.find(Z=>M.startsWith(Z))){[b,O]=o.split(x,2);break}if(!b||!x||!O)throw Error(`Invalid interception route: ${o}. Must be in the format /<intercepting route>/(..|...|..)(..)/<intercepted route>`);switch(b=zr(b.split("/").reduce((M,Z,U,z)=>Z?Z[0]==="("&&Z.endsWith(")")||Z[0]==="@"||(Z==="page"||Z==="route")&&U===z.length-1?M:M+"/"+Z:M,"")),x){case"(.)":O=b==="/"?`/${O}`:b+"/"+O;break;case"(..)":if(b==="/")throw Error(`Invalid interception route: ${o}. Cannot use (..) marker at the root level, use (.) instead.`);O=b.split("/").slice(0,-1).concat(O).join("/");break;case"(...)":O="/"+O;break;case"(..)(..)":let M=b.split("/");if(M.length<=2)throw Error(`Invalid interception route: ${o}. Cannot use (..)(..) marker at the root level or one level up.`);O=M.slice(0,-2).concat(O).join("/");break;default:throw Error("Invariant: unexpected marker")}return{interceptingRoute:b,interceptedRoute:O}}(e).interceptedRoute),!ti.test(e))?"/index"+d:d==="/"?"/index":zr(d)}function lr(d){return d.replace(/\/$/,"").replace(/\/index$/,"")||"/"}ar&&["mark","measure","getEntriesByName"].every(d=>typeof performance[d]=="function");class ri{constructor({fs:e,dev:t,appDir:o,pagesDir:b,flushToDisk:x,fetchCache:O,minimalMode:M,serverDistDir:Z,requestHeaders:U,requestProtocol:z,maxMemoryCacheSize:G,getPrerenderManifest:re,fetchCacheKeyPrefix:we,CurCacheHandler:te,allowedRevalidateHeaderKeys:Te,experimental:ye}){var _e,Se,ge,Oe;this.locks=new Map,this.unlocks=new Map;let Fe=!!process.env.NEXT_PRIVATE_DEBUG_CACHE;te?Fe&&console.log("using custom cache handler",te.name):(e&&Z&&(Fe&&console.log("using filesystem cache handler"),te=ei),or.isAvailable({_requestHeaders:U})&&M&&O&&(Fe&&console.log("using fetch cache handler"),te=or)),process.env.__NEXT_TEST_MAX_ISR_CACHE&&(G=parseInt(process.env.__NEXT_TEST_MAX_ISR_CACHE,10)),this.dev=t,this.minimalMode=M,this.requestHeaders=U,this.requestProtocol=z,this.allowedRevalidateHeaderKeys=Te,this.prerenderManifest=re(),this.fetchCacheKeyPrefix=we;let Me=[];U[Gt]===((Se=this.prerenderManifest)==null||(_e=Se.preview)==null?void 0:_e.previewModeId)&&(this.isOnDemandRevalidate=!0),M&&typeof U[Hr]=="string"&&U["x-next-revalidate-tag-token"]===((Oe=this.prerenderManifest)==null||(ge=Oe.preview)==null?void 0:ge.previewModeId)&&(Me=U[Hr].split(",")),te&&(this.cacheHandler=new te({dev:t,fs:e,flushToDisk:x,serverDistDir:Z,revalidatedTags:Me,maxMemoryCacheSize:G,_pagesDir:!!b,_appDir:!!o,_requestHeaders:U,fetchCacheKeyPrefix:we,experimental:ye}))}calculateRevalidate(e,t,o){if(o)return new Date().getTime()-1e3;let{initialRevalidateSeconds:b}=this.prerenderManifest.routes[lr(e)]||{initialRevalidateSeconds:1};return typeof b=="number"?1e3*b+t:b}_getPathname(e,t){return t?e:Wt(e)}async unlock(e){let t=this.unlocks.get(e);t&&(t(),this.locks.delete(e),this.unlocks.delete(e))}async lock(e){process.env.__NEXT_INCREMENTAL_CACHE_IPC_PORT&&process.env.__NEXT_INCREMENTAL_CACHE_IPC_KEY;let t=()=>Promise.resolve(),o=this.locks.get(e);if(o)await o;else{let b=new Promise(x=>{t=async()=>{x()}});this.locks.set(e,b),this.unlocks.set(e,t)}return t}async revalidateTag(e){var t,o;return process.env.__NEXT_INCREMENTAL_CACHE_IPC_PORT&&process.env.__NEXT_INCREMENTAL_CACHE_IPC_KEY,(o=this.cacheHandler)==null||(t=o.revalidateTag)==null?void 0:t.call(o,e)}async fetchCacheKey(e,t={}){let o,b=[],x=new TextEncoder,O=new TextDecoder;if(t.body)if(typeof t.body.getReader=="function"){let U=t.body,z=[];try{await U.pipeTo(new WritableStream({write(te){typeof te=="string"?(z.push(x.encode(te)),b.push(te)):(z.push(te),b.push(O.decode(te,{stream:!0})))}})),b.push(O.decode());let G=z.reduce((te,Te)=>te+Te.length,0),re=new Uint8Array(G),we=0;for(let te of z)re.set(te,we),we+=te.length;t._ogBody=re}catch(G){console.error("Problem reading body",G)}}else if(typeof t.body.keys=="function"){let U=t.body;for(let z of(t._ogBody=t.body,new Set([...U.keys()]))){let G=U.getAll(z);b.push(`${z}=${(await Promise.all(G.map(async re=>typeof re=="string"?re:await re.text()))).join(",")}`)}}else if(typeof t.body.arrayBuffer=="function"){let U=t.body,z=await U.arrayBuffer();b.push(await U.text()),t._ogBody=new Blob([z],{type:U.type})}else typeof t.body=="string"&&(b.push(t.body),t._ogBody=t.body);let M=JSON.stringify(["v3",this.fetchCacheKeyPrefix||"",e,t.method,typeof(t.headers||{}).keys=="function"?Object.fromEntries(t.headers):t.headers,t.mode,t.redirect,t.credentials,t.referrer,t.referrerPolicy,t.integrity,t.cache,b]);{var Z;let U=x.encode(M);Z=await crypto.subtle.digest("SHA-256",U),o=Array.prototype.map.call(new Uint8Array(Z),z=>z.toString(16).padStart(2,"0")).join("")}return o}async get(e,t={}){var o,b,x;let O,M;if(process.env.__NEXT_INCREMENTAL_CACHE_IPC_PORT&&process.env.__NEXT_INCREMENTAL_CACHE_IPC_KEY,this.dev&&(t.kindHint!=="fetch"||this.requestHeaders["cache-control"]==="no-cache"))return null;e=this._getPathname(e,t.kindHint==="fetch");let Z=null,U=t.revalidate,z=await((o=this.cacheHandler)==null?void 0:o.get(e,t));if((z==null||(b=z.value)==null?void 0:b.kind)==="FETCH"){if([...t.tags||[],...t.softTags||[]].some(ye=>{var _e;return(_e=this.revalidatedTags)==null?void 0:_e.includes(ye)}))return null;U=U||z.value.revalidate;let we=Math.round((Date.now()-(z.lastModified||0))/1e3),te=we>U,Te=z.value.data;return{isStale:te,value:{kind:"FETCH",data:Te,revalidate:U},revalidateAfter:Date.now()+1e3*U}}let G=(x=this.prerenderManifest.routes[lr(e)])==null?void 0:x.initialRevalidateSeconds;return z?.lastModified===-1?(O=-1,M=-31536e3):O=(M=this.calculateRevalidate(e,z?.lastModified||Date.now(),this.dev&&t.kindHint!=="fetch"))!==!1&&M<Date.now()||void 0,z&&(Z={isStale:O,curRevalidate:G,revalidateAfter:M,value:z.value}),!z&&this.prerenderManifest.notFoundRoutes.includes(e)&&(Z={isStale:O,value:null,curRevalidate:G,revalidateAfter:M},this.set(e,Z.value,t)),Z}async set(e,t,o){if(process.env.__NEXT_INCREMENTAL_CACHE_IPC_PORT&&process.env.__NEXT_INCREMENTAL_CACHE_IPC_KEY,!this.dev||o.fetchCache){if(o.fetchCache&&JSON.stringify(t).length>2097152){if(this.dev)throw Error("fetch for over 2MB of data can not be cached");return}e=this._getPathname(e,o.fetchCache);try{var b;o.revalidate===void 0||o.fetchCache||(this.prerenderManifest.routes[e]={experimentalPPR:void 0,dataRoute:Pt().posix.join("/_next/data",`${Wt(e)}.json`),srcRoute:null,initialRevalidateSeconds:o.revalidate,prefetchDataRoute:void 0}),await((b=this.cacheHandler)==null?void 0:b.set(e,t,o))}catch(x){console.warn("Failed to update prerender cache for",e,x)}}}}let ie=Symbol.for("drizzle:entityKind");function se(d,e){if(!d||typeof d!="object")return!1;if(d instanceof e)return!0;if(!Object.prototype.hasOwnProperty.call(e,ie))throw Error(`Class "${e.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let t=d.constructor;if(t)for(;t;){if(ie in t&&t[ie]===e[ie])return!0;t=Object.getPrototypeOf(t)}return!1}Symbol.for("drizzle:hasOwnEntityKind");let kt=Symbol.for("drizzle:Name"),Cr=Symbol.for("drizzle:Schema"),ii=Symbol.for("drizzle:Columns"),si=Symbol.for("drizzle:OriginalName"),ni=Symbol.for("drizzle:BaseName"),Ar=Symbol.for("drizzle:IsAlias"),Pr=Symbol.for("drizzle:ExtraConfigBuilder"),Tr=Symbol.for("drizzle:IsDrizzleTable");class xe{static{this[ie]="Table"}static{this.Symbol={Name:kt,Schema:Cr,OriginalName:si,Columns:ii,BaseName:ni,IsAlias:Ar,ExtraConfigBuilder:Pr}}constructor(e,t,o){this[Ar]=!1,this[Pr]=void 0,this[Tr]=!0,this[kt]=this[si]=e,this[Cr]=t,this[ni]=o}}let ur=Symbol.for("drizzle:PgInlineForeignKeys");class Et extends xe{static{Re=xe.Symbol.ExtraConfigBuilder}static{this[ie]="PgTable"}static{this.Symbol=Object.assign({},xe.Symbol,{InlineForeignKeys:ur})}constructor(...e){super(...e),this[ur]=[],this[Re]=void 0}}class Ci{static{this[ie]="ColumnBuilder"}constructor(e,t,o){this.$default=this.$defaultFn,this.config={name:e,notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:t,columnType:o}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(e){return this.config.default=e,this.config.hasDefault=!0,this}$defaultFn(e){return this.config.defaultFn=e,this.config.hasDefault=!0,this}primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}}class ot{constructor(e,t){this.enumValues=void 0,this.table=e,this.config=t,this.name=t.name,this.notNull=t.notNull,this.default=t.default,this.defaultFn=t.defaultFn,this.hasDefault=t.hasDefault,this.primary=t.primaryKey,this.isUnique=t.isUnique,this.uniqueName=t.uniqueName,this.uniqueType=t.uniqueType,this.dataType=t.dataType,this.columnType=t.columnType}static{this[ie]="Column"}mapFromDriverValue(e){return e}mapToDriverValue(e){return e}}class oi{static{this[ie]="PgForeignKeyBuilder"}constructor(e,t){this._onUpdate="no action",this._onDelete="no action",this.reference=()=>{let{name:o,columns:b,foreignColumns:x}=e();return{name:o,columns:b,foreignTable:x[0].table,foreignColumns:x}},t&&(this._onUpdate=t.onUpdate,this._onDelete=t.onDelete)}onUpdate(e){return this._onUpdate=e===void 0?"no action":e,this}onDelete(e){return this._onDelete=e===void 0?"no action":e,this}build(e){return new Ai(e,this)}}class Ai{constructor(e,t){this.table=e,this.reference=t.reference,this.onUpdate=t._onUpdate,this.onDelete=t._onDelete}static{this[ie]="PgForeignKey"}getName(){let{name:e,columns:t,foreignColumns:o}=this.reference(),b=t.map(M=>M.name),x=o.map(M=>M.name),O=[this.table[Et.Symbol.Name],...b,o[0].table[Et.Symbol.Name],...x];return e??`${O.join("_")}_fk`}}function ai(d,e){return`${d[Et.Symbol.Name]}_${e.join("_")}_unique`}class Pi{constructor(e,t){this.nullsNotDistinctConfig=!1,this.name=t,this.columns=e}static{this[ie]="PgUniqueConstraintBuilder"}nullsNotDistinct(){return this.nullsNotDistinctConfig=!0,this}build(e){return new li(e,this.columns,this.nullsNotDistinctConfig,this.name)}}class Ii{static{this[ie]="PgUniqueOnConstraintBuilder"}constructor(e){this.name=e}on(...e){return new Pi(e,this.name)}}class li{constructor(e,t,o,b){this.nullsNotDistinct=!1,this.table=e,this.columns=t,this.name=b??ai(this.table,this.columns.map(x=>x.name)),this.nullsNotDistinct=o}static{this[ie]="PgUniqueConstraint"}getName(){return this.name}}function hr(d,e,t){for(let o=e;o<d.length;o++){let b=d[o];if(b==="\\"){o++;continue}if(b==='"')return[d.slice(e,o).replace(/\\/g,""),o+1];if(!t&&(b===","||b==="}"))return[d.slice(e,o).replace(/\\/g,""),o]}return[d.slice(e).replace(/\\/g,""),d.length]}function Rr(d,...e){return d(...e)}class Tt extends Ci{static{this[ie]="PgColumnBuilder"}array(e){return new ui(this.config.name,this,e)}references(e,t={}){return this.foreignKeyConfigs.push({ref:e,actions:t}),this}unique(e,t){return this.config.isUnique=!0,this.config.uniqueName=e,this.config.uniqueType=t?.nulls,this}buildForeignKeys(e,t){return this.foreignKeyConfigs.map(({ref:o,actions:b})=>Rr((x,O)=>{let M=new oi(()=>{let Z=x();return{columns:[e],foreignColumns:[Z]}});return O.onUpdate&&M.onUpdate(O.onUpdate),O.onDelete&&M.onDelete(O.onDelete),M.build(t)},o,b))}constructor(...e){super(...e),this.foreignKeyConfigs=[]}}class mt extends ot{constructor(e,t){t.uniqueName||(t.uniqueName=ai(e,[t.name])),super(e,t),this.table=e}static{this[ie]="PgColumn"}}class ui extends Tt{static{this[ie]="PgArrayBuilder"}constructor(e,t,o){super(e,"array","PgArray"),this.config.baseBuilder=t,this.config.size=o}build(e){let t=this.config.baseBuilder.build(e);return new Qt(e,this.config,t)}}class Qt extends mt{constructor(e,t,o,b){super(e,t),this.baseColumn=o,this.range=b,this.size=t.size}static{this[ie]="PgArray"}getSQLType(){return`${this.baseColumn.getSQLType()}[${typeof this.size=="number"?this.size:""}]`}mapFromDriverValue(e){return typeof e=="string"&&(e=function(t){let[o]=function b(x,O=0){let M=[],Z=O,U=!1;for(;Z<x.length;){let z=x[Z];if(z===","){(U||Z===O)&&M.push(""),U=!0,Z++;continue}if(U=!1,z==="\\"){Z+=2;continue}if(z==='"'){let[we,te]=hr(x,Z+1,!0);M.push(we),Z=te;continue}if(z==="}")return[M,Z+1];if(z==="{"){let[we,te]=b(x,Z+1);M.push(we),Z=te;continue}let[G,re]=hr(x,Z,!1);M.push(G),Z=re}return[M,Z]}(t,1);return o}(e)),e.map(t=>this.baseColumn.mapFromDriverValue(t))}mapToDriverValue(e,t=!1){let o=e.map(b=>b===null?null:se(this.baseColumn,Qt)?this.baseColumn.mapToDriverValue(b,!0):this.baseColumn.mapToDriverValue(b));return t?o:function b(x){return`{${x.map(O=>Array.isArray(O)?b(O):typeof O=="string"&&O.includes(",")?`"${O.replace(/"/g,'\\"')}"`:`${O}`).join(",")}}`}(o)}}class hi extends Tt{static{this[ie]="PgSerialBuilder"}constructor(e){super(e,"number","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new Lr(e,this.config)}}class Lr extends mt{static{this[ie]="PgSerial"}getSQLType(){return"serial"}}class ci extends Tt{static{this[ie]="PgTextBuilder"}constructor(e,t){super(e,"string","PgText"),this.config.enumValues=t.enum}build(e){return new Ir(e,this.config)}}class Ir extends mt{static{this[ie]="PgText"}getSQLType(){return"text"}constructor(...e){super(...e),this.enumValues=this.config.enumValues}}let kr=function(d,e,t,o,b=d){let x=new Et(d,o,b),O=Object.fromEntries(Object.entries(e).map(([Z,U])=>{let z=U.build(x);return x[ur].push(...U.buildForeignKeys(z,x)),[Z,z]})),M=Object.assign(x,O);return M[xe.Symbol.Columns]=O,t&&(M[Et.Symbol.ExtraConfigBuilder]=t),M}("users",{id:new hi("id").primaryKey(),name:function(d,e={}){return new ci(d,e)}("name")},void 0,void 0);var ht=Ce(894);let fi=ht.Client;ht.ClientBase,ht.Connection,ht.DatabaseError,ht.NeonDbError;let di=ht.Pool;ht.Query,ht.defaults;let pi=ht.neon;ht.neonConfig,ht.types;var er=class extends Error{constructor(d,e){super(`VercelPostgresError - '${d}': ${e}`),this.code=d,this.name="VercelPostgresError"}};function gi(d,...e){var t,o;if(!(Array.isArray(d)&&"raw"in d&&Array.isArray(d.raw))||!Array.isArray(e))throw new er("incorrect_tagged_template_call","It looks like you tried to call `sql` as a function. Make sure to use it as a tagged template.\n	Example: sql`SELECT * FROM users`, not sql('SELECT * FROM users')");let b=(t=d[0])!=null?t:"";for(let x=1;x<d.length;x++)b+=`$${x}${(o=d[x])!=null?o:""}`;return[b,e]}var A=class extends fi{async sql(d,...e){let[t,o]=gi(d,...e);return this.query(t,o)}},y=class extends di{constructor(d){var e;super(d),this.Client=A,this.connectionString=(e=d.connectionString)!=null?e:""}async sql(d,...e){let[t,o]=gi(d,...e);return pi(this.connectionString,{fullResults:!0})(t,o)}connect(d){return super.connect(d)}};function f(d){var e;let t=(e=d?.connectionString)!=null?e:function(O="pool"){let M;switch(O){case"pool":M=process.env.POSTGRES_URL;break;case"direct":M=process.env.POSTGRES_URL_NON_POOLING;break;default:throw new er("invalid_connection_type",`Unhandled type: ${O}`)}return M==="undefined"&&(M=void 0),M}("pool");if(!t)throw new er("missing_connection_string","You did not supply a 'connectionString' and no 'POSTGRES_URL' env var was found.");if(!function(O){try{let M=O.startsWith("postgresql://")?O.replace("postgresql://","https://"):O;return new URL(M).hostname==="localhost"}catch(M){if(M instanceof TypeError||typeof M=="object"&&M!==null&&"message"in M&&typeof M.message=="string"&&M.message==="Invalid URL")return!1;throw M}}(t)&&!t.includes("-pooler."))throw new er("invalid_connection_string","This connection string is meant to be used with a direct connection. Make sure to use a pooled connection string or try `createClient()` instead.");let o=d?.maxUses,b=d?.max;return o&&o!==1&&console.warn("@vercel/postgres: Overriding `maxUses` to 1 because the EdgeRuntime does not support client reuse."),b&&b!==1e4&&console.warn("@vercel/postgres: Overriding `max` to 10,000 because the EdgeRuntime does not support client reuse."),o=1,b=1e4,new y({...d,connectionString:t,maxUses:o,max:b})}var h=new Proxy(()=>{},{get(d,e){P||(P=f());let t=Reflect.get(P,e);return typeof t=="function"?t.bind(P):t},apply:(d,e,t)=>(P||(P=f()),P.sql(...t))});class u{static{this[ie]="ConsoleLogWriter"}write(e){console.log(e)}}class a{static{this[ie]="DefaultLogger"}constructor(e){this.writer=e?.writer??new u}logQuery(e,t){let o=t.map(x=>{try{return JSON.stringify(x)}catch{return String(x)}}),b=o.length?` -- params: [${o.join(", ")}]`:"";this.writer.write(`Query: ${e}${b}`)}}class s{static{this[ie]="NoopLogger"}logQuery(){}}class p{static{this[ie]="PgPrimaryKeyBuilder"}constructor(e,t){this.columns=e,this.name=t}build(e){return new S(e,this.columns,this.name)}}class S{constructor(e,t,o){this.table=e,this.columns=t,this.name=o}static{this[ie]="PgPrimaryKey"}getName(){return this.name??`${this.table[Et.Symbol.Name]}_${this.columns.map(e=>e.name).join("_")}_pk`}}function E(d,e){return!(typeof e=="object"&&e!==null&&"mapToDriverValue"in e&&typeof e.mapToDriverValue=="function")||fr(d)||se(d,Ot)||se(d,tr)||se(d,ot)||se(d,xe)||se(d,Lt)?d:new Ot(d,e)}let g=(d,e)=>B`${d} = ${E(e,d)}`,v=(d,e)=>B`${d} <> ${E(e,d)}`;function l(...d){let e=d.filter(t=>t!==void 0);return e.length===0?void 0:new Le(e.length===1?e:[new st("("),B.join(e,new st(" and ")),new st(")")])}function C(...d){let e=d.filter(t=>t!==void 0);return e.length===0?void 0:new Le(e.length===1?e:[new st("("),B.join(e,new st(" or ")),new st(")")])}function m(d){return B`not ${d}`}let w=(d,e)=>B`${d} > ${E(e,d)}`,_=(d,e)=>B`${d} >= ${E(e,d)}`,Q=(d,e)=>B`${d} < ${E(e,d)}`,D=(d,e)=>B`${d} <= ${E(e,d)}`;function R(d,e){if(Array.isArray(e)){if(e.length===0)throw Error("inArray requires at least one value");return B`${d} in ${e.map(t=>E(t,d))}`}return B`${d} in ${E(e,d)}`}function X(d,e){if(Array.isArray(e)){if(e.length===0)throw Error("notInArray requires at least one value");return B`${d} not in ${e.map(t=>E(t,d))}`}return B`${d} not in ${E(e,d)}`}function me(d){return B`${d} is null`}function q(d){return B`${d} is not null`}function W(d){return B`exists (${d})`}function Y(d){return B`not exists (${d})`}function k(d,e,t){return B`${d} between ${E(e,d)} and ${E(t,d)}`}function V(d,e,t){return B`${d} not between ${E(e,d)} and ${E(t,d)}`}function pe(d,e){return B`${d} like ${e}`}function Ie(d,e){return B`${d} not like ${e}`}function ne(d,e){return B`${d} ilike ${e}`}function De(d,e){return B`${d} not ilike ${e}`}function Be(d){return B`${d} asc`}function $e(d){return B`${d} desc`}class et{constructor(e,t,o){this.sourceTable=e,this.referencedTable=t,this.relationName=o,this.referencedTableName=t[xe.Symbol.Name]}static{this[ie]="Relation"}}class ze{constructor(e,t){this.table=e,this.config=t}static{this[ie]="Relations"}}class je extends et{constructor(e,t,o,b){super(e,t,o?.relationName),this.config=o,this.isNullable=b}static{this[ie]="One"}withFieldName(e){let t=new je(this.sourceTable,this.referencedTable,this.config,this.isNullable);return t.fieldName=e,t}}class Ye extends et{constructor(e,t,o){super(e,t,o?.relationName),this.config=o}static{this[ie]="Many"}withFieldName(e){let t=new Ye(this.sourceTable,this.referencedTable,this.config);return t.fieldName=e,t}}function Or(d){return{one:function(e,t){return new je(d,e,t,t?.fields.reduce((o,b)=>o&&b.notNull,!0)??!1)},many:function(e,t){return new Ye(d,e,t)}}}let ct=Symbol.for("drizzle:SubqueryConfig");class bt{static{this[ie]="Subquery"}constructor(e,t,o,b=!1){this[ct]={sql:e,selection:t,alias:o,isWith:b}}}class cr extends bt{static{this[ie]="WithSubquery"}}let yt={startActiveSpan:(d,e)=>Ae?(ae||(ae=Ae.trace.getTracer("drizzle-orm","0.29.0")),Rr((t,o)=>o.startActiveSpan(d,b=>{try{return e(b)}catch(x){throw b.setStatus({code:t.SpanStatusCode.ERROR,message:x instanceof Error?x.message:"Unknown error"}),x}finally{b.end()}}),Ae,ae)):e()},tt=Symbol.for("drizzle:ViewBaseConfig");class Mr{static{this[ie]="FakePrimitiveParam"}}function fr(d){return typeof d=="object"&&d!==null&&"getSQL"in d&&typeof d.getSQL=="function"}class st{static{this[ie]="StringChunk"}constructor(e){this.value=Array.isArray(e)?e:[e]}getSQL(){return new Le([this])}}class Le{constructor(e){this.decoder=jt,this.shouldInlineParams=!1,this.queryChunks=e}static{this[ie]="SQL"}append(e){return this.queryChunks.push(...e.queryChunks),this}toQuery(e){return yt.startActiveSpan("drizzle.buildSQL",t=>{let o=this.buildQueryFromSourceParams(this.queryChunks,e);return t?.setAttributes({"drizzle.query.text":o.sql,"drizzle.query.params":JSON.stringify(o.params)}),o})}buildQueryFromSourceParams(e,t){let o=Object.assign({},t,{inlineParams:t.inlineParams||this.shouldInlineParams,paramStartIndex:t.paramStartIndex||{value:0}}),{escapeName:b,escapeParam:x,prepareTyping:O,inlineParams:M,paramStartIndex:Z}=o;return function(U){let z={sql:"",params:[]};for(let G of U)z.sql+=G.sql,z.params.push(...G.params),G.typings?.length&&(z.typings||(z.typings=[]),z.typings.push(...G.typings));return z}(e.map(U=>{if(se(U,st))return{sql:U.value.join(""),params:[]};if(se(U,Rt))return{sql:b(U.value),params:[]};if(U===void 0)return{sql:"",params:[]};if(Array.isArray(U)){let z=[new st("(")];for(let[G,re]of U.entries())z.push(re),G<U.length-1&&z.push(new st(", "));return z.push(new st(")")),this.buildQueryFromSourceParams(z,o)}if(se(U,Le))return this.buildQueryFromSourceParams(U.queryChunks,{...o,inlineParams:M||U.shouldInlineParams});if(se(U,xe)){let z=U[xe.Symbol.Schema],G=U[xe.Symbol.Name];return{sql:z===void 0?b(G):b(z)+"."+b(G),params:[]}}if(se(U,ot))return{sql:b(U.table[xe.Symbol.Name])+"."+b(U.name),params:[]};if(se(U,Lt)){let z=U[tt].schema,G=U[tt].name;return{sql:z===void 0?b(G):b(z)+"."+b(G),params:[]}}if(se(U,Ot)){let z,G=U.value===null?null:U.encoder.mapToDriverValue(U.value);return se(G,Le)?this.buildQueryFromSourceParams([G],o):M?{sql:this.mapInlineParam(G,o),params:[]}:(O!==void 0&&(z=[O(U.encoder)]),{sql:x(Z.value++,G),params:[G],typings:z})}return se(U,tr)?{sql:x(Z.value++,U),params:[U]}:se(U,Le.Aliased)&&U.fieldAlias!==void 0?{sql:b(U.fieldAlias),params:[]}:se(U,bt)?U[ct].isWith?{sql:b(U[ct].alias),params:[]}:this.buildQueryFromSourceParams([new st("("),U[ct].sql,new st(") "),new Rt(U[ct].alias)],o):fr(U)?this.buildQueryFromSourceParams([new st("("),U.getSQL(),new st(")")],o):se(U,et)?this.buildQueryFromSourceParams([U.sourceTable,new st("."),B.identifier(U.fieldName)],o):M?{sql:this.mapInlineParam(U,o),params:[]}:{sql:x(Z.value++,U),params:[U]}}))}mapInlineParam(e,{escapeString:t}){if(e===null)return"null";if(typeof e=="number"||typeof e=="boolean")return e.toString();if(typeof e=="string")return t(e);if(typeof e=="object"){let o=e.toString();return t(o==="[object Object]"?JSON.stringify(e):o)}throw Error("Unexpected param value: "+e)}getSQL(){return this}as(e){return e===void 0?this:new Le.Aliased(this,e)}mapWith(e){return this.decoder=typeof e=="function"?{mapFromDriverValue:e}:e,this}inlineParams(){return this.shouldInlineParams=!0,this}}class Rt{constructor(e){this.value=e}static{this[ie]="Name"}getSQL(){return new Le([this])}}let jt={mapFromDriverValue:d=>d},mi={mapToDriverValue:d=>d};({...jt,...mi});class Ot{constructor(e,t=mi){this.value=e,this.encoder=t}static{this[ie]="Param"}getSQL(){return new Le([this])}}function B(d,...e){let t=[];for(let[o,b]of((e.length>0||d.length>0&&d[0]!=="")&&t.push(new st(d[0])),e.entries()))t.push(b,new st(d[o+1]));return new Le(t)}(d=>{d.empty=function(){return new Le([])},d.fromList=function(e){return new Le(e)},d.raw=function(e){return new Le([new st(e)])},d.join=function(e,t){let o=[];for(let[b,x]of e.entries())b>0&&t!==void 0&&o.push(t),o.push(x);return new Le(o)},d.identifier=function(e){return new Rt(e)},d.placeholder=function(e){return new tr(e)},d.param=function(e,t){return new Ot(e,t)}})(B||(B={})),(d=>{class e{constructor(o,b){this.isSelectionField=!1,this.sql=o,this.fieldAlias=b}static{this[ie]="SQL.Aliased"}getSQL(){return this.sql}clone(){return new e(this.sql,this.fieldAlias)}}d.Aliased=e})(Le||(Le={}));class tr{constructor(e){this.name=e}static{this[ie]="Placeholder"}getSQL(){return new Le([this])}}function dr(d,e){return d.map(t=>{if(se(t,tr)){if(!(t.name in e))throw Error(`No value for placeholder "${t.name}" was provided`);return e[t.name]}return t})}class Lt{static{this[ie]="View"}constructor({name:e,schema:t,selectedFields:o,query:b}){this[tt]={name:e,originalName:e,schema:t,selectedFields:o,query:b,isExisting:!b,isAlias:!1}}getSQL(){return new Le([this])}}ot.prototype.getSQL=function(){return new Le([this])},xe.prototype.getSQL=function(){return new Le([this])},bt.prototype.getSQL=function(){return new Le([this])};class Mt{constructor(e){this.table=e}static{this[ie]="ColumnAliasProxyHandler"}get(e,t){return t==="table"?this.table:e[t]}}class vt{constructor(e,t){this.alias=e,this.replaceOriginalName=t}static{this[ie]="TableAliasProxyHandler"}get(e,t){if(t===xe.Symbol.IsAlias)return!0;if(t===xe.Symbol.Name||this.replaceOriginalName&&t===xe.Symbol.OriginalName)return this.alias;if(t===tt)return{...e[tt],name:this.alias,isAlias:!0};if(t===xe.Symbol.Columns){let b=e[xe.Symbol.Columns];if(!b)return b;let x={};return Object.keys(b).map(O=>{x[O]=new Proxy(b[O],new Mt(new Proxy(e,this)))}),x}let o=e[t];return se(o,ot)?new Proxy(o,new Mt(new Proxy(e,this))):o}}class Nr{constructor(e){this.alias=e}static{this[ie]="RelationTableAliasProxyHandler"}get(e,t){return t==="sourceTable"?pr(e.sourceTable,this.alias):e[t]}}function pr(d,e){return new Proxy(d,new vt(e,!1))}function ft(d,e){return new Proxy(d,new Mt(new Proxy(d.table,new vt(e,!1))))}function Dr(d,e){return new Le.Aliased(r(d.sql,e),d.fieldAlias)}function r(d,e){return B.join(d.queryChunks.map(t=>se(t,ot)?ft(t,e):se(t,Le)?r(t,e):se(t,Le.Aliased)?Dr(t,e):t))}class n extends Error{static{this[ie]="DrizzleError"}constructor({message:e,cause:t}){super(e),this.name="DrizzleError",this.cause=t}}class c extends n{static{this[ie]="TransactionRollbackError"}constructor(){super({message:"Rollback"})}}class L extends Tt{static{this[ie]="PgJsonbBuilder"}constructor(e){super(e,"json","PgJsonb")}build(e){return new $(e,this.config)}}class $ extends mt{static{this[ie]="PgJsonb"}constructor(e,t){super(e,t)}getSQLType(){return"jsonb"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{}return e}}class K extends Tt{static{this[ie]="PgJsonBuilder"}constructor(e){super(e,"json","PgJson")}build(e){return new ce(e,this.config)}}class ce extends mt{static{this[ie]="PgJson"}constructor(e,t){super(e,t)}getSQLType(){return"json"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{}return e}}class Ze extends Tt{static{this[ie]="PgNumericBuilder"}constructor(e,t,o){super(e,"string","PgNumeric"),this.config.precision=t,this.config.scale=o}build(e){return new at(e,this.config)}}class at extends mt{static{this[ie]="PgNumeric"}constructor(e,t){super(e,t),this.precision=t.precision,this.scale=t.scale}getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}}class nt extends Tt{static{this[ie]="PgDateColumnBaseBuilder"}defaultNow(){return this.default(B`now()`)}}class Ve extends nt{constructor(e,t,o){super(e,"string","PgTime"),this.withTimezone=t,this.precision=o,this.config.withTimezone=t,this.config.precision=o}static{this[ie]="PgTimeBuilder"}build(e){return new lt(e,this.config)}}class lt extends mt{static{this[ie]="PgTime"}constructor(e,t){super(e,t),this.withTimezone=t.withTimezone,this.precision=t.precision}getSQLType(){return`time${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}class ys extends nt{static{this[ie]="PgTimestampBuilder"}constructor(e,t,o){super(e,"date","PgTimestamp"),this.config.withTimezone=t,this.config.precision=o}build(e){return new ki(e,this.config)}}class ki extends mt{static{this[ie]="PgTimestamp"}constructor(e,t){super(e,t),this.mapFromDriverValue=o=>new Date(this.withTimezone?o:o+"+0000"),this.mapToDriverValue=o=>this.withTimezone?o.toUTCString():o.toISOString(),this.withTimezone=t.withTimezone,this.precision=t.precision}getSQLType(){return`timestamp${this.precision===void 0?"":` (${this.precision})`}${this.withTimezone?" with time zone":""}`}}class bs extends nt{static{this[ie]="PgTimestampStringBuilder"}constructor(e,t,o){super(e,"string","PgTimestampString"),this.config.withTimezone=t,this.config.precision=o}build(e){return new Hi(e,this.config)}}class Hi extends mt{static{this[ie]="PgTimestampString"}constructor(e,t){super(e,t),this.withTimezone=t.withTimezone,this.precision=t.precision}getSQLType(){return`timestamp${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}class vs extends nt{static{this[ie]="PgDateBuilder"}constructor(e){super(e,"date","PgDate")}build(e){return new Oi(e,this.config)}}class Oi extends mt{static{this[ie]="PgDate"}getSQLType(){return"date"}mapFromDriverValue(e){return new Date(e)}mapToDriverValue(e){return e.toISOString()}}class ws extends nt{static{this[ie]="PgDateStringBuilder"}constructor(e){super(e,"string","PgDateString")}build(e){return new Wi(e,this.config)}}class Wi extends mt{static{this[ie]="PgDateString"}getSQLType(){return"date"}}class Ss extends Tt{static{this[ie]="PgUUIDBuilder"}constructor(e){super(e,"string","PgUUID")}defaultRandom(){return this.default(B`gen_random_uuid()`)}build(e){return new Mi(e,this.config)}}class Mi extends mt{static{this[ie]="PgUUID"}getSQLType(){return"uuid"}}function rr(d,e){return Object.entries(d).reduce((t,[o,b])=>{if(typeof o!="string")return t;let x=e?[...e,o]:[o];return se(b,ot)||se(b,Le)||se(b,Le.Aliased)?t.push({path:x,field:b}):se(b,xe)?t.push(...rr(b[xe.Symbol.Columns],x)):t.push(...rr(b,x)),t},[])}function Ni(d,e){let t=Object.keys(d),o=Object.keys(e);if(t.length!==o.length)return!1;for(let[b,x]of t.entries())if(x!==o[b])return!1;return!0}function Di(d,e){let t=Object.entries(e).filter(([,o])=>o!==void 0).map(([o,b])=>se(b,Le)?[o,b]:[o,new Ot(b,d[xe.Symbol.Columns][o])]);if(t.length===0)throw Error("No values to set");return Object.fromEntries(t)}function Bi(d){return se(d,bt)?d[ct].alias:se(d,Lt)?d[tt].name:se(d,Le)?void 0:d[xe.Symbol.IsAlias]?d[xe.Symbol.Name]:d[xe.Symbol.BaseName]}class $i extends Lt{static{this[ie]="PgViewBase"}}class qi{static{this[ie]="PgDialect"}async migrate(e,t){let o=B`
			CREATE TABLE IF NOT EXISTS "drizzle"."__drizzle_migrations" (
				id SERIAL PRIMARY KEY,
				hash text NOT NULL,
				created_at bigint
			)
		`;await t.execute(B`CREATE SCHEMA IF NOT EXISTS "drizzle"`),await t.execute(o);let b=await t.all(B`select id, hash, created_at from "drizzle"."__drizzle_migrations" order by created_at desc limit 1`),x=b[0];await t.transaction(async O=>{for await(let M of e)if(!x||Number(x.created_at)<M.folderMillis){for(let Z of M.sql)await O.execute(B.raw(Z));await O.execute(B`insert into "drizzle"."__drizzle_migrations" ("hash", "created_at") values(${M.hash}, ${M.folderMillis})`)}})}escapeName(e){return`"${e}"`}escapeParam(e){return`$${e+1}`}escapeString(e){return`'${e.replace(/'/g,"''")}'`}buildDeleteQuery({table:e,where:t,returning:o}){let b=o?B` returning ${this.buildSelection(o,{isSingleTable:!0})}`:void 0,x=t?B` where ${t}`:void 0;return B`delete from ${e}${x}${b}`}buildUpdateSet(e,t){let o=Object.entries(t),b=o.length;return B.join(o.flatMap(([x,O],M)=>{let Z=e[xe.Symbol.Columns][x],U=B`${B.identifier(Z.name)} = ${O}`;return M<b-1?[U,B.raw(", ")]:[U]}))}buildUpdateQuery({table:e,set:t,where:o,returning:b}){let x=this.buildUpdateSet(e,t),O=b?B` returning ${this.buildSelection(b,{isSingleTable:!0})}`:void 0,M=o?B` where ${o}`:void 0;return B`update ${e} set ${x}${M}${O}`}buildSelection(e,{isSingleTable:t=!1}={}){let o=e.length,b=e.flatMap(({field:x},O)=>{let M=[];if(se(x,Le.Aliased)&&x.isSelectionField)M.push(B.identifier(x.fieldAlias));else if(se(x,Le.Aliased)||se(x,Le)){let Z=se(x,Le.Aliased)?x.sql:x;t?M.push(new Le(Z.queryChunks.map(U=>se(U,mt)?B.identifier(U.name):U))):M.push(Z),se(x,Le.Aliased)&&M.push(B` as ${B.identifier(x.fieldAlias)}`)}else se(x,ot)&&(t?M.push(B.identifier(x.name)):M.push(x));return O<o-1&&M.push(B`, `),M});return B.join(b)}buildSelectQuery({withList:e,fields:t,fieldsFlat:o,where:b,having:x,table:O,joins:M,orderBy:Z,groupBy:U,limit:z,offset:G,lockingClause:re,distinct:we,setOperators:te}){let Te,ye,_e,Se,ge=o??rr(t);for(let Ge of ge){var Oe;if(se(Ge.field,ot)&&Ge.field.table[kt]!==(se(O,bt)?O[ct].alias:se(O,$i)?O[tt].name:se(O,Le)?void 0:O[kt])&&(Oe=Ge.field.table,!M?.some(({alias:it})=>it===(Oe[xe.Symbol.IsAlias]?Oe[kt]:Oe[xe.Symbol.BaseName])))){let it=Ge.field.table[kt];throw Error(`Your "${Ge.path.join("->")}" field references a column "${it}"."${Ge.field.name}", but the table "${it}" is not part of the query! Did you forget to join it?`)}}let Fe=!M||M.length===0;if(e?.length){let Ge=[B`with `];for(let[it,He]of e.entries())Ge.push(B`${B.identifier(He[ct].alias)} as (${He[ct].sql})`),it<e.length-1&&Ge.push(B`, `);Ge.push(B` `),Te=B.join(Ge)}we&&(ye=we===!0?B` distinct`:B` distinct on (${B.join(we.on,", ")})`);let Me=this.buildSelection(ge,{isSingleTable:Fe}),qe=(()=>{if(se(O,xe)&&O[xe.Symbol.OriginalName]!==O[xe.Symbol.Name]){let Ge=B`${B.identifier(O[xe.Symbol.OriginalName])}`;return O[xe.Symbol.Schema]&&(Ge=B`${B.identifier(O[xe.Symbol.Schema])}.${Ge}`),B`${Ge} ${B.identifier(O[xe.Symbol.Name])}`}return O})(),rt=[];if(M)for(let[Ge,it]of M.entries()){Ge===0&&rt.push(B` `);let He=it.table,Ft=it.lateral?B` lateral`:void 0;if(se(He,Et)){let yr=He[Et.Symbol.Name],Kt=He[Et.Symbol.Schema],Vt=He[Et.Symbol.OriginalName],_t=yr===Vt?void 0:it.alias;rt.push(B`${B.raw(it.joinType)} join${Ft} ${Kt?B`${B.identifier(Kt)}.`:void 0}${B.identifier(Vt)}${_t&&B` ${B.identifier(_t)}`} on ${it.on}`)}else if(se(He,Lt)){let yr=He[tt].name,Kt=He[tt].schema,Vt=He[tt].originalName,_t=yr===Vt?void 0:it.alias;rt.push(B`${B.raw(it.joinType)} join${Ft} ${Kt?B`${B.identifier(Kt)}.`:void 0}${B.identifier(Vt)}${_t&&B` ${B.identifier(_t)}`} on ${it.on}`)}else rt.push(B`${B.raw(it.joinType)} join${Ft} ${He} on ${it.on}`);Ge<M.length-1&&rt.push(B` `)}let Dt=B.join(rt),Ut=b?B` where ${b}`:void 0,Br=x?B` having ${x}`:void 0;Z&&Z.length>0&&(_e=B` order by ${B.join(Z,B`, `)}`),U&&U.length>0&&(Se=B` group by ${B.join(U,B`, `)}`);let ir=z?B` limit ${z}`:void 0,Li=G?B` offset ${G}`:void 0,$r=B.empty();if(re){let Ge=B` for ${B.raw(re.strength)}`;re.config.of&&Ge.append(B` of ${B.join(Array.isArray(re.config.of)?re.config.of:[re.config.of],B`, `)}`),re.config.noWait?Ge.append(B` no wait`):re.config.skipLocked&&Ge.append(B` skip locked`),$r.append(Ge)}let yi=B`${Te}select${ye} ${Me} from ${qe}${Dt}${Ut}${Se}${Br}${_e}${ir}${Li}${$r}`;return te.length>0?this.buildSetOperations(yi,te):yi}buildSetOperations(e,t){let[o,...b]=t;if(!o)throw Error("Cannot pass undefined values to any set operator");return b.length===0?this.buildSetOperationQuery({leftSelect:e,setOperator:o}):this.buildSetOperations(this.buildSetOperationQuery({leftSelect:e,setOperator:o}),b)}buildSetOperationQuery({leftSelect:e,setOperator:{type:t,isAll:o,rightSelect:b,limit:x,orderBy:O,offset:M}}){let Z,U=B`(${e.getSQL()}) `,z=B`(${b.getSQL()})`;if(O&&O.length>0){let te=[];for(let Te of O)if(se(Te,mt))te.push(B.identifier(Te.name));else if(se(Te,Le)){for(let ye=0;ye<Te.queryChunks.length;ye++){let _e=Te.queryChunks[ye];se(_e,mt)&&(Te.queryChunks[ye]=B.identifier(_e.name))}te.push(B`${Te}`)}else te.push(B`${Te}`);Z=B` order by ${B.join(te,B`, `)} `}let G=x?B` limit ${x}`:void 0,re=B.raw(`${t} ${o?"all ":""}`),we=M?B` offset ${M}`:void 0;return B`${U}${re}${z}${Z}${G}${we}`}buildInsertQuery({table:e,values:t,onConflict:o,returning:b}){let x=[],O=e[xe.Symbol.Columns],M=Object.entries(O),Z=M.map(([,re])=>B.identifier(re.name));for(let[re,we]of t.entries()){let te=[];for(let[Te,ye]of M){let _e=we[Te];if(_e===void 0||se(_e,Ot)&&_e.value===void 0)if(ye.defaultFn!==void 0){let Se=ye.defaultFn(),ge=se(Se,Le)?Se:B.param(Se,ye);te.push(ge)}else te.push(B`default`);else te.push(_e)}x.push(te),re<t.length-1&&x.push(B`, `)}let U=B.join(x),z=b?B` returning ${this.buildSelection(b,{isSingleTable:!0})}`:void 0,G=o?B` on conflict ${o}`:void 0;return B`insert into ${e} ${Z} values ${U}${G}${z}`}buildRefreshMaterializedViewQuery({view:e,concurrently:t,withNoData:o}){let b=t?B` concurrently`:void 0,x=o?B` with no data`:void 0;return B`refresh materialized view${b} ${e}${x}`}prepareTyping(e){return se(e,$)||se(e,ce)?"json":se(e,at)?"decimal":se(e,lt)?"time":se(e,ki)?"timestamp":se(e,Oi)?"date":se(e,Mi)?"uuid":"none"}sqlToQuery(e){return e.toQuery({escapeName:this.escapeName,escapeParam:this.escapeParam,escapeString:this.escapeString,prepareTyping:this.prepareTyping})}buildRelationalQueryWithoutPK({fullSchema:e,schema:t,tableNamesMap:o,table:b,tableConfig:x,queryConfig:O,tableAlias:M,nestedQueryRelation:Z,joinOn:U}){let z,G=[],re,we,te=[],Te,ye=[];if(O===!0)G=Object.entries(x.columns).map(([Se,ge])=>({dbKey:ge.name,tsKey:Se,field:ft(ge,M),relationTableTsKey:void 0,isJson:!1,selection:[]}));else{let _e=Object.fromEntries(Object.entries(x.columns).map(([Me,qe])=>[Me,ft(qe,M)]));if(O.where){let Me=typeof O.where=="function"?O.where(_e,{and:l,between:k,eq:g,exists:W,gt:w,gte:_,ilike:ne,inArray:R,isNull:me,isNotNull:q,like:pe,lt:Q,lte:D,ne:v,not:m,notBetween:V,notExists:Y,notLike:Ie,notIlike:De,notInArray:X,or:C,sql:B}):O.where;Te=Me&&r(Me,M)}let Se=[],ge=[];if(O.columns){let Me=!1;for(let[qe,rt]of Object.entries(O.columns))rt!==void 0&&qe in x.columns&&(Me||rt!==!0||(Me=!0),ge.push(qe));ge.length>0&&(ge=Me?ge.filter(qe=>O.columns?.[qe]===!0):Object.keys(x.columns).filter(qe=>!ge.includes(qe)))}else ge=Object.keys(x.columns);for(let Me of ge){let qe=x.columns[Me];Se.push({tsKey:Me,value:qe})}let Oe=[];if(O.with&&(Oe=Object.entries(O.with).filter(Me=>!!Me[1]).map(([Me,qe])=>({tsKey:Me,queryConfig:qe,relation:x.relations[Me]}))),O.extras)for(let[Me,qe]of Object.entries(typeof O.extras=="function"?O.extras(_e,{sql:B}):O.extras))Se.push({tsKey:Me,value:Dr(qe,M)});for(let{tsKey:Me,value:qe}of Se)G.push({dbKey:se(qe,Le.Aliased)?qe.fieldAlias:x.columns[Me].name,tsKey:Me,field:se(qe,ot)?ft(qe,M):qe,relationTableTsKey:void 0,isJson:!1,selection:[]});let Fe=typeof O.orderBy=="function"?O.orderBy(_e,{sql:B,asc:Be,desc:$e}):O.orderBy??[];for(let{tsKey:Me,queryConfig:qe,relation:rt}of(Array.isArray(Fe)||(Fe=[Fe]),te=Fe.map(Dt=>se(Dt,ot)?ft(Dt,M):r(Dt,M)),re=O.limit,we=O.offset,Oe)){let Dt=function(Ge,it,He){if(se(He,je)&&He.config)return{fields:He.config.fields,references:He.config.references};let Ft=it[He.referencedTable[xe.Symbol.Name]];if(!Ft)throw Error(`Table "${He.referencedTable[xe.Symbol.Name]}" not found in schema`);let yr=Ge[Ft];if(!yr)throw Error(`Table "${Ft}" not found in schema`);let Kt=He.sourceTable,Vt=it[Kt[xe.Symbol.Name]];if(!Vt)throw Error(`Table "${Kt[xe.Symbol.Name]}" not found in schema`);let _t=[];for(let bi of Object.values(yr.relations))(He.relationName&&He!==bi&&bi.relationName===He.relationName||!He.relationName&&bi.referencedTable===He.sourceTable)&&_t.push(bi);if(_t.length>1)throw He.relationName?Error(`There are multiple relations with name "${He.relationName}" in table "${Ft}"`):Error(`There are multiple relations between "${Ft}" and "${He.sourceTable[xe.Symbol.Name]}". Please specify relation name`);if(_t[0]&&se(_t[0],je)&&_t[0].config)return{fields:_t[0].config.references,references:_t[0].config.fields};throw Error(`There is not enough information to infer relation "${Vt}.${He.fieldName}"`)}(t,o,rt),Ut=rt.referencedTable[xe.Symbol.Name],Br=o[Ut],ir=`${M}_${Me}`,Li=l(...Dt.fields.map((Ge,it)=>g(ft(Dt.references[it],ir),ft(Ge,M)))),$r=this.buildRelationalQueryWithoutPK({fullSchema:e,schema:t,tableNamesMap:o,table:e[Br],tableConfig:t[Br],queryConfig:se(rt,je)?qe===!0?{limit:1}:{...qe,limit:1}:qe,tableAlias:ir,joinOn:Li,nestedQueryRelation:rt}),yi=B`${B.identifier(ir)}.${B.identifier("data")}`.as(Me);ye.push({on:B`true`,table:new bt($r.sql,{},ir),alias:ir,joinType:"left",lateral:!0}),G.push({dbKey:Me,tsKey:Me,field:yi,relationTableTsKey:Br,isJson:!0,selection:$r.selection})}}if(G.length===0)throw new n({message:`No fields selected for table "${x.tsName}" ("${M}")`});if(Te=l(U,Te),Z){let _e=B`json_build_array(${B.join(G.map(({field:Oe,tsKey:Fe,isJson:Me})=>Me?B`${B.identifier(`${M}_${Fe}`)}.${B.identifier("data")}`:se(Oe,Le.Aliased)?Oe.sql:Oe),B`, `)})`;se(Z,Ye)&&(_e=B`coalesce(json_agg(${_e}${te.length>0?B` order by ${B.join(te,B`, `)}`:void 0}), '[]'::json)`);let Se=[{dbKey:"data",tsKey:"data",field:_e.as("data"),isJson:!0,relationTableTsKey:x.tsName,selection:G}];re!==void 0||we!==void 0||te.length>0?(z=this.buildSelectQuery({table:pr(b,M),fields:{},fieldsFlat:[{path:[],field:B.raw("*")}],where:Te,limit:re,offset:we,orderBy:te,setOperators:[]}),Te=void 0,re=void 0,we=void 0,te=[]):z=pr(b,M),z=this.buildSelectQuery({table:se(z,Et)?z:new bt(z,{},M),fields:{},fieldsFlat:Se.map(({field:Oe})=>({path:[],field:se(Oe,ot)?ft(Oe,M):Oe})),joins:ye,where:Te,limit:re,offset:we,orderBy:te,setOperators:[]})}else z=this.buildSelectQuery({table:pr(b,M),fields:{},fieldsFlat:G.map(({field:_e})=>({path:[],field:se(_e,ot)?ft(_e,M):_e})),joins:ye,where:Te,limit:re,offset:we,orderBy:te,setOperators:[]});return{tableTsKey:x.tsName,sql:z,selection:G}}}class Ki{static{this[ie]="TypedQueryBuilder"}getSelectedFields(){return this._.selectedFields}}class gr{static{F=Symbol.toStringTag}static{this[ie]="QueryPromise"}catch(e){return this.then(void 0,e)}finally(e){return this.then(t=>(e?.(),t),t=>{throw e?.(),t})}then(e,t){return this.execute().then(e,t)}constructor(){this[F]="QueryPromise"}}class It{static{this[ie]="SelectionProxyHandler"}constructor(e){this.config={...e}}get(e,t){if(t===ct)return{...e[ct],selection:new Proxy(e[ct].selection,this)};if(t===tt)return{...e[tt],selectedFields:new Proxy(e[tt].selectedFields,this)};if(typeof t=="symbol")return e[t];let o=se(e,bt)?e[ct].selection:se(e,Lt)?e[tt].selectedFields:e,b=o[t];if(se(b,Le.Aliased)){if(this.config.sqlAliasedBehavior==="sql"&&!b.isSelectionField)return b.sql;let x=b.clone();return x.isSelectionField=!0,x}if(se(b,Le)){if(this.config.sqlBehavior==="sql")return b;throw Error(`You tried to reference "${t}" field from a subquery, which is a raw SQL field, but it doesn't have an alias declared. Please add an alias to the field using ".as('alias')" method.`)}return se(b,ot)?this.config.alias?new Proxy(b,new Mt(new Proxy(b.table,new vt(this.config.alias,this.config.replaceOriginalName??!1)))):b:typeof b!="object"||b===null?b:new Proxy(b,new It(this.config))}}class Nt{static{this[ie]="PgSelectBuilder"}constructor(e){this.withList=[],this.fields=e.fields,this.session=e.session,this.dialect=e.dialect,e.withList&&(this.withList=e.withList),this.distinct=e.distinct}from(e){let t,o=!!this.fields;return t=this.fields?this.fields:se(e,bt)?Object.fromEntries(Object.keys(e[ct].selection).map(b=>[b,e[b]])):se(e,$i)?e[tt].selectedFields:se(e,Le)?{}:e[xe.Symbol.Columns],new Qi({table:e,fields:t,isPartialSelect:o,session:this.session,dialect:this.dialect,withList:this.withList,distinct:this.distinct})}}class Vi extends Ki{static{this[ie]="PgSelectQueryBuilder"}constructor({table:e,fields:t,isPartialSelect:o,session:b,dialect:x,withList:O,distinct:M}){super(),this.leftJoin=this.createJoin("left"),this.rightJoin=this.createJoin("right"),this.innerJoin=this.createJoin("inner"),this.fullJoin=this.createJoin("full"),this.union=this.createSetOperator("union",!1),this.unionAll=this.createSetOperator("union",!0),this.intersect=this.createSetOperator("intersect",!1),this.intersectAll=this.createSetOperator("intersect",!0),this.except=this.createSetOperator("except",!1),this.exceptAll=this.createSetOperator("except",!0),this.config={withList:O,table:e,fields:{...t},distinct:M,setOperators:[]},this.isPartialSelect=o,this.session=b,this.dialect=x,this._={selectedFields:t},this.tableName=Bi(e),this.joinsNotNullableMap=typeof this.tableName=="string"?{[this.tableName]:!0}:{}}createJoin(e){return(t,o)=>{let b=this.tableName,x=Bi(t);if(typeof x=="string"&&this.config.joins?.some(O=>O.alias===x))throw Error(`Alias "${x}" is already used in this query`);if(!this.isPartialSelect&&(Object.keys(this.joinsNotNullableMap).length===1&&typeof b=="string"&&(this.config.fields={[b]:this.config.fields}),typeof x=="string"&&!se(t,Le))){let O=se(t,bt)?t[ct].selection:se(t,Lt)?t[tt].selectedFields:t[xe.Symbol.Columns];this.config.fields[x]=O}if(typeof o=="function"&&(o=o(new Proxy(this.config.fields,new It({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.joins||(this.config.joins=[]),this.config.joins.push({on:o,table:t,joinType:e,alias:x}),typeof x=="string")switch(e){case"left":this.joinsNotNullableMap[x]=!1;break;case"right":this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([O])=>[O,!1])),this.joinsNotNullableMap[x]=!0;break;case"inner":this.joinsNotNullableMap[x]=!0;break;case"full":this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([O])=>[O,!1])),this.joinsNotNullableMap[x]=!1}return this}}createSetOperator(e,t){return o=>{let b=typeof o=="function"?o(Gi()):o;if(!Ni(this.getSelectedFields(),b.getSelectedFields()))throw Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return this.config.setOperators.push({type:e,isAll:t,rightSelect:b}),this}}addSetOperators(e){return this.config.setOperators.push(...e),this}where(e){return typeof e=="function"&&(e=e(new Proxy(this.config.fields,new It({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.where=e,this}having(e){return typeof e=="function"&&(e=e(new Proxy(this.config.fields,new It({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.having=e,this}groupBy(...e){if(typeof e[0]=="function"){let t=e[0](new Proxy(this.config.fields,new It({sqlAliasedBehavior:"alias",sqlBehavior:"sql"})));this.config.groupBy=Array.isArray(t)?t:[t]}else this.config.groupBy=e;return this}orderBy(...e){if(typeof e[0]=="function"){let t=e[0](new Proxy(this.config.fields,new It({sqlAliasedBehavior:"alias",sqlBehavior:"sql"}))),o=Array.isArray(t)?t:[t];this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=o:this.config.orderBy=o}else this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=e:this.config.orderBy=e;return this}limit(e){return this.config.setOperators.length>0?this.config.setOperators.at(-1).limit=e:this.config.limit=e,this}offset(e){return this.config.setOperators.length>0?this.config.setOperators.at(-1).offset=e:this.config.offset=e,this}for(e,t={}){return this.config.lockingClause={strength:e,config:t},this}getSQL(){return this.dialect.buildSelectQuery(this.config)}toSQL(){let{typings:e,...t}=this.dialect.sqlToQuery(this.getSQL());return t}as(e){return new Proxy(new bt(this.getSQL(),this.config.fields,e),new It({alias:e,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}getSelectedFields(){return new Proxy(this.config.fields,new It({alias:this.tableName,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}$dynamic(){return this}}class Qi extends Vi{static{this[ie]="PgSelect"}_prepare(e){let{session:t,config:o,dialect:b,joinsNotNullableMap:x}=this;if(!t)throw Error("Cannot execute a query on a query builder. Please use a database instance instead.");return yt.startActiveSpan("drizzle.prepareQuery",()=>{let O=rr(o.fields),M=t.prepareQuery(b.sqlToQuery(this.getSQL()),O,e);return M.joinsNotNullableMap=x,M})}prepare(e){return this._prepare(e)}constructor(...e){super(...e),this.execute=t=>yt.startActiveSpan("drizzle.operation",()=>this._prepare().execute(t))}}function mr(d,e){return(t,o,...b)=>{let x=[o,...b].map(O=>({type:d,isAll:e,rightSelect:O}));for(let O of x)if(!Ni(t.getSelectedFields(),O.rightSelect.getSelectedFields()))throw Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return t.addSetOperators(x)}}(function(d,e){for(let t of e)for(let o of Object.getOwnPropertyNames(t.prototype))Object.defineProperty(d.prototype,o,Object.getOwnPropertyDescriptor(t.prototype,o)||Object.create(null))})(Qi,[gr]);let Gi=()=>({union:Ji,unionAll:Yi,intersect:Xi,intersectAll:Zi,except:es,exceptAll:ts}),Ji=mr("union",!1),Yi=mr("union",!0),Xi=mr("intersect",!1),Zi=mr("intersect",!0),es=mr("except",!1),ts=mr("except",!0);class rs{static{this[ie]="PgQueryBuilder"}$with(e){let t=this;return{as:o=>(typeof o=="function"&&(o=o(t)),new Proxy(new cr(o.getSQL(),o.getSelectedFields(),e,!0),new It({alias:e,sqlAliasedBehavior:"alias",sqlBehavior:"error"})))}}with(...e){let t=this;return{select:function(o){return new Nt({fields:o??void 0,session:void 0,dialect:t.getDialect(),withList:e})},selectDistinct:function(o){return new Nt({fields:o??void 0,session:void 0,dialect:t.getDialect(),distinct:!0})},selectDistinctOn:function(o,b){return new Nt({fields:b??void 0,session:void 0,dialect:t.getDialect(),distinct:{on:o}})}}}select(e){return new Nt({fields:e??void 0,session:void 0,dialect:this.getDialect()})}selectDistinct(e){return new Nt({fields:e??void 0,session:void 0,dialect:this.getDialect(),distinct:!0})}selectDistinctOn(e,t){return new Nt({fields:t??void 0,session:void 0,dialect:this.getDialect(),distinct:{on:e}})}getDialect(){return this.dialect||(this.dialect=new qi),this.dialect}}class is{constructor(e,t,o){this.table=e,this.session=t,this.dialect=o}static{this[ie]="PgUpdateBuilder"}set(e){return new ss(this.table,Di(this.table,e),this.session,this.dialect)}}class ss extends gr{constructor(e,t,o,b){super(),this.execute=x=>this._prepare().execute(x),this.session=o,this.dialect=b,this.config={set:t,table:e}}static{this[ie]="PgUpdate"}where(e){return this.config.where=e,this}returning(e=this.config.table[xe.Symbol.Columns]){return this.config.returning=rr(e),this}getSQL(){return this.dialect.buildUpdateQuery(this.config)}toSQL(){let{typings:e,...t}=this.dialect.sqlToQuery(this.getSQL());return t}_prepare(e){return this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,e)}prepare(e){return this._prepare(e)}$dynamic(){return this}}class ns{constructor(e,t,o){this.table=e,this.session=t,this.dialect=o}static{this[ie]="PgInsertBuilder"}values(e){if((e=Array.isArray(e)?e:[e]).length===0)throw Error("values() must be called with at least one value");let t=e.map(o=>{let b={},x=this.table[xe.Symbol.Columns];for(let O of Object.keys(o)){let M=o[O];b[O]=se(M,Le)?M:new Ot(M,x[O])}return b});return new os(this.table,t,this.session,this.dialect)}}class os extends gr{constructor(e,t,o,b){super(),this.execute=x=>yt.startActiveSpan("drizzle.operation",()=>this._prepare().execute(x)),this.session=o,this.dialect=b,this.config={table:e,values:t}}static{this[ie]="PgInsert"}returning(e=this.config.table[xe.Symbol.Columns]){return this.config.returning=rr(e),this}onConflictDoNothing(e={}){if(e.target===void 0)this.config.onConflict=B`do nothing`;else{let t="";t=Array.isArray(e.target)?e.target.map(b=>this.dialect.escapeName(b.name)).join(","):this.dialect.escapeName(e.target.name);let o=e.where?B` where ${e.where}`:void 0;this.config.onConflict=B`(${B.raw(t)}) do nothing${o}`}return this}onConflictDoUpdate(e){let t=e.where?B` where ${e.where}`:void 0,o=this.dialect.buildUpdateSet(this.config.table,Di(this.config.table,e.set)),b="";return b=Array.isArray(e.target)?e.target.map(x=>this.dialect.escapeName(x.name)).join(","):this.dialect.escapeName(e.target.name),this.config.onConflict=B`(${B.raw(b)}) do update set ${o}${t}`,this}getSQL(){return this.dialect.buildInsertQuery(this.config)}toSQL(){let{typings:e,...t}=this.dialect.sqlToQuery(this.getSQL());return t}_prepare(e){return yt.startActiveSpan("drizzle.prepareQuery",()=>this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,e))}prepare(e){return this._prepare(e)}$dynamic(){return this}}class as extends gr{constructor(e,t,o){super(),this.execute=b=>yt.startActiveSpan("drizzle.operation",()=>this._prepare().execute(b)),this.session=t,this.dialect=o,this.config={table:e}}static{this[ie]="PgDelete"}where(e){return this.config.where=e,this}returning(e=this.config.table[xe.Symbol.Columns]){return this.config.returning=rr(e),this}getSQL(){return this.dialect.buildDeleteQuery(this.config)}toSQL(){let{typings:e,...t}=this.dialect.sqlToQuery(this.getSQL());return t}_prepare(e){return yt.startActiveSpan("drizzle.prepareQuery",()=>this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,e))}prepare(e){return this._prepare(e)}$dynamic(){return this}}class ls{constructor(e,t,o,b,x,O,M){this.fullSchema=e,this.schema=t,this.tableNamesMap=o,this.table=b,this.tableConfig=x,this.dialect=O,this.session=M}static{this[ie]="PgRelationalQueryBuilder"}findMany(e){return new ji(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,e||{},"many")}findFirst(e){return new ji(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,e?{...e,limit:1}:{limit:1},"first")}}class ji extends gr{constructor(e,t,o,b,x,O,M,Z,U){super(),this.fullSchema=e,this.schema=t,this.tableNamesMap=o,this.table=b,this.tableConfig=x,this.dialect=O,this.session=M,this.config=Z,this.mode=U}static{this[ie]="PgRelationalQuery"}_prepare(e){return yt.startActiveSpan("drizzle.prepareQuery",()=>{let{query:t,builtQuery:o}=this._toSQL();return this.session.prepareQuery(o,void 0,e,(b,x)=>{let O=b.map(M=>function Z(U,z,G,re,we=te=>te){let te={};for(let[Te,ye]of re.entries())if(ye.isJson){let _e=z.relations[ye.tsKey],Se=G[Te],ge=typeof Se=="string"?JSON.parse(Se):Se;te[ye.tsKey]=se(_e,je)?ge&&Z(U,U[ye.relationTableTsKey],ge,ye.selection,we):ge.map(Oe=>Z(U,U[ye.relationTableTsKey],Oe,ye.selection,we))}else{let _e,Se=we(G[Te]),ge=ye.field;_e=se(ge,ot)?ge:se(ge,Le)?ge.decoder:ge.sql.decoder,te[ye.tsKey]=Se===null?null:_e.mapFromDriverValue(Se)}return te}(this.schema,this.tableConfig,M,t.selection,x));return this.mode==="first"?O[0]:O})})}prepare(e){return this._prepare(e)}_toSQL(){let e=this.dialect.buildRelationalQueryWithoutPK({fullSchema:this.fullSchema,schema:this.schema,tableNamesMap:this.tableNamesMap,table:this.table,tableConfig:this.tableConfig,queryConfig:this.config,tableAlias:this.tableConfig.tsName}),t=this.dialect.sqlToQuery(e.sql);return{query:e,builtQuery:t}}toSQL(){return this._toSQL().builtQuery}execute(){return yt.startActiveSpan("drizzle.operation",()=>this._prepare().execute())}}class us extends gr{constructor(e,t,o){super(),this.execute=b=>yt.startActiveSpan("drizzle.operation",()=>this._prepare().execute(b)),this.session=t,this.dialect=o,this.config={view:e}}static{this[ie]="PgRefreshMaterializedView"}concurrently(){if(this.config.withNoData!==void 0)throw Error("Cannot use concurrently and withNoData together");return this.config.concurrently=!0,this}withNoData(){if(this.config.concurrently!==void 0)throw Error("Cannot use concurrently and withNoData together");return this.config.withNoData=!0,this}getSQL(){return this.dialect.buildRefreshMaterializedViewQuery(this.config)}toSQL(){let{typings:e,...t}=this.dialect.sqlToQuery(this.getSQL());return t}_prepare(e){return yt.startActiveSpan("drizzle.prepareQuery",()=>this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),void 0,e))}prepare(e){return this._prepare(e)}}class Ui{constructor(e,t,o){if(this.dialect=e,this.session=t,this._=o?{schema:o.schema,tableNamesMap:o.tableNamesMap}:{schema:void 0,tableNamesMap:{}},this.query={},this._.schema)for(let[b,x]of Object.entries(this._.schema))this.query[b]=new ls(o.fullSchema,this._.schema,this._.tableNamesMap,o.fullSchema[b],x,e,t)}static{this[ie]="PgDatabase"}$with(e){return{as:t=>(typeof t=="function"&&(t=t(new rs)),new Proxy(new cr(t.getSQL(),t.getSelectedFields(),e,!0),new It({alias:e,sqlAliasedBehavior:"alias",sqlBehavior:"error"})))}}with(...e){let t=this;return{select:function(o){return new Nt({fields:o??void 0,session:t.session,dialect:t.dialect,withList:e})}}}select(e){return new Nt({fields:e??void 0,session:this.session,dialect:this.dialect})}selectDistinct(e){return new Nt({fields:e??void 0,session:this.session,dialect:this.dialect,distinct:!0})}selectDistinctOn(e,t){return new Nt({fields:t??void 0,session:this.session,dialect:this.dialect,distinct:{on:e}})}update(e){return new is(e,this.session,this.dialect)}insert(e){return new ns(e,this.session,this.dialect)}delete(e){return new as(e,this.session,this.dialect)}refreshMaterializedView(e){return new us(e,this.session,this.dialect)}execute(e){return this.session.execute(e.getSQL())}transaction(e,t){return this.session.transaction(e,t)}}class hs{static{this[ie]="PgPreparedQuery"}}class cs{constructor(e){this.dialect=e}static{this[ie]="PgSession"}execute(e){return yt.startActiveSpan("drizzle.operation",()=>yt.startActiveSpan("drizzle.prepareQuery",()=>this.prepareQuery(this.dialect.sqlToQuery(e),void 0,void 0)).execute())}all(e){return this.prepareQuery(this.dialect.sqlToQuery(e),void 0,void 0).all()}}class fs extends Ui{constructor(e,t,o,b=0){super(e,t,o),this.schema=o,this.nestedIndex=b}static{this[ie]="PgTransaction"}rollback(){throw new c}getTransactionConfigSQL(e){let t=[];return e.isolationLevel&&t.push(`isolation level ${e.isolationLevel}`),e.accessMode&&t.push(e.accessMode),typeof e.deferrable=="boolean"&&t.push(e.deferrable?"deferrable":"not deferrable"),B.raw(t.join(" "))}setTransaction(e){return this.session.execute(B`set transaction ${this.getTransactionConfigSQL(e)}`)}}class ds extends hs{constructor(e,t,o,b,x,O,M){super(),this.client=e,this.params=o,this.logger=b,this.fields=x,this.customResultMapper=M,this.rawQuery={name:O,text:t},this.query={name:O,text:t,rowMode:"array"}}static{this[ie]="VercelPgPreparedQuery"}async execute(e={}){let t=dr(this.params,e);this.logger.logQuery(this.rawQuery.text,t);let{fields:o,rawQuery:b,client:x,query:O,joinsNotNullableMap:M,customResultMapper:Z}=this;if(!o&&!Z)return x.query(b,t);let{rows:U}=await x.query(O,t);return Z?Z(U):U.map(z=>function(G,re,we){let te={},Te=G.reduce((ye,{path:_e,field:Se},ge)=>{let Oe;Oe=se(Se,ot)?Se:se(Se,Le)?Se.decoder:Se.sql.decoder;let Fe=ye;for(let[Me,qe]of _e.entries())if(Me<_e.length-1)qe in Fe||(Fe[qe]={}),Fe=Fe[qe];else{let rt=re[ge],Dt=Fe[qe]=rt===null?null:Oe.mapFromDriverValue(rt);if(we&&se(Se,ot)&&_e.length===2){let Ut=_e[0];Ut in te?typeof te[Ut]=="string"&&te[Ut]!==Se.table[kt]&&(te[Ut]=!1):te[Ut]=Dt===null&&Se.table[kt]}}return ye},{});if(we&&Object.keys(te).length>0)for(let[ye,_e]of Object.entries(te))typeof _e!="string"||we[_e]||(Te[ye]=null);return Te}(o,z,M))}all(e={}){let t=dr(this.params,e);return this.logger.logQuery(this.rawQuery.text,t),this.client.query(this.rawQuery,t).then(o=>o.rows)}values(e={}){let t=dr(this.params,e);return this.logger.logQuery(this.rawQuery.text,t),this.client.query(this.query,t).then(o=>o.rows)}}class Ti extends cs{constructor(e,t,o,b={}){super(t),this.client=e,this.schema=o,this.options=b,this.logger=b.logger??new s}static{this[ie]="VercelPgSession"}prepareQuery(e,t,o,b){return new ds(this.client,e.sql,e.params,this.logger,t,o,b)}async query(e,t){return this.logger.logQuery(e,t),await this.client.query({rowMode:"array",text:e,values:t})}async queryObjects(e,t){return this.client.query(e,t)}async transaction(e,t){let o=this.client instanceof y?new Ti(await this.client.connect(),this.dialect,this.schema,this.options):this,b=new Ri(this.dialect,o,this.schema);await b.execute(B`begin${t?B` ${b.getTransactionConfigSQL(t)}`:void 0}`);try{let x=await e(b);return await b.execute(B`commit`),x}catch(x){throw await b.execute(B`rollback`),x}finally{this.client instanceof y&&o.client.release()}}}class Ri extends fs{static{this[ie]="VercelPgTransaction"}async transaction(e){let t=`sp${this.nestedIndex+1}`,o=new Ri(this.dialect,this.session,this.schema,this.nestedIndex+1);await o.execute(B.raw(`savepoint ${t}`));try{let b=await e(o);return await o.execute(B.raw(`release savepoint ${t}`)),b}catch(b){throw await o.execute(B.raw(`rollback to savepoint ${t}`)),b}}}class ps{constructor(e,t,o={}){this.client=e,this.dialect=t,this.options=o,this.initMappers()}static{this[ie]="VercelPgDriver"}createSession(e){return new Ti(this.client,this.dialect,e,{logger:this.options.logger})}initMappers(){}}let Fi=function(d,e={}){let t,o,b=new qi;if(e.logger===!0?t=new a:e.logger!==!1&&(t=e.logger),e.schema){let M=function(Z,U){Object.keys(Z).length===1&&"default"in Z&&!se(Z.default,xe)&&(Z=Z.default);let z={},G={},re={};for(let[we,te]of Object.entries(Z))if(typeof te=="object"&&te!==null&&Tr in te){let Te=te[xe.Symbol.Name],ye=G[Te];for(let Se of(z[Te]=we,re[we]={tsName:we,dbName:te[xe.Symbol.Name],schema:te[xe.Symbol.Schema],columns:te[xe.Symbol.Columns],relations:ye?.relations??{},primaryKey:ye?.primaryKey??[]},Object.values(te[xe.Symbol.Columns])))Se.primary&&re[we].primaryKey.push(Se);let _e=te[xe.Symbol.ExtraConfigBuilder]?.(te);if(_e)for(let Se of Object.values(_e))se(Se,p)&&re[we].primaryKey.push(...Se.columns)}else if(se(te,ze)){let Te,ye=te.table[xe.Symbol.Name],_e=z[ye],Se=te.config(U(te.table));for(let[ge,Oe]of Object.entries(Se))if(_e){let Fe=re[_e];Fe.relations[ge]=Oe,Te&&Fe.primaryKey.push(...Te)}else ye in G||(G[ye]={relations:{},primaryKey:Te}),G[ye].relations[ge]=Oe}return{tables:re,tableNamesMap:z}}(e.schema,Or);o={fullSchema:e.schema,schema:M.tables,tableNamesMap:M.tableNamesMap}}let x=new ps(d,b,{logger:t}),O=x.createSession(o);return new Ui(b,O,o)}(h,{schema:T});async function gs(d){if(d.method==="POST")try{let e=await d.json();return await Fi.insert(kr).values(e).execute(),new Response(null,{status:201})}catch{return new Response(null,{status:500})}if(d.method==="GET"){let e=await Fi.select().from(kr);return Response.json(e)}}function ms(d){return Yr({...d,IncrementalCache:ri,page:"/api/users",handler:gs})}},894:Xe=>{"use strict";var We,Ce,he,oe,ee,Re=Object.create,Ae=Object.defineProperty,ae=Object.getOwnPropertyDescriptor,F=Object.getOwnPropertyNames,P=Object.getPrototypeOf,T=Object.prototype.hasOwnProperty,I=(A,y,f)=>y in A?Ae(A,y,{enumerable:!0,configurable:!0,writable:!0,value:f}):A[y]=f,i=(A,y)=>Ae(A,"name",{value:y,configurable:!0}),N=(A,y)=>()=>(A&&(y=A(A=0)),y),j=(A,y)=>()=>(y||A((y={exports:{}}).exports,y),y.exports),H=(A,y)=>{for(var f in y)Ae(A,f,{get:y[f],enumerable:!0})},ue=(A,y,f,h)=>{if(y&&typeof y=="object"||typeof y=="function")for(let u of F(y))T.call(A,u)||u===f||Ae(A,u,{get:()=>y[u],enumerable:!(h=ae(y,u))||h.enumerable});return A},le=(A,y,f)=>(f=A!=null?Re(P(A)):{},ue(!y&&A&&A.__esModule?f:Ae(f,"default",{value:A,enumerable:!0}),A)),fe=A=>ue(Ae({},"__esModule",{value:!0}),A),be=(A,y,f)=>(I(A,typeof y!="symbol"?y+"":y,f),f),Ke=j(A=>{de(),A.byteLength=S,A.toByteArray=g,A.fromByteArray=C;var y,f,h=[],u=[],a="u">typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(y=0,f=s.length;y<f;++y)h[y]=s[y],u[s.charCodeAt(y)]=y;function p(m){var w=m.length;if(w%4>0)throw Error("Invalid string. Length must be a multiple of 4");var _=m.indexOf("=");_===-1&&(_=w);var Q=_===w?0:4-_%4;return[_,Q]}function S(m){var w=p(m),_=w[0],Q=w[1];return(_+Q)*3/4-Q}function E(m,w,_){return(w+_)*3/4-_}function g(m){var w,_,Q=p(m),D=Q[0],R=Q[1],X=new a(E(m,D,R)),me=0,q=R>0?D-4:D;for(_=0;_<q;_+=4)w=u[m.charCodeAt(_)]<<18|u[m.charCodeAt(_+1)]<<12|u[m.charCodeAt(_+2)]<<6|u[m.charCodeAt(_+3)],X[me++]=w>>16&255,X[me++]=w>>8&255,X[me++]=255&w;return R===2&&(w=u[m.charCodeAt(_)]<<2|u[m.charCodeAt(_+1)]>>4,X[me++]=255&w),R===1&&(w=u[m.charCodeAt(_)]<<10|u[m.charCodeAt(_+1)]<<4|u[m.charCodeAt(_+2)]>>2,X[me++]=w>>8&255,X[me++]=255&w),X}function v(m){return h[m>>18&63]+h[m>>12&63]+h[m>>6&63]+h[63&m]}function l(m,w,_){for(var Q=[],D=w;D<_;D+=3)Q.push(v((m[D]<<16&16711680)+(m[D+1]<<8&65280)+(255&m[D+2])));return Q.join("")}function C(m){for(var w,_=m.length,Q=_%3,D=[],R=0,X=_-Q;R<X;R+=16383)D.push(l(m,R,R+16383>X?X:R+16383));return Q===1?D.push(h[(w=m[_-1])>>2]+h[w<<4&63]+"=="):Q===2&&D.push(h[(w=(m[_-2]<<8)+m[_-1])>>10]+h[w>>4&63]+h[w<<2&63]+"="),D.join("")}u["-".charCodeAt(0)]=62,u["_".charCodeAt(0)]=63,i(p,"getLens"),i(S,"byteLength"),i(E,"_byteLength"),i(g,"toByteArray"),i(v,"tripletToBase64"),i(l,"encodeChunk"),i(C,"fromByteArray")}),Je=j(A=>{de(),A.read=function(y,f,h,u,a){var s,p,S=8*a-u-1,E=(1<<S)-1,g=E>>1,v=-7,l=h?a-1:0,C=h?-1:1,m=y[f+l];for(l+=C,s=m&(1<<-v)-1,m>>=-v,v+=S;v>0;s=256*s+y[f+l],l+=C,v-=8);for(p=s&(1<<-v)-1,s>>=-v,v+=u;v>0;p=256*p+y[f+l],l+=C,v-=8);if(s===0)s=1-g;else{if(s===E)return p?NaN:(m?-1:1)*(1/0);p+=Math.pow(2,u),s-=g}return(m?-1:1)*p*Math.pow(2,s-u)},A.write=function(y,f,h,u,a,s){var p,S,E,g=8*s-a-1,v=(1<<g)-1,l=v>>1,C=a===23?5960464477539062e-23:0,m=u?0:s-1,w=u?1:-1,_=f<0||f===0&&1/f<0?1:0;for(isNaN(f=Math.abs(f))||f===1/0?(S=isNaN(f)?1:0,p=v):(p=Math.floor(Math.log(f)/Math.LN2),f*(E=Math.pow(2,-p))<1&&(p--,E*=2),p+l>=1?f+=C/E:f+=C*Math.pow(2,1-l),f*E>=2&&(p++,E/=2),p+l>=v?(S=0,p=v):p+l>=1?(S=(f*E-1)*Math.pow(2,a),p+=l):(S=f*Math.pow(2,l-1)*Math.pow(2,a),p=0));a>=8;y[h+m]=255&S,m+=w,S/=256,a-=8);for(p=p<<a|S,g+=a;g>0;y[h+m]=255&p,m+=w,p/=256,g-=8);y[h+m-w]|=128*_}}),ut=j(A=>{de();var y=Ke(),f=Je(),h=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;function u(){try{let r=new Uint8Array(1),n={foo:function(){return 42}};return Object.setPrototypeOf(n,Uint8Array.prototype),Object.setPrototypeOf(r,n),r.foo()===42}catch{return!1}}function a(r){if(r>2147483647)throw RangeError('The value "'+r+'" is invalid for option "size"');let n=new Uint8Array(r);return Object.setPrototypeOf(n,s.prototype),n}function s(r,n,c){if(typeof r=="number"){if(typeof n=="string")throw TypeError('The "string" argument must be of type string. Received type number');return g(r)}return p(r,n,c)}function p(r,n,c){if(typeof r=="string")return v(r,n);if(ArrayBuffer.isView(r))return C(r);if(r==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r);if(vt(r,ArrayBuffer)||r&&vt(r.buffer,ArrayBuffer)||"u">typeof SharedArrayBuffer&&(vt(r,SharedArrayBuffer)||r&&vt(r.buffer,SharedArrayBuffer)))return m(r,n,c);if(typeof r=="number")throw TypeError('The "value" argument must not be of type number. Received type number');let L=r.valueOf&&r.valueOf();if(L!=null&&L!==r)return s.from(L,n,c);let $=w(r);if($)return $;if("u">typeof Symbol&&Symbol.toPrimitive!=null&&typeof r[Symbol.toPrimitive]=="function")return s.from(r[Symbol.toPrimitive]("string"),n,c);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r)}function S(r){if(typeof r!="number")throw TypeError('"size" argument must be of type number');if(r<0)throw RangeError('The value "'+r+'" is invalid for option "size"')}function E(r,n,c){return S(r),r<=0?a(r):n!==void 0?typeof c=="string"?a(r).fill(n,c):a(r).fill(n):a(r)}function g(r){return S(r),a(r<0?0:0|_(r))}function v(r,n){if((typeof n!="string"||n==="")&&(n="utf8"),!s.isEncoding(n))throw TypeError("Unknown encoding: "+n);let c=0|D(r,n),L=a(c),$=L.write(r,n);return $!==c&&(L=L.slice(0,$)),L}function l(r){let n=r.length<0?0:0|_(r.length),c=a(n);for(let L=0;L<n;L+=1)c[L]=255&r[L];return c}function C(r){if(vt(r,Uint8Array)){let n=new Uint8Array(r);return m(n.buffer,n.byteOffset,n.byteLength)}return l(r)}function m(r,n,c){let L;if(n<0||r.byteLength<n)throw RangeError('"offset" is outside of buffer bounds');if(r.byteLength<n+(c||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(L=n===void 0&&c===void 0?new Uint8Array(r):c===void 0?new Uint8Array(r,n):new Uint8Array(r,n,c),s.prototype),L}function w(r){if(s.isBuffer(r)){let n=0|_(r.length),c=a(n);return c.length===0||r.copy(c,0,0,n),c}return r.length!==void 0?typeof r.length!="number"||Nr(r.length)?a(0):l(r):r.type==="Buffer"&&Array.isArray(r.data)?l(r.data):void 0}function _(r){if(r>=2147483647)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|r}function Q(r){return+r!=r&&(r=0),s.alloc(+r)}function D(r,n){if(s.isBuffer(r))return r.length;if(ArrayBuffer.isView(r)||vt(r,ArrayBuffer))return r.byteLength;if(typeof r!="string")throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof r);let c=r.length,L=arguments.length>2&&arguments[2]===!0;if(!L&&c===0)return 0;let $=!1;for(;;)switch(n){case"ascii":case"latin1":case"binary":return c;case"utf8":case"utf-8":return B(r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*c;case"hex":return c>>>1;case"base64":return Lt(r).length;default:if($)return L?-1:B(r).length;n=(""+n).toLowerCase(),$=!0}}function R(r,n,c){let L=!1;if((n===void 0||n<0)&&(n=0),n>this.length||((c===void 0||c>this.length)&&(c=this.length),c<=0)||(c>>>=0)<=(n>>>=0))return"";for(r||(r="utf8");;)switch(r){case"hex":return et(this,n,c);case"utf8":case"utf-8":return ne(this,n,c);case"ascii":return Be(this,n,c);case"latin1":case"binary":return $e(this,n,c);case"base64":return Ie(this,n,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ze(this,n,c);default:if(L)throw TypeError("Unknown encoding: "+r);r=(r+"").toLowerCase(),L=!0}}function X(r,n,c){let L=r[n];r[n]=r[c],r[c]=L}function me(r,n,c,L,$){if(r.length===0)return-1;if(typeof c=="string"?(L=c,c=0):c>2147483647?c=2147483647:c<-2147483648&&(c=-2147483648),Nr(c=+c)&&(c=$?0:r.length-1),c<0&&(c=r.length+c),c>=r.length){if($)return-1;c=r.length-1}else if(c<0){if(!$)return-1;c=0}if(typeof n=="string"&&(n=s.from(n,L)),s.isBuffer(n))return n.length===0?-1:q(r,n,c,L,$);if(typeof n=="number")return n&=255,typeof Uint8Array.prototype.indexOf=="function"?$?Uint8Array.prototype.indexOf.call(r,n,c):Uint8Array.prototype.lastIndexOf.call(r,n,c):q(r,[n],c,L,$);throw TypeError("val must be string, number or Buffer")}function q(r,n,c,L,$){let K,ce=1,Ze=r.length,at=n.length;if(L!==void 0&&((L=String(L).toLowerCase())==="ucs2"||L==="ucs-2"||L==="utf16le"||L==="utf-16le")){if(r.length<2||n.length<2)return-1;ce=2,Ze/=2,at/=2,c/=2}function nt(Ve,lt){return ce===1?Ve[lt]:Ve.readUInt16BE(lt*ce)}if(i(nt,"read"),$){let Ve=-1;for(K=c;K<Ze;K++)if(nt(r,K)===nt(n,Ve===-1?0:K-Ve)){if(Ve===-1&&(Ve=K),K-Ve+1===at)return Ve*ce}else Ve!==-1&&(K-=K-Ve),Ve=-1}else for(c+at>Ze&&(c=Ze-at),K=c;K>=0;K--){let Ve=!0;for(let lt=0;lt<at;lt++)if(nt(r,K+lt)!==nt(n,lt)){Ve=!1;break}if(Ve)return K}return-1}function W(r,n,c,L){let $;c=Number(c)||0;let K=r.length-c;L?(L=Number(L))>K&&(L=K):L=K;let ce=n.length;for(L>ce/2&&(L=ce/2),$=0;$<L;++$){let Ze=parseInt(n.substr(2*$,2),16);if(Nr(Ze))break;r[c+$]=Ze}return $}function Y(r,n,c,L){return Mt(B(n,r.length-c),r,c,L)}function k(r,n,c,L){return Mt(tr(n),r,c,L)}function V(r,n,c,L){return Mt(Lt(n),r,c,L)}function pe(r,n,c,L){return Mt(dr(n,r.length-c),r,c,L)}function Ie(r,n,c){return n===0&&c===r.length?y.fromByteArray(r):y.fromByteArray(r.slice(n,c))}function ne(r,n,c){c=Math.min(r.length,c);let L=[],$=n;for(;$<c;){let K=r[$],ce=null,Ze=K>239?4:K>223?3:K>191?2:1;if($+Ze<=c){let at,nt,Ve,lt;switch(Ze){case 1:K<128&&(ce=K);break;case 2:(192&(at=r[$+1]))==128&&(lt=(31&K)<<6|63&at)>127&&(ce=lt);break;case 3:at=r[$+1],nt=r[$+2],(192&at)==128&&(192&nt)==128&&(lt=(15&K)<<12|(63&at)<<6|63&nt)>2047&&(lt<55296||lt>57343)&&(ce=lt);break;case 4:at=r[$+1],nt=r[$+2],Ve=r[$+3],(192&at)==128&&(192&nt)==128&&(192&Ve)==128&&(lt=(15&K)<<18|(63&at)<<12|(63&nt)<<6|63&Ve)>65535&&lt<1114112&&(ce=lt)}}ce===null?(ce=65533,Ze=1):ce>65535&&(ce-=65536,L.push(ce>>>10&1023|55296),ce=56320|1023&ce),L.push(ce),$+=Ze}return De(L)}function De(r){let n=r.length;if(n<=4096)return String.fromCharCode.apply(String,r);let c="",L=0;for(;L<n;)c+=String.fromCharCode.apply(String,r.slice(L,L+=4096));return c}function Be(r,n,c){let L="";c=Math.min(r.length,c);for(let $=n;$<c;++$)L+=String.fromCharCode(127&r[$]);return L}function $e(r,n,c){let L="";c=Math.min(r.length,c);for(let $=n;$<c;++$)L+=String.fromCharCode(r[$]);return L}function et(r,n,c){let L=r.length;(!n||n<0)&&(n=0),(!c||c<0||c>L)&&(c=L);let $="";for(let K=n;K<c;++K)$+=pr[r[K]];return $}function ze(r,n,c){let L=r.slice(n,c),$="";for(let K=0;K<L.length-1;K+=2)$+=String.fromCharCode(L[K]+256*L[K+1]);return $}function je(r,n,c){if(r%1!=0||r<0)throw RangeError("offset is not uint");if(r+n>c)throw RangeError("Trying to access beyond buffer length")}function Ye(r,n,c,L,$,K){if(!s.isBuffer(r))throw TypeError('"buffer" argument must be a Buffer instance');if(n>$||n<K)throw RangeError('"value" argument is out of bounds');if(c+L>r.length)throw RangeError("Index out of range")}function Or(r,n,c,L,$){Le(n,L,$,r,c,7);let K=Number(n&BigInt(4294967295));r[c++]=K,K>>=8,r[c++]=K,K>>=8,r[c++]=K,K>>=8,r[c++]=K;let ce=Number(n>>BigInt(32)&BigInt(4294967295));return r[c++]=ce,ce>>=8,r[c++]=ce,ce>>=8,r[c++]=ce,ce>>=8,r[c++]=ce,c}function ct(r,n,c,L,$){Le(n,L,$,r,c,7);let K=Number(n&BigInt(4294967295));r[c+7]=K,K>>=8,r[c+6]=K,K>>=8,r[c+5]=K,K>>=8,r[c+4]=K;let ce=Number(n>>BigInt(32)&BigInt(4294967295));return r[c+3]=ce,ce>>=8,r[c+2]=ce,ce>>=8,r[c+1]=ce,ce>>=8,r[c]=ce,c+8}function bt(r,n,c,L,$,K){if(c+L>r.length||c<0)throw RangeError("Index out of range")}function cr(r,n,c,L,$){return n=+n,c>>>=0,$||bt(r,n,c,4,34028234663852886e22,-34028234663852886e22),f.write(r,n,c,L,23,4),c+4}function yt(r,n,c,L,$){return n=+n,c>>>=0,$||bt(r,n,c,8,17976931348623157e292,-17976931348623157e292),f.write(r,n,c,L,52,8),c+8}A.Buffer=s,A.SlowBuffer=Q,A.INSPECT_MAX_BYTES=50,A.kMaxLength=2147483647,s.TYPED_ARRAY_SUPPORT=u(),!s.TYPED_ARRAY_SUPPORT&&"u">typeof console&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),i(u,"typedArraySupport"),Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}}),i(a,"createBuffer"),i(s,"Buffer"),s.poolSize=8192,i(p,"from"),s.from=function(r,n,c){return p(r,n,c)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array),i(S,"assertSize"),i(E,"alloc"),s.alloc=function(r,n,c){return E(r,n,c)},i(g,"allocUnsafe"),s.allocUnsafe=function(r){return g(r)},s.allocUnsafeSlow=function(r){return g(r)},i(v,"fromString"),i(l,"fromArrayLike"),i(C,"fromArrayView"),i(m,"fromArrayBuffer"),i(w,"fromObject"),i(_,"checked"),i(Q,"SlowBuffer"),s.isBuffer=i(function(r){return r!=null&&r._isBuffer===!0&&r!==s.prototype},"isBuffer"),s.compare=i(function(r,n){if(vt(r,Uint8Array)&&(r=s.from(r,r.offset,r.byteLength)),vt(n,Uint8Array)&&(n=s.from(n,n.offset,n.byteLength)),!s.isBuffer(r)||!s.isBuffer(n))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(r===n)return 0;let c=r.length,L=n.length;for(let $=0,K=Math.min(c,L);$<K;++$)if(r[$]!==n[$]){c=r[$],L=n[$];break}return c<L?-1:L<c?1:0},"compare"),s.isEncoding=i(function(r){switch(String(r).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},"isEncoding"),s.concat=i(function(r,n){let c;if(!Array.isArray(r))throw TypeError('"list" argument must be an Array of Buffers');if(r.length===0)return s.alloc(0);if(n===void 0)for(n=0,c=0;c<r.length;++c)n+=r[c].length;let L=s.allocUnsafe(n),$=0;for(c=0;c<r.length;++c){let K=r[c];if(vt(K,Uint8Array))$+K.length>L.length?(s.isBuffer(K)||(K=s.from(K)),K.copy(L,$)):Uint8Array.prototype.set.call(L,K,$);else if(s.isBuffer(K))K.copy(L,$);else throw TypeError('"list" argument must be an Array of Buffers');$+=K.length}return L},"concat"),i(D,"byteLength"),s.byteLength=D,i(R,"slowToString"),s.prototype._isBuffer=!0,i(X,"swap"),s.prototype.swap16=i(function(){let r=this.length;if(r%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(let n=0;n<r;n+=2)X(this,n,n+1);return this},"swap16"),s.prototype.swap32=i(function(){let r=this.length;if(r%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(let n=0;n<r;n+=4)X(this,n,n+3),X(this,n+1,n+2);return this},"swap32"),s.prototype.swap64=i(function(){let r=this.length;if(r%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(let n=0;n<r;n+=8)X(this,n,n+7),X(this,n+1,n+6),X(this,n+2,n+5),X(this,n+3,n+4);return this},"swap64"),s.prototype.toString=i(function(){let r=this.length;return r===0?"":arguments.length==0?ne(this,0,r):R.apply(this,arguments)},"toString"),s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=i(function(r){if(!s.isBuffer(r))throw TypeError("Argument must be a Buffer");return this===r||s.compare(this,r)===0},"equals"),s.prototype.inspect=i(function(){let r="",n=A.INSPECT_MAX_BYTES;return r=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(r+=" ... "),"<Buffer "+r+">"},"inspect"),h&&(s.prototype[h]=s.prototype.inspect),s.prototype.compare=i(function(r,n,c,L,$){if(vt(r,Uint8Array)&&(r=s.from(r,r.offset,r.byteLength)),!s.isBuffer(r))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof r);if(n===void 0&&(n=0),c===void 0&&(c=r?r.length:0),L===void 0&&(L=0),$===void 0&&($=this.length),n<0||c>r.length||L<0||$>this.length)throw RangeError("out of range index");if(L>=$&&n>=c)return 0;if(L>=$)return-1;if(n>=c)return 1;if(n>>>=0,c>>>=0,L>>>=0,$>>>=0,this===r)return 0;let K=$-L,ce=c-n,Ze=Math.min(K,ce),at=this.slice(L,$),nt=r.slice(n,c);for(let Ve=0;Ve<Ze;++Ve)if(at[Ve]!==nt[Ve]){K=at[Ve],ce=nt[Ve];break}return K<ce?-1:ce<K?1:0},"compare"),i(me,"bidirectionalIndexOf"),i(q,"arrayIndexOf"),s.prototype.includes=i(function(r,n,c){return this.indexOf(r,n,c)!==-1},"includes"),s.prototype.indexOf=i(function(r,n,c){return me(this,r,n,c,!0)},"indexOf"),s.prototype.lastIndexOf=i(function(r,n,c){return me(this,r,n,c,!1)},"lastIndexOf"),i(W,"hexWrite"),i(Y,"utf8Write"),i(k,"asciiWrite"),i(V,"base64Write"),i(pe,"ucs2Write"),s.prototype.write=i(function(r,n,c,L){if(n===void 0)L="utf8",c=this.length,n=0;else if(c===void 0&&typeof n=="string")L=n,c=this.length,n=0;else if(isFinite(n))n>>>=0,isFinite(c)?(c>>>=0,L===void 0&&(L="utf8")):(L=c,c=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let $=this.length-n;if((c===void 0||c>$)&&(c=$),r.length>0&&(c<0||n<0)||n>this.length)throw RangeError("Attempt to write outside buffer bounds");L||(L="utf8");let K=!1;for(;;)switch(L){case"hex":return W(this,r,n,c);case"utf8":case"utf-8":return Y(this,r,n,c);case"ascii":case"latin1":case"binary":return k(this,r,n,c);case"base64":return V(this,r,n,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return pe(this,r,n,c);default:if(K)throw TypeError("Unknown encoding: "+L);L=(""+L).toLowerCase(),K=!0}},"write"),s.prototype.toJSON=i(function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},"toJSON"),i(Ie,"base64Slice"),i(ne,"utf8Slice"),i(De,"decodeCodePointsArray"),i(Be,"asciiSlice"),i($e,"latin1Slice"),i(et,"hexSlice"),i(ze,"utf16leSlice"),s.prototype.slice=i(function(r,n){let c=this.length;r=~~r,n=n===void 0?c:~~n,r<0?(r+=c)<0&&(r=0):r>c&&(r=c),n<0?(n+=c)<0&&(n=0):n>c&&(n=c),n<r&&(n=r);let L=this.subarray(r,n);return Object.setPrototypeOf(L,s.prototype),L},"slice"),i(je,"checkOffset"),s.prototype.readUintLE=s.prototype.readUIntLE=i(function(r,n,c){r>>>=0,n>>>=0,c||je(r,n,this.length);let L=this[r],$=1,K=0;for(;++K<n&&($*=256);)L+=this[r+K]*$;return L},"readUIntLE"),s.prototype.readUintBE=s.prototype.readUIntBE=i(function(r,n,c){r>>>=0,n>>>=0,c||je(r,n,this.length);let L=this[r+--n],$=1;for(;n>0&&($*=256);)L+=this[r+--n]*$;return L},"readUIntBE"),s.prototype.readUint8=s.prototype.readUInt8=i(function(r,n){return r>>>=0,n||je(r,1,this.length),this[r]},"readUInt8"),s.prototype.readUint16LE=s.prototype.readUInt16LE=i(function(r,n){return r>>>=0,n||je(r,2,this.length),this[r]|this[r+1]<<8},"readUInt16LE"),s.prototype.readUint16BE=s.prototype.readUInt16BE=i(function(r,n){return r>>>=0,n||je(r,2,this.length),this[r]<<8|this[r+1]},"readUInt16BE"),s.prototype.readUint32LE=s.prototype.readUInt32LE=i(function(r,n){return r>>>=0,n||je(r,4,this.length),(this[r]|this[r+1]<<8|this[r+2]<<16)+16777216*this[r+3]},"readUInt32LE"),s.prototype.readUint32BE=s.prototype.readUInt32BE=i(function(r,n){return r>>>=0,n||je(r,4,this.length),16777216*this[r]+(this[r+1]<<16|this[r+2]<<8|this[r+3])},"readUInt32BE"),s.prototype.readBigUInt64LE=ft(i(function(r){Rt(r>>>=0,"offset");let n=this[r],c=this[r+7];(n===void 0||c===void 0)&&jt(r,this.length-8);let L=n+256*this[++r]+65536*this[++r]+16777216*this[++r],$=this[++r]+256*this[++r]+65536*this[++r]+16777216*c;return BigInt(L)+(BigInt($)<<BigInt(32))},"readBigUInt64LE")),s.prototype.readBigUInt64BE=ft(i(function(r){Rt(r>>>=0,"offset");let n=this[r],c=this[r+7];(n===void 0||c===void 0)&&jt(r,this.length-8);let L=16777216*n+65536*this[++r]+256*this[++r]+this[++r],$=16777216*this[++r]+65536*this[++r]+256*this[++r]+c;return(BigInt(L)<<BigInt(32))+BigInt($)},"readBigUInt64BE")),s.prototype.readIntLE=i(function(r,n,c){r>>>=0,n>>>=0,c||je(r,n,this.length);let L=this[r],$=1,K=0;for(;++K<n&&($*=256);)L+=this[r+K]*$;return L>=($*=128)&&(L-=Math.pow(2,8*n)),L},"readIntLE"),s.prototype.readIntBE=i(function(r,n,c){r>>>=0,n>>>=0,c||je(r,n,this.length);let L=n,$=1,K=this[r+--L];for(;L>0&&($*=256);)K+=this[r+--L]*$;return K>=($*=128)&&(K-=Math.pow(2,8*n)),K},"readIntBE"),s.prototype.readInt8=i(function(r,n){return r>>>=0,n||je(r,1,this.length),128&this[r]?-((255-this[r]+1)*1):this[r]},"readInt8"),s.prototype.readInt16LE=i(function(r,n){r>>>=0,n||je(r,2,this.length);let c=this[r]|this[r+1]<<8;return 32768&c?4294901760|c:c},"readInt16LE"),s.prototype.readInt16BE=i(function(r,n){r>>>=0,n||je(r,2,this.length);let c=this[r+1]|this[r]<<8;return 32768&c?4294901760|c:c},"readInt16BE"),s.prototype.readInt32LE=i(function(r,n){return r>>>=0,n||je(r,4,this.length),this[r]|this[r+1]<<8|this[r+2]<<16|this[r+3]<<24},"readInt32LE"),s.prototype.readInt32BE=i(function(r,n){return r>>>=0,n||je(r,4,this.length),this[r]<<24|this[r+1]<<16|this[r+2]<<8|this[r+3]},"readInt32BE"),s.prototype.readBigInt64LE=ft(i(function(r){Rt(r>>>=0,"offset");let n=this[r],c=this[r+7];return(n===void 0||c===void 0)&&jt(r,this.length-8),(BigInt(this[r+4]+256*this[r+5]+65536*this[r+6]+(c<<24))<<BigInt(32))+BigInt(n+256*this[++r]+65536*this[++r]+16777216*this[++r])},"readBigInt64LE")),s.prototype.readBigInt64BE=ft(i(function(r){Rt(r>>>=0,"offset");let n=this[r],c=this[r+7];return(n===void 0||c===void 0)&&jt(r,this.length-8),(BigInt((n<<24)+65536*this[++r]+256*this[++r]+this[++r])<<BigInt(32))+BigInt(16777216*this[++r]+65536*this[++r]+256*this[++r]+c)},"readBigInt64BE")),s.prototype.readFloatLE=i(function(r,n){return r>>>=0,n||je(r,4,this.length),f.read(this,r,!0,23,4)},"readFloatLE"),s.prototype.readFloatBE=i(function(r,n){return r>>>=0,n||je(r,4,this.length),f.read(this,r,!1,23,4)},"readFloatBE"),s.prototype.readDoubleLE=i(function(r,n){return r>>>=0,n||je(r,8,this.length),f.read(this,r,!0,52,8)},"readDoubleLE"),s.prototype.readDoubleBE=i(function(r,n){return r>>>=0,n||je(r,8,this.length),f.read(this,r,!1,52,8)},"readDoubleBE"),i(Ye,"checkInt"),s.prototype.writeUintLE=s.prototype.writeUIntLE=i(function(r,n,c,L){if(r=+r,n>>>=0,c>>>=0,!L){let ce=Math.pow(2,8*c)-1;Ye(this,r,n,c,ce,0)}let $=1,K=0;for(this[n]=255&r;++K<c&&($*=256);)this[n+K]=r/$&255;return n+c},"writeUIntLE"),s.prototype.writeUintBE=s.prototype.writeUIntBE=i(function(r,n,c,L){if(r=+r,n>>>=0,c>>>=0,!L){let ce=Math.pow(2,8*c)-1;Ye(this,r,n,c,ce,0)}let $=c-1,K=1;for(this[n+$]=255&r;--$>=0&&(K*=256);)this[n+$]=r/K&255;return n+c},"writeUIntBE"),s.prototype.writeUint8=s.prototype.writeUInt8=i(function(r,n,c){return r=+r,n>>>=0,c||Ye(this,r,n,1,255,0),this[n]=255&r,n+1},"writeUInt8"),s.prototype.writeUint16LE=s.prototype.writeUInt16LE=i(function(r,n,c){return r=+r,n>>>=0,c||Ye(this,r,n,2,65535,0),this[n]=255&r,this[n+1]=r>>>8,n+2},"writeUInt16LE"),s.prototype.writeUint16BE=s.prototype.writeUInt16BE=i(function(r,n,c){return r=+r,n>>>=0,c||Ye(this,r,n,2,65535,0),this[n]=r>>>8,this[n+1]=255&r,n+2},"writeUInt16BE"),s.prototype.writeUint32LE=s.prototype.writeUInt32LE=i(function(r,n,c){return r=+r,n>>>=0,c||Ye(this,r,n,4,4294967295,0),this[n+3]=r>>>24,this[n+2]=r>>>16,this[n+1]=r>>>8,this[n]=255&r,n+4},"writeUInt32LE"),s.prototype.writeUint32BE=s.prototype.writeUInt32BE=i(function(r,n,c){return r=+r,n>>>=0,c||Ye(this,r,n,4,4294967295,0),this[n]=r>>>24,this[n+1]=r>>>16,this[n+2]=r>>>8,this[n+3]=255&r,n+4},"writeUInt32BE"),i(Or,"wrtBigUInt64LE"),i(ct,"wrtBigUInt64BE"),s.prototype.writeBigUInt64LE=ft(i(function(r,n=0){return Or(this,r,n,BigInt(0),BigInt("0xffffffffffffffff"))},"writeBigUInt64LE")),s.prototype.writeBigUInt64BE=ft(i(function(r,n=0){return ct(this,r,n,BigInt(0),BigInt("0xffffffffffffffff"))},"writeBigUInt64BE")),s.prototype.writeIntLE=i(function(r,n,c,L){if(r=+r,n>>>=0,!L){let Ze=Math.pow(2,8*c-1);Ye(this,r,n,c,Ze-1,-Ze)}let $=0,K=1,ce=0;for(this[n]=255&r;++$<c&&(K*=256);)r<0&&ce===0&&this[n+$-1]!==0&&(ce=1),this[n+$]=(r/K>>0)-ce&255;return n+c},"writeIntLE"),s.prototype.writeIntBE=i(function(r,n,c,L){if(r=+r,n>>>=0,!L){let Ze=Math.pow(2,8*c-1);Ye(this,r,n,c,Ze-1,-Ze)}let $=c-1,K=1,ce=0;for(this[n+$]=255&r;--$>=0&&(K*=256);)r<0&&ce===0&&this[n+$+1]!==0&&(ce=1),this[n+$]=(r/K>>0)-ce&255;return n+c},"writeIntBE"),s.prototype.writeInt8=i(function(r,n,c){return r=+r,n>>>=0,c||Ye(this,r,n,1,127,-128),r<0&&(r=255+r+1),this[n]=255&r,n+1},"writeInt8"),s.prototype.writeInt16LE=i(function(r,n,c){return r=+r,n>>>=0,c||Ye(this,r,n,2,32767,-32768),this[n]=255&r,this[n+1]=r>>>8,n+2},"writeInt16LE"),s.prototype.writeInt16BE=i(function(r,n,c){return r=+r,n>>>=0,c||Ye(this,r,n,2,32767,-32768),this[n]=r>>>8,this[n+1]=255&r,n+2},"writeInt16BE"),s.prototype.writeInt32LE=i(function(r,n,c){return r=+r,n>>>=0,c||Ye(this,r,n,4,2147483647,-2147483648),this[n]=255&r,this[n+1]=r>>>8,this[n+2]=r>>>16,this[n+3]=r>>>24,n+4},"writeInt32LE"),s.prototype.writeInt32BE=i(function(r,n,c){return r=+r,n>>>=0,c||Ye(this,r,n,4,2147483647,-2147483648),r<0&&(r=4294967295+r+1),this[n]=r>>>24,this[n+1]=r>>>16,this[n+2]=r>>>8,this[n+3]=255&r,n+4},"writeInt32BE"),s.prototype.writeBigInt64LE=ft(i(function(r,n=0){return Or(this,r,n,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))},"writeBigInt64LE")),s.prototype.writeBigInt64BE=ft(i(function(r,n=0){return ct(this,r,n,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))},"writeBigInt64BE")),i(bt,"checkIEEE754"),i(cr,"writeFloat"),s.prototype.writeFloatLE=i(function(r,n,c){return cr(this,r,n,!0,c)},"writeFloatLE"),s.prototype.writeFloatBE=i(function(r,n,c){return cr(this,r,n,!1,c)},"writeFloatBE"),i(yt,"writeDouble"),s.prototype.writeDoubleLE=i(function(r,n,c){return yt(this,r,n,!0,c)},"writeDoubleLE"),s.prototype.writeDoubleBE=i(function(r,n,c){return yt(this,r,n,!1,c)},"writeDoubleBE"),s.prototype.copy=i(function(r,n,c,L){if(!s.isBuffer(r))throw TypeError("argument should be a Buffer");if(c||(c=0),L||L===0||(L=this.length),n>=r.length&&(n=r.length),n||(n=0),L>0&&L<c&&(L=c),L===c||r.length===0||this.length===0)return 0;if(n<0)throw RangeError("targetStart out of bounds");if(c<0||c>=this.length)throw RangeError("Index out of range");if(L<0)throw RangeError("sourceEnd out of bounds");L>this.length&&(L=this.length),r.length-n<L-c&&(L=r.length-n+c);let $=L-c;return this===r&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(n,c,L):Uint8Array.prototype.set.call(r,this.subarray(c,L),n),$},"copy"),s.prototype.fill=i(function(r,n,c,L){let $;if(typeof r=="string"){if(typeof n=="string"?(L=n,n=0,c=this.length):typeof c=="string"&&(L=c,c=this.length),L!==void 0&&typeof L!="string")throw TypeError("encoding must be a string");if(typeof L=="string"&&!s.isEncoding(L))throw TypeError("Unknown encoding: "+L);if(r.length===1){let K=r.charCodeAt(0);(L==="utf8"&&K<128||L==="latin1")&&(r=K)}}else typeof r=="number"?r&=255:typeof r=="boolean"&&(r=Number(r));if(n<0||this.length<n||this.length<c)throw RangeError("Out of range index");if(c<=n)return this;if(n>>>=0,c=c===void 0?this.length:c>>>0,r||(r=0),typeof r=="number")for($=n;$<c;++$)this[$]=r;else{let K=s.isBuffer(r)?r:s.from(r,L),ce=K.length;if(ce===0)throw TypeError('The value "'+r+'" is invalid for argument "value"');for($=0;$<c-n;++$)this[$+n]=K[$%ce]}return this},"fill");var tt={};function Mr(r,n,c){var L;tt[r]=(i(L=class extends c{constructor(){super(),Object.defineProperty(this,"message",{value:n.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${r}]`,this.stack,delete this.name}get code(){return r}set code($){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:$,writable:!0})}toString(){return`${this.name} [${r}]: ${this.message}`}},"NodeError"),L)}function fr(r){let n="",c=r.length,L=r[0]==="-"?1:0;for(;c>=L+4;c-=3)n=`_${r.slice(c-3,c)}${n}`;return`${r.slice(0,c)}${n}`}function st(r,n,c){Rt(n,"offset"),(r[n]===void 0||r[n+c]===void 0)&&jt(n,r.length-(c+1))}function Le(r,n,c,L,$,K){if(r>c||r<n){let ce=typeof n=="bigint"?"n":"",Ze;throw Ze=K>3?n===0||n===BigInt(0)?`>= 0${ce} and < 2${ce} ** ${(K+1)*8}${ce}`:`>= -(2${ce} ** ${(K+1)*8-1}${ce}) and < 2 ** ${(K+1)*8-1}${ce}`:`>= ${n}${ce} and <= ${c}${ce}`,new tt.ERR_OUT_OF_RANGE("value",Ze,r)}st(L,$,K)}function Rt(r,n){if(typeof r!="number")throw new tt.ERR_INVALID_ARG_TYPE(n,"number",r)}function jt(r,n,c){throw Math.floor(r)!==r?(Rt(r,c),new tt.ERR_OUT_OF_RANGE(c||"offset","an integer",r)):n<0?new tt.ERR_BUFFER_OUT_OF_BOUNDS:new tt.ERR_OUT_OF_RANGE(c||"offset",`>= ${c?1:0} and <= ${n}`,r)}i(Mr,"E"),Mr("ERR_BUFFER_OUT_OF_BOUNDS",function(r){return r?`${r} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Mr("ERR_INVALID_ARG_TYPE",function(r,n){return`The "${r}" argument must be of type number. Received type ${typeof n}`},TypeError),Mr("ERR_OUT_OF_RANGE",function(r,n,c){let L=`The value of "${r}" is out of range.`,$=c;return Number.isInteger(c)&&Math.abs(c)>4294967296?$=fr(String(c)):typeof c=="bigint"&&($=String(c),(c>BigInt(2)**BigInt(32)||c<-(BigInt(2)**BigInt(32)))&&($=fr($)),$+="n"),L+=` It must be ${n}. Received ${$}`},RangeError),i(fr,"addNumericalSeparator"),i(st,"checkBounds"),i(Le,"checkIntBI"),i(Rt,"validateNumber"),i(jt,"boundsError");var mi=/[^+/0-9A-Za-z-_]/g;function Ot(r){if((r=(r=r.split("=")[0]).trim().replace(mi,"")).length<2)return"";for(;r.length%4!=0;)r+="=";return r}function B(r,n){n=n||1/0;let c,L=r.length,$=null,K=[];for(let ce=0;ce<L;++ce){if((c=r.charCodeAt(ce))>55295&&c<57344){if(!$){if(c>56319||ce+1===L){(n-=3)>-1&&K.push(239,191,189);continue}$=c;continue}if(c<56320){(n-=3)>-1&&K.push(239,191,189),$=c;continue}c=($-55296<<10|c-56320)+65536}else $&&(n-=3)>-1&&K.push(239,191,189);if($=null,c<128){if((n-=1)<0)break;K.push(c)}else if(c<2048){if((n-=2)<0)break;K.push(c>>6|192,63&c|128)}else if(c<65536){if((n-=3)<0)break;K.push(c>>12|224,c>>6&63|128,63&c|128)}else if(c<1114112){if((n-=4)<0)break;K.push(c>>18|240,c>>12&63|128,c>>6&63|128,63&c|128)}else throw Error("Invalid code point")}return K}function tr(r){let n=[];for(let c=0;c<r.length;++c)n.push(255&r.charCodeAt(c));return n}function dr(r,n){let c,L,$=[];for(let K=0;K<r.length&&!((n-=2)<0);++K)L=(c=r.charCodeAt(K))>>8,$.push(c%256),$.push(L);return $}function Lt(r){return y.toByteArray(Ot(r))}function Mt(r,n,c,L){let $;for($=0;$<L&&!($+c>=n.length||$>=r.length);++$)n[$+c]=r[$];return $}function vt(r,n){return r instanceof n||r!=null&&r.constructor!=null&&r.constructor.name!=null&&r.constructor.name===n.name}function Nr(r){return r!=r}i(Ot,"base64clean"),i(B,"utf8ToBytes"),i(tr,"asciiToBytes"),i(dr,"utf16leToBytes"),i(Lt,"base64ToBytes"),i(Mt,"blitBuffer"),i(vt,"isInstance"),i(Nr,"numberIsNaN");var pr=function(){let r="0123456789abcdef",n=Array(256);for(let c=0;c<16;++c){let L=16*c;for(let $=0;$<16;++$)n[L+$]=r[c]+r[$]}return n}();function ft(r){return typeof BigInt>"u"?Dr:r}function Dr(){throw Error("BigInt not supported")}i(ft,"defineBigIntMethod"),i(Dr,"BufferBigIntNotDefined")}),de=N(()=>{We=globalThis,Ce=globalThis.setImmediate??(A=>setTimeout(A,0)),globalThis.clearImmediate,(he=globalThis.crypto??{}).subtle??(he.subtle={}),oe=typeof globalThis.Buffer=="function"&&typeof globalThis.Buffer.allocUnsafe=="function"?globalThis.Buffer:ut().Buffer,(ee=globalThis.process??{}).env??(ee.env={});try{ee.nextTick(()=>{})}catch{let A=Promise.resolve();ee.nextTick=A.then.bind(A)}}),dt=j((A,y)=>{de();var f,h=typeof Reflect=="object"?Reflect:null,u=h&&typeof h.apply=="function"?h.apply:i(function(q,W,Y){return Function.prototype.apply.call(q,W,Y)},"ReflectApply");function a(q){console&&console.warn&&console.warn(q)}f=h&&typeof h.ownKeys=="function"?h.ownKeys:i(Object.getOwnPropertySymbols?function(q){return Object.getOwnPropertyNames(q).concat(Object.getOwnPropertySymbols(q))}:function(q){return Object.getOwnPropertyNames(q)},"ReflectOwnKeys"),i(a,"ProcessEmitWarning");var s=Number.isNaN||i(function(q){return q!=q},"NumberIsNaN");function p(){p.init.call(this)}i(p,"EventEmitter"),y.exports=p,y.exports.once=R,p.EventEmitter=p,p.prototype._events=void 0,p.prototype._eventsCount=0,p.prototype._maxListeners=void 0;var S=10;function E(q){if(typeof q!="function")throw TypeError('The "listener" argument must be of type Function. Received type '+typeof q)}function g(q){return q._maxListeners===void 0?p.defaultMaxListeners:q._maxListeners}function v(q,W,Y,k){var V,pe,Ie;if(E(Y),(pe=q._events)===void 0?(pe=q._events=Object.create(null),q._eventsCount=0):(pe.newListener!==void 0&&(q.emit("newListener",W,Y.listener?Y.listener:Y),pe=q._events),Ie=pe[W]),Ie===void 0)Ie=pe[W]=Y,++q._eventsCount;else if(typeof Ie=="function"?Ie=pe[W]=k?[Y,Ie]:[Ie,Y]:k?Ie.unshift(Y):Ie.push(Y),(V=g(q))>0&&Ie.length>V&&!Ie.warned){Ie.warned=!0;var ne=Error("Possible EventEmitter memory leak detected. "+Ie.length+" "+String(W)+" listeners added. Use emitter.setMaxListeners() to increase limit");ne.name="MaxListenersExceededWarning",ne.emitter=q,ne.type=W,ne.count=Ie.length,a(ne)}return q}function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length==0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function C(q,W,Y){var k={fired:!1,wrapFn:void 0,target:q,type:W,listener:Y},V=l.bind(k);return V.listener=Y,k.wrapFn=V,V}function m(q,W,Y){var k=q._events;if(k===void 0)return[];var V=k[W];return V===void 0?[]:typeof V=="function"?Y?[V.listener||V]:[V]:Y?D(V):_(V,V.length)}function w(q){var W=this._events;if(W!==void 0){var Y=W[q];if(typeof Y=="function")return 1;if(Y!==void 0)return Y.length}return 0}function _(q,W){for(var Y=Array(W),k=0;k<W;++k)Y[k]=q[k];return Y}function Q(q,W){for(;W+1<q.length;W++)q[W]=q[W+1];q.pop()}function D(q){for(var W=Array(q.length),Y=0;Y<W.length;++Y)W[Y]=q[Y].listener||q[Y];return W}function R(q,W){return new Promise(function(Y,k){function V(Ie){q.removeListener(W,pe),k(Ie)}function pe(){typeof q.removeListener=="function"&&q.removeListener("error",V),Y([].slice.call(arguments))}i(V,"errorListener"),i(pe,"resolver"),me(q,W,pe,{once:!0}),W!=="error"&&X(q,V,{once:!0})})}function X(q,W,Y){typeof q.on=="function"&&me(q,"error",W,Y)}function me(q,W,Y,k){if(typeof q.on=="function")k.once?q.once(W,Y):q.on(W,Y);else if(typeof q.addEventListener=="function")q.addEventListener(W,i(function V(pe){k.once&&q.removeEventListener(W,V),Y(pe)},"wrapListener"));else throw TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof q)}i(E,"checkListener"),Object.defineProperty(p,"defaultMaxListeners",{enumerable:!0,get:function(){return S},set:function(q){if(typeof q!="number"||q<0||s(q))throw RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+q+".");S=q}}),p.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},p.prototype.setMaxListeners=i(function(q){if(typeof q!="number"||q<0||s(q))throw RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+q+".");return this._maxListeners=q,this},"setMaxListeners"),i(g,"_getMaxListeners"),p.prototype.getMaxListeners=i(function(){return g(this)},"getMaxListeners"),p.prototype.emit=i(function(q){for(var W=[],Y=1;Y<arguments.length;Y++)W.push(arguments[Y]);var k=q==="error",V=this._events;if(V!==void 0)k=k&&V.error===void 0;else if(!k)return!1;if(k){if(W.length>0&&(pe=W[0]),pe instanceof Error)throw pe;var pe,Ie=Error("Unhandled error."+(pe?" ("+pe.message+")":""));throw Ie.context=pe,Ie}var ne=V[q];if(ne===void 0)return!1;if(typeof ne=="function")u(ne,this,W);else for(var De=ne.length,Be=_(ne,De),Y=0;Y<De;++Y)u(Be[Y],this,W);return!0},"emit"),i(v,"_addListener"),p.prototype.addListener=i(function(q,W){return v(this,q,W,!1)},"addListener"),p.prototype.on=p.prototype.addListener,p.prototype.prependListener=i(function(q,W){return v(this,q,W,!0)},"prependListener"),i(l,"onceWrapper"),i(C,"_onceWrap"),p.prototype.once=i(function(q,W){return E(W),this.on(q,C(this,q,W)),this},"once"),p.prototype.prependOnceListener=i(function(q,W){return E(W),this.prependListener(q,C(this,q,W)),this},"prependOnceListener"),p.prototype.removeListener=i(function(q,W){var Y,k,V,pe,Ie;if(E(W),(k=this._events)===void 0||(Y=k[q])===void 0)return this;if(Y===W||Y.listener===W)--this._eventsCount==0?this._events=Object.create(null):(delete k[q],k.removeListener&&this.emit("removeListener",q,Y.listener||W));else if(typeof Y!="function"){for(V=-1,pe=Y.length-1;pe>=0;pe--)if(Y[pe]===W||Y[pe].listener===W){Ie=Y[pe].listener,V=pe;break}if(V<0)return this;V===0?Y.shift():Q(Y,V),Y.length===1&&(k[q]=Y[0]),k.removeListener!==void 0&&this.emit("removeListener",q,Ie||W)}return this},"removeListener"),p.prototype.off=p.prototype.removeListener,p.prototype.removeAllListeners=i(function(q){var W,Y,k;if((Y=this._events)===void 0)return this;if(Y.removeListener===void 0)return arguments.length==0?(this._events=Object.create(null),this._eventsCount=0):Y[q]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete Y[q]),this;if(arguments.length==0){var V,pe=Object.keys(Y);for(k=0;k<pe.length;++k)(V=pe[k])!=="removeListener"&&this.removeAllListeners(V);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(W=Y[q])=="function")this.removeListener(q,W);else if(W!==void 0)for(k=W.length-1;k>=0;k--)this.removeListener(q,W[k]);return this},"removeAllListeners"),i(m,"_listeners"),p.prototype.listeners=i(function(q){return m(this,q,!0)},"listeners"),p.prototype.rawListeners=i(function(q){return m(this,q,!1)},"rawListeners"),p.listenerCount=function(q,W){return typeof q.listenerCount=="function"?q.listenerCount(W):w.call(q,W)},p.prototype.listenerCount=w,i(w,"listenerCount"),p.prototype.eventNames=i(function(){return this._eventsCount>0?f(this._events):[]},"eventNames"),i(_,"arrayClone"),i(Q,"spliceOne"),i(D,"unwrapListeners"),i(R,"once"),i(X,"addErrorHandlerIfEventEmitter"),i(me,"eventTargetAgnosticAddListener")}),Qe={};H(Qe,{default:()=>Ne});var Ne,J=N(()=>{de(),Ne={}});function Ee(A){let y=1779033703,f=3144134277,h=1013904242,u=2773480762,a=1359893119,s=2600822924,p=528734635,S=1541459225,E=0,g=0,v=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],l=i((D,R)=>D>>>R|D<<32-R,"rrot"),C=new Uint32Array(64),m=new Uint8Array(64),w=i(()=>{for(let V=0,pe=0;V<16;V++,pe+=4)C[V]=m[pe]<<24|m[pe+1]<<16|m[pe+2]<<8|m[pe+3];for(let V=16;V<64;V++){let pe=l(C[V-15],7)^l(C[V-15],18)^C[V-15]>>>3,Ie=l(C[V-2],17)^l(C[V-2],19)^C[V-2]>>>10;C[V]=C[V-16]+pe+C[V-7]+Ie|0}let D=y,R=f,X=h,me=u,q=a,W=s,Y=p,k=S;for(let V=0;V<64;V++){let pe=k+(l(q,6)^l(q,11)^l(q,25))+(q&W^~q&Y)+v[V]+C[V]|0,Ie=(l(D,2)^l(D,13)^l(D,22))+(D&R^D&X^R&X)|0;k=Y,Y=W,W=q,q=me+pe|0,me=X,X=R,R=D,D=pe+Ie|0}y=y+D|0,f=f+R|0,h=h+X|0,u=u+me|0,a=a+q|0,s=s+W|0,p=p+Y|0,S=S+k|0,g=0},"process"),_=i(D=>{typeof D=="string"&&(D=new TextEncoder().encode(D));for(let R=0;R<D.length;R++)m[g++]=D[R],g===64&&w();E+=D.length},"add"),Q=i(()=>{if(m[g++]=128,g==64&&w(),g+8>64){for(;g<64;)m[g++]=0;w()}for(;g<58;)m[g++]=0;let D=8*E;m[g++]=D/1099511627776&255,m[g++]=D/4294967296&255,m[g++]=D>>>24,m[g++]=D>>>16&255,m[g++]=D>>>8&255,m[g++]=255&D,w();let R=new Uint8Array(32);return R[0]=y>>>24,R[1]=y>>>16&255,R[2]=y>>>8&255,R[3]=255&y,R[4]=f>>>24,R[5]=f>>>16&255,R[6]=f>>>8&255,R[7]=255&f,R[8]=h>>>24,R[9]=h>>>16&255,R[10]=h>>>8&255,R[11]=255&h,R[12]=u>>>24,R[13]=u>>>16&255,R[14]=u>>>8&255,R[15]=255&u,R[16]=a>>>24,R[17]=a>>>16&255,R[18]=a>>>8&255,R[19]=255&a,R[20]=s>>>24,R[21]=s>>>16&255,R[22]=s>>>8&255,R[23]=255&s,R[24]=p>>>24,R[25]=p>>>16&255,R[26]=p>>>8&255,R[27]=255&p,R[28]=S>>>24,R[29]=S>>>16&255,R[30]=S>>>8&255,R[31]=255&S,R},"digest");return A===void 0?{add:_,digest:Q}:(_(A),Q())}var ke,Ue,wt=N(()=>{de(),i(Ee,"sha256")}),Ct=N(()=>{de(),i(ke=class xt{constructor(){be(this,"_dataLength",0),be(this,"_bufferLength",0),be(this,"_state",new Int32Array(4)),be(this,"_buffer",new ArrayBuffer(68)),be(this,"_buffer8"),be(this,"_buffer32"),this._buffer8=new Uint8Array(this._buffer,0,68),this._buffer32=new Uint32Array(this._buffer,0,17),this.start()}static hashByteArray(y,f=!1){return this.onePassHasher.start().appendByteArray(y).end(f)}static hashStr(y,f=!1){return this.onePassHasher.start().appendStr(y).end(f)}static hashAsciiStr(y,f=!1){return this.onePassHasher.start().appendAsciiStr(y).end(f)}static _hex(y){let f=xt.hexChars,h=xt.hexOut,u,a,s,p;for(p=0;p<4;p+=1)for(a=8*p,u=y[p],s=0;s<8;s+=2)h[a+1+s]=f.charAt(15&u),u>>>=4,h[a+0+s]=f.charAt(15&u),u>>>=4;return h.join("")}static _md5cycle(y,f){let h=y[0],u=y[1],a=y[2],s=y[3];h+=(u&a|~u&s)+f[0]-680876936|0,s+=((h=(h<<7|h>>>25)+u|0)&u|~h&a)+f[1]-389564586|0,a+=((s=(s<<12|s>>>20)+h|0)&h|~s&u)+f[2]+606105819|0,u+=((a=(a<<17|a>>>15)+s|0)&s|~a&h)+f[3]-1044525330|0,h+=((u=(u<<22|u>>>10)+a|0)&a|~u&s)+f[4]-176418897|0,s+=((h=(h<<7|h>>>25)+u|0)&u|~h&a)+f[5]+1200080426|0,a+=((s=(s<<12|s>>>20)+h|0)&h|~s&u)+f[6]-1473231341|0,u+=((a=(a<<17|a>>>15)+s|0)&s|~a&h)+f[7]-45705983|0,h+=((u=(u<<22|u>>>10)+a|0)&a|~u&s)+f[8]+1770035416|0,s+=((h=(h<<7|h>>>25)+u|0)&u|~h&a)+f[9]-1958414417|0,a+=((s=(s<<12|s>>>20)+h|0)&h|~s&u)+f[10]-42063|0,u+=((a=(a<<17|a>>>15)+s|0)&s|~a&h)+f[11]-1990404162|0,h+=((u=(u<<22|u>>>10)+a|0)&a|~u&s)+f[12]+1804603682|0,s+=((h=(h<<7|h>>>25)+u|0)&u|~h&a)+f[13]-40341101|0,a+=((s=(s<<12|s>>>20)+h|0)&h|~s&u)+f[14]-1502002290|0,u+=((a=(a<<17|a>>>15)+s|0)&s|~a&h)+f[15]+1236535329|0,h+=((u=(u<<22|u>>>10)+a|0)&s|a&~s)+f[1]-165796510|0,s+=((h=(h<<5|h>>>27)+u|0)&a|u&~a)+f[6]-1069501632|0,a+=((s=(s<<9|s>>>23)+h|0)&u|h&~u)+f[11]+643717713|0,u+=((a=(a<<14|a>>>18)+s|0)&h|s&~h)+f[0]-373897302|0,h+=((u=(u<<20|u>>>12)+a|0)&s|a&~s)+f[5]-701558691|0,s+=((h=(h<<5|h>>>27)+u|0)&a|u&~a)+f[10]+38016083|0,a+=((s=(s<<9|s>>>23)+h|0)&u|h&~u)+f[15]-660478335|0,u+=((a=(a<<14|a>>>18)+s|0)&h|s&~h)+f[4]-405537848|0,h+=((u=(u<<20|u>>>12)+a|0)&s|a&~s)+f[9]+568446438|0,s+=((h=(h<<5|h>>>27)+u|0)&a|u&~a)+f[14]-1019803690|0,a+=((s=(s<<9|s>>>23)+h|0)&u|h&~u)+f[3]-187363961|0,u+=((a=(a<<14|a>>>18)+s|0)&h|s&~h)+f[8]+1163531501|0,h+=((u=(u<<20|u>>>12)+a|0)&s|a&~s)+f[13]-1444681467|0,s+=((h=(h<<5|h>>>27)+u|0)&a|u&~a)+f[2]-51403784|0,a+=((s=(s<<9|s>>>23)+h|0)&u|h&~u)+f[7]+1735328473|0,u+=((a=(a<<14|a>>>18)+s|0)&h|s&~h)+f[12]-1926607734|0,h+=((u=(u<<20|u>>>12)+a|0)^a^s)+f[5]-378558|0,s+=((h=(h<<4|h>>>28)+u|0)^u^a)+f[8]-2022574463|0,a+=((s=(s<<11|s>>>21)+h|0)^h^u)+f[11]+1839030562|0,u+=((a=(a<<16|a>>>16)+s|0)^s^h)+f[14]-35309556|0,h+=((u=(u<<23|u>>>9)+a|0)^a^s)+f[1]-1530992060|0,s+=((h=(h<<4|h>>>28)+u|0)^u^a)+f[4]+1272893353|0,a+=((s=(s<<11|s>>>21)+h|0)^h^u)+f[7]-155497632|0,u+=((a=(a<<16|a>>>16)+s|0)^s^h)+f[10]-1094730640|0,h+=((u=(u<<23|u>>>9)+a|0)^a^s)+f[13]+681279174|0,s+=((h=(h<<4|h>>>28)+u|0)^u^a)+f[0]-358537222|0,a+=((s=(s<<11|s>>>21)+h|0)^h^u)+f[3]-722521979|0,u+=((a=(a<<16|a>>>16)+s|0)^s^h)+f[6]+76029189|0,h+=((u=(u<<23|u>>>9)+a|0)^a^s)+f[9]-640364487|0,s+=((h=(h<<4|h>>>28)+u|0)^u^a)+f[12]-421815835|0,a+=((s=(s<<11|s>>>21)+h|0)^h^u)+f[15]+530742520|0,u+=((a=(a<<16|a>>>16)+s|0)^s^h)+f[2]-995338651|0,u=(u<<23|u>>>9)+a|0,h+=(a^(u|~s))+f[0]-198630844|0,h=(h<<6|h>>>26)+u|0,s+=(u^(h|~a))+f[7]+1126891415|0,s=(s<<10|s>>>22)+h|0,a+=(h^(s|~u))+f[14]-1416354905|0,a=(a<<15|a>>>17)+s|0,u+=(s^(a|~h))+f[5]-57434055|0,u=(u<<21|u>>>11)+a|0,h+=(a^(u|~s))+f[12]+1700485571|0,h=(h<<6|h>>>26)+u|0,s+=(u^(h|~a))+f[3]-1894986606|0,s=(s<<10|s>>>22)+h|0,a+=(h^(s|~u))+f[10]-1051523|0,a=(a<<15|a>>>17)+s|0,u+=(s^(a|~h))+f[1]-2054922799|0,u=(u<<21|u>>>11)+a|0,h+=(a^(u|~s))+f[8]+1873313359|0,h=(h<<6|h>>>26)+u|0,s+=(u^(h|~a))+f[15]-30611744|0,s=(s<<10|s>>>22)+h|0,a+=(h^(s|~u))+f[6]-1560198380|0,a=(a<<15|a>>>17)+s|0,u+=(s^(a|~h))+f[13]+1309151649|0,u=(u<<21|u>>>11)+a|0,h+=(a^(u|~s))+f[4]-145523070|0,h=(h<<6|h>>>26)+u|0,s+=(u^(h|~a))+f[11]-1120210379|0,s=(s<<10|s>>>22)+h|0,a+=(h^(s|~u))+f[2]+718787259|0,a=(a<<15|a>>>17)+s|0,u+=(s^(a|~h))+f[9]-343485551|0,u=(u<<21|u>>>11)+a|0,y[0]=h+y[0]|0,y[1]=u+y[1]|0,y[2]=a+y[2]|0,y[3]=s+y[3]|0}start(){return this._dataLength=0,this._bufferLength=0,this._state.set(xt.stateIdentity),this}appendStr(y){let f=this._buffer8,h=this._buffer32,u=this._bufferLength,a,s;for(s=0;s<y.length;s+=1){if((a=y.charCodeAt(s))<128)f[u++]=a;else if(a<2048)f[u++]=(a>>>6)+192,f[u++]=63&a|128;else if(a<55296||a>56319)f[u++]=(a>>>12)+224,f[u++]=a>>>6&63|128,f[u++]=63&a|128;else{if((a=(a-55296)*1024+(y.charCodeAt(++s)-56320)+65536)>1114111)throw Error("Unicode standard supports code points up to U+10FFFF");f[u++]=(a>>>18)+240,f[u++]=a>>>12&63|128,f[u++]=a>>>6&63|128,f[u++]=63&a|128}u>=64&&(this._dataLength+=64,xt._md5cycle(this._state,h),u-=64,h[0]=h[16])}return this._bufferLength=u,this}appendAsciiStr(y){let f=this._buffer8,h=this._buffer32,u=this._bufferLength,a,s=0;for(;;){for(a=Math.min(y.length-s,64-u);a--;)f[u++]=y.charCodeAt(s++);if(u<64)break;this._dataLength+=64,xt._md5cycle(this._state,h),u=0}return this._bufferLength=u,this}appendByteArray(y){let f=this._buffer8,h=this._buffer32,u=this._bufferLength,a,s=0;for(;;){for(a=Math.min(y.length-s,64-u);a--;)f[u++]=y[s++];if(u<64)break;this._dataLength+=64,xt._md5cycle(this._state,h),u=0}return this._bufferLength=u,this}getState(){let y=this._state;return{buffer:String.fromCharCode.apply(null,Array.from(this._buffer8)),buflen:this._bufferLength,length:this._dataLength,state:[y[0],y[1],y[2],y[3]]}}setState(y){let f=y.buffer,h=y.state,u=this._state,a;for(this._dataLength=y.length,this._bufferLength=y.buflen,u[0]=h[0],u[1]=h[1],u[2]=h[2],u[3]=h[3],a=0;a<f.length;a+=1)this._buffer8[a]=f.charCodeAt(a)}end(y=!1){let f=this._bufferLength,h=this._buffer8,u=this._buffer32,a=(f>>2)+1;this._dataLength+=f;let s=8*this._dataLength;if(h[f]=128,h[f+1]=h[f+2]=h[f+3]=0,u.set(xt.buffer32Identity.subarray(a),a),f>55&&(xt._md5cycle(this._state,u),u.set(xt.buffer32Identity)),s<=4294967295)u[14]=s;else{let p=s.toString(16).match(/(.*?)(.{0,8})$/);if(p===null)return;let S=parseInt(p[2],16),E=parseInt(p[1],16)||0;u[14]=S,u[15]=E}return xt._md5cycle(this._state,u),y?this._state:xt._hex(this._state)}},"Md5"),be(ke,"stateIdentity",new Int32Array([1732584193,-271733879,-1732584194,271733878])),be(ke,"buffer32Identity",new Int32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])),be(ke,"hexChars","0123456789abcdef"),be(ke,"hexOut",[]),be(ke,"onePassHasher",new ke),Ue=ke}),ve={};function pt(A){return he.getRandomValues(oe.alloc(A))}function Bt(A){if(A==="sha256")return{update:function(y){return{digest:function(){return oe.from(Ee(y))}}}};if(A==="md5")return{update:function(y){return{digest:function(){return typeof y=="string"?Ue.hashStr(y):Ue.hashByteArray(y)}}}};throw Error(`Hash type '${A}' not supported`)}function $t(A,y){if(A!=="sha256")throw Error(`Only sha256 is supported (requested: '${A}')`);return{update:function(f){return{digest:function(){typeof y=="string"&&(y=new TextEncoder().encode(y)),typeof f=="string"&&(f=new TextEncoder().encode(f));let h=y.length;if(h>64)y=Ee(y);else if(h<64){let S=new Uint8Array(64);S.set(y),y=S}let u=new Uint8Array(64),a=new Uint8Array(64);for(let S=0;S<64;S++)u[S]=54^y[S],a[S]=92^y[S];let s=new Uint8Array(f.length+64);s.set(u,0),s.set(f,64);let p=new Uint8Array(96);return p.set(a,0),p.set(Ee(s),64),oe.from(Ee(p))}}}}}H(ve,{createHash:()=>Bt,createHmac:()=>$t,randomBytes:()=>pt});var qr=N(()=>{de(),wt(),Ct(),i(pt,"randomBytes"),i(Bt,"createHash"),i($t,"createHmac")}),br=j(A=>{de(),A.parse=function(u,a){return new f(u,a).parse()};var y=class zi{constructor(a,s){this.source=a,this.transform=s||h,this.position=0,this.entries=[],this.recorded=[],this.dimension=0}isEof(){return this.position>=this.source.length}nextCharacter(){var a=this.source[this.position++];return a==="\\"?{value:this.source[this.position++],escaped:!0}:{value:a,escaped:!1}}record(a){this.recorded.push(a)}newEntry(a){var s;(this.recorded.length>0||a)&&((s=this.recorded.join(""))!=="NULL"||a||(s=null),s!==null&&(s=this.transform(s)),this.entries.push(s),this.recorded=[])}consumeDimensions(){if(this.source[0]==="[")for(;!this.isEof()&&this.nextCharacter().value!=="=";);}parse(a){var s,p,S;for(this.consumeDimensions();!this.isEof();)if((s=this.nextCharacter()).value!=="{"||S){if(s.value!=="}"||S)s.value!=='"'||s.escaped?s.value!==","||S?this.record(s.value):this.newEntry():(S&&this.newEntry(!0),S=!S);else if(this.dimension--,!this.dimension&&(this.newEntry(),a))return this.entries}else this.dimension++,this.dimension>1&&(p=new zi(this.source.substr(this.position-1),this.transform),this.entries.push(p.parse(!0)),this.position+=p.position-2);if(this.dimension!==0)throw Error("array dimension not balanced");return this.entries}};i(y,"ArrayParser");var f=y;function h(u){return u}i(h,"identity")}),Qr=j((A,y)=>{de();var f=br();y.exports={create:function(h,u){return{parse:function(){return f.parse(h,u)}}}}}),jr=j((A,y)=>{de();var f=/(\d{1,})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})(\.\d{1,})?.*?( BC)?$/,h=/^(\d{1,})-(\d{2})-(\d{2})( BC)?$/,u=/([Z+-])(\d{2})?:?(\d{2})?:?(\d{2})?/,a=/^-?infinity$/;function s(g){var v=h.exec(g);if(v){var l=parseInt(v[1],10);v[4]&&(l=S(l));var C=new Date(l,parseInt(v[2],10)-1,v[3]);return E(l)&&C.setFullYear(l),C}}function p(g){if(g.endsWith("+00"))return 0;var v=u.exec(g.split(" ")[1]);if(v){var l=v[1];return l==="Z"?0:(3600*parseInt(v[2],10)+60*parseInt(v[3]||0,10)+parseInt(v[4]||0,10))*(l==="-"?-1:1)*1e3}}function S(g){return-(g-1)}function E(g){return g>=0&&g<100}y.exports=i(function(g){if(a.test(g))return Number(g.replace("i","I"));var v=f.exec(g);if(!v)return s(g)||null;var l=!!v[8],C=parseInt(v[1],10);l&&(C=S(C));var m=parseInt(v[2],10)-1,w=v[3],_=parseInt(v[4],10),Q=parseInt(v[5],10),D=parseInt(v[6],10),R=v[7];R=R?1e3*parseFloat(R):0;var X,me=p(g);return me!=null?(X=new Date(Date.UTC(C,m,w,_,Q,D,R)),E(C)&&X.setUTCFullYear(C),me!==0&&X.setTime(X.getTime()-me)):(X=new Date(C,m,w,_,Q,D,R),E(C)&&X.setFullYear(C)),X},"parseDate"),i(s,"getDate"),i(p,"timeZoneOffset"),i(S,"bcYearToNegativeYear"),i(E,"is0To99")}),zt=j((A,y)=>{de(),y.exports=h;var f=Object.prototype.hasOwnProperty;function h(u){for(var a=1;a<arguments.length;a++){var s=arguments[a];for(var p in s)f.call(s,p)&&(u[p]=s[p])}return u}i(h,"extend")}),Ur=j((A,y)=>{de();var f=zt();function h(m){if(!(this instanceof h))return new h(m);f(this,C(m))}y.exports=h,i(h,"PostgresInterval");var u=["seconds","minutes","hours","days","months","years"];h.prototype.toPostgres=function(){var m=u.filter(this.hasOwnProperty,this);return this.milliseconds&&0>m.indexOf("seconds")&&m.push("seconds"),m.length===0?"0":m.map(function(w){var _=this[w]||0;return w==="seconds"&&this.milliseconds&&(_=(_+this.milliseconds/1e3).toFixed(6).replace(/\.?0+$/,"")),_+" "+w},this).join(" ")};var a={years:"Y",months:"M",days:"D",hours:"H",minutes:"M",seconds:"S"},s=["years","months","days"],p=["hours","minutes","seconds"];h.prototype.toISOString=h.prototype.toISO=function(){return"P"+s.map(m,this).join("")+"T"+p.map(m,this).join("");function m(w){var _=this[w]||0;return w==="seconds"&&this.milliseconds&&(_=(_+this.milliseconds/1e3).toFixed(6).replace(/0+$/,"")),_+a[w]}};var S="([+-]?\\d+)",E=new RegExp([S+"\\s+years?",S+"\\s+mons?",S+"\\s+days?","([+-])?([\\d]*):(\\d\\d):(\\d\\d)\\.?(\\d{1,6})?"].map(function(m){return"("+m+")?"}).join("\\s*")),g={years:2,months:4,days:6,hours:9,minutes:10,seconds:11,milliseconds:12},v=["hours","minutes","seconds","milliseconds"];function l(m){return parseInt(m+"000000".slice(m.length),10)/1e3}function C(m){if(!m)return{};var w=E.exec(m),_=w[8]==="-";return Object.keys(g).reduce(function(Q,D){var R=w[g[D]];return R&&(R=D==="milliseconds"?l(R):parseInt(R,10))&&(_&&~v.indexOf(D)&&(R*=-1),Q[D]=R),Q},{})}i(l,"parseMilliseconds"),i(C,"parse")}),Fr=j((A,y)=>{de(),y.exports=i(function(f){if(/^\\x/.test(f))return new oe(f.substr(2),"hex");for(var h="",u=0;u<f.length;)if(f[u]!=="\\")h+=f[u],++u;else if(/[0-7]{3}/.test(f.substr(u+1,3)))h+=String.fromCharCode(parseInt(f.substr(u+1,3),8)),u+=4;else{for(var a=1;u+a<f.length&&f[u+a]==="\\";)a++;for(var s=0;s<Math.floor(a/2);++s)h+="\\";u+=2*Math.floor(a/2)}return new oe(h,"binary")},"parseBytea")}),vr=j((A,y)=>{de();var f=br(),h=Qr(),u=jr(),a=Ur(),s=Fr();function p(k){return i(function(V){return V===null?V:k(V)},"nullAllowed")}function S(k){return k===null?k:k==="TRUE"||k==="t"||k==="true"||k==="y"||k==="yes"||k==="on"||k==="1"}function E(k){return k?f.parse(k,S):null}function g(k){return parseInt(k,10)}function v(k){return k?f.parse(k,p(g)):null}function l(k){return k?f.parse(k,p(function(V){return X(V).trim()})):null}i(p,"allowNull"),i(S,"parseBool"),i(E,"parseBoolArray"),i(g,"parseBaseTenInt"),i(v,"parseIntegerArray"),i(l,"parseBigIntegerArray");var C=i(function(k){return k?h.create(k,function(V){return V!==null&&(V=q(V)),V}).parse():null},"parsePointArray"),m=i(function(k){return k?h.create(k,function(V){return V!==null&&(V=parseFloat(V)),V}).parse():null},"parseFloatArray"),w=i(function(k){return k?h.create(k).parse():null},"parseStringArray"),_=i(function(k){return k?h.create(k,function(V){return V!==null&&(V=u(V)),V}).parse():null},"parseDateArray"),Q=i(function(k){return k?h.create(k,function(V){return V!==null&&(V=a(V)),V}).parse():null},"parseIntervalArray"),D=i(function(k){return k?f.parse(k,p(s)):null},"parseByteAArray"),R=i(function(k){return parseInt(k,10)},"parseInteger"),X=i(function(k){var V=String(k);return/^\d+$/.test(V)?V:k},"parseBigInteger"),me=i(function(k){return k?f.parse(k,p(JSON.parse)):null},"parseJsonArray"),q=i(function(k){return k[0]!=="("?null:{x:parseFloat((k=k.substring(1,k.length-1).split(","))[0]),y:parseFloat(k[1])}},"parsePoint"),W=i(function(k){if(k[0]!=="<"&&k[1]!=="(")return null;for(var V="(",pe="",Ie=!1,ne=2;ne<k.length-1;ne++){if(Ie||(V+=k[ne]),k[ne]===")"){Ie=!0;continue}Ie&&k[ne]!==","&&(pe+=k[ne])}var De=q(V);return De.radius=parseFloat(pe),De},"parseCircle"),Y=i(function(k){k(20,X),k(21,R),k(23,R),k(26,R),k(700,parseFloat),k(701,parseFloat),k(16,S),k(1082,u),k(1114,u),k(1184,u),k(600,q),k(651,w),k(718,W),k(1e3,E),k(1001,D),k(1005,v),k(1007,v),k(1028,v),k(1016,l),k(1017,C),k(1021,m),k(1022,m),k(1231,m),k(1014,w),k(1015,w),k(1008,w),k(1009,w),k(1040,w),k(1041,w),k(1115,_),k(1182,_),k(1185,_),k(1186,a),k(1187,Q),k(17,s),k(114,JSON.parse.bind(JSON)),k(3802,JSON.parse.bind(JSON)),k(199,me),k(3807,me),k(3907,w),k(2951,w),k(791,w),k(1183,w),k(1270,w)},"init");y.exports={init:Y}}),vi=j((A,y)=>{function f(h){var u=h.readInt32BE(0),a=h.readUInt32BE(4),s="";u<0&&(u=~u+(a===0),a=~a+1>>>0,s="-");var p,S,E,g,v,l,C="";if(p=u%1e6,u=u/1e6>>>0,a=(S=4294967296*p+a)/1e6>>>0,E=""+(S-1e6*a),a===0&&u===0)return s+E+C;for(g="",v=6-E.length,l=0;l<v;l++)g+="0";if(C=g+E+C,p=u%1e6,u=u/1e6>>>0,a=(S=4294967296*p+a)/1e6>>>0,E=""+(S-1e6*a),a===0&&u===0)return s+E+C;for(g="",v=6-E.length,l=0;l<v;l++)g+="0";if(C=g+E+C,p=u%1e6,u=u/1e6>>>0,a=(S=4294967296*p+a)/1e6>>>0,E=""+(S-1e6*a),a===0&&u===0)return s+E+C;for(g="",v=6-E.length,l=0;l<v;l++)g+="0";return C=g+E+C,s+(E=""+(S=4294967296*(p=u%1e6)+a)%1e6)+C}de(),i(f,"readInt8"),y.exports=f}),wi=j((A,y)=>{de();var f=vi(),h=i(function(w,_,Q,D,R){Q=Q||0,D=D||!1,R=R||function(Ie,ne,De){return Ie*Math.pow(2,De)+ne};var X=Q>>3,me=i(function(Ie){return D?255&~Ie:Ie},"inv"),q=255,W=8-Q%8;_<W&&(q=255<<8-_&255,W=_),Q&&(q>>=Q%8);var Y=0;Q%8+_>=8&&(Y=R(0,me(w[X])&q,W));for(var k=_+Q>>3,V=X+1;V<k;V++)Y=R(Y,me(w[V]),8);var pe=(_+Q)%8;return pe>0&&(Y=R(Y,me(w[k])>>8-pe,pe)),Y},"parseBits"),u=i(function(w,_,Q){var D=Math.pow(2,Q-1)-1,R=h(w,1),X=h(w,Q,1);if(X===0)return 0;var me=1,q=h(w,_,Q+1,!1,i(function(W,Y,k){W===0&&(W=1);for(var V=1;V<=k;V++)me/=2,(Y&1<<k-V)>0&&(W+=me);return W},"parsePrecisionBits"));return X==Math.pow(2,Q+1)-1?q===0?R===0?1/0:-1/0:NaN:(R===0?1:-1)*Math.pow(2,X-D)*q},"parseFloatFromBits"),a=i(function(w){return h(w,1)==1?-1*(h(w,15,1,!0)+1):h(w,15,1)},"parseInt16"),s=i(function(w){return h(w,1)==1?-1*(h(w,31,1,!0)+1):h(w,31,1)},"parseInt32"),p=i(function(w){return u(w,23,8)},"parseFloat32"),S=i(function(w){return u(w,52,11)},"parseFloat64"),E=i(function(w){var _=h(w,16,32);if(_==49152)return NaN;for(var Q=Math.pow(1e4,h(w,16,16)),D=0,R=h(w,16),X=0;X<R;X++)D+=h(w,16,64+16*X)*Q,Q/=1e4;var me=Math.pow(10,h(w,16,48));return(_===0?1:-1)*Math.round(D*me)/me},"parseNumeric"),g=i(function(w,_){var Q=h(_,1),D=h(_,63,1),R=new Date((Q===0?1:-1)*D/1e3+9466848e5);return w||R.setTime(R.getTime()+6e4*R.getTimezoneOffset()),R.usec=D%1e3,R.getMicroSeconds=function(){return this.usec},R.setMicroSeconds=function(X){this.usec=X},R.getUTCMicroSeconds=function(){return this.usec},R},"parseDate"),v=i(function(w){for(var _=h(w,32),Q=(h(w,32,32),h(w,32,64)),D=96,R=[],X=0;X<_;X++)R[X]=h(w,32,D),D+=64;var me=i(function(W){var Y,k=h(w,32,D);return D+=32,k==4294967295?null:W==23||W==20?(Y=h(w,8*k,D),D+=8*k,Y):W==25?w.toString(this.encoding,D>>3,(D+=k<<3)>>3):void console.log("ERROR: ElementType not implemented: "+W)},"parseElement"),q=i(function(W,Y){var k,V=[];if(W.length>1){var pe=W.shift();for(k=0;k<pe;k++)V[k]=q(W,Y);W.unshift(pe)}else for(k=0;k<W[0];k++)V[k]=me(Y);return V},"parse");return q(R,Q)},"parseArray"),l=i(function(w){return w.toString("utf8")},"parseText"),C=i(function(w){return w===null?null:h(w,8)>0},"parseBool"),m=i(function(w){w(20,f),w(21,a),w(23,s),w(26,s),w(1700,E),w(700,p),w(701,S),w(16,C),w(1114,g.bind(null,!1)),w(1184,g.bind(null,!0)),w(1e3,v),w(1007,v),w(1016,v),w(1008,v),w(1009,v),w(25,l)},"init");y.exports={init:m}}),zr=j((A,y)=>{de(),y.exports={BOOL:16,BYTEA:17,CHAR:18,INT8:20,INT2:21,INT4:23,REGPROC:24,TEXT:25,OID:26,TID:27,XID:28,CID:29,JSON:114,XML:142,PG_NODE_TREE:194,SMGR:210,PATH:602,POLYGON:604,CIDR:650,FLOAT4:700,FLOAT8:701,ABSTIME:702,RELTIME:703,TINTERVAL:704,CIRCLE:718,MACADDR8:774,MONEY:790,MACADDR:829,INET:869,ACLITEM:1033,BPCHAR:1042,VARCHAR:1043,DATE:1082,TIME:1083,TIMESTAMP:1114,TIMESTAMPTZ:1184,INTERVAL:1186,TIMETZ:1266,BIT:1560,VARBIT:1562,NUMERIC:1700,REFCURSOR:1790,REGPROCEDURE:2202,REGOPER:2203,REGOPERATOR:2204,REGCLASS:2205,REGTYPE:2206,UUID:2950,TXID_SNAPSHOT:2970,PG_LSN:3220,PG_NDISTINCT:3361,PG_DEPENDENCIES:3402,TSVECTOR:3614,TSQUERY:3615,GTSVECTOR:3642,REGCONFIG:3734,REGDICTIONARY:3769,JSONB:3802,REGNAMESPACE:4089,REGROLE:4096}}),Ht=j(A=>{de();var y=vr(),f=wi(),h=Qr(),u=zr();A.getTypeParser=p,A.setTypeParser=S,A.arrayParser=h,A.builtins=u;var a={text:{},binary:{}};function s(E){return String(E)}function p(E,g){return a[g=g||"text"]&&a[g][E]||s}function S(E,g,v){typeof g=="function"&&(v=g,g="text"),a[g][E]=v}i(s,"noParse"),i(p,"getTypeParser"),i(S,"setTypeParser"),y.init(function(E,g){a.text[E]=g}),f.init(function(E,g){a.binary[E]=g})}),Gt=j((A,y)=>{de(),y.exports={host:"localhost",user:ee.platform==="win32"?ee.env.USERNAME:ee.env.USER,database:void 0,password:null,connectionString:void 0,port:5432,rows:0,binary:!1,max:10,idleTimeoutMillis:3e4,client_encoding:"",ssl:!1,application_name:void 0,fallback_application_name:void 0,options:void 0,parseInputDatesAsUTC:!1,statement_timeout:!1,lock_timeout:!1,idle_in_transaction_session_timeout:!1,query_timeout:!1,connect_timeout:0,keepalives:1,keepalives_idle:0};var f=Ht(),h=f.getTypeParser(20,"text"),u=f.getTypeParser(1016,"text");y.exports.__defineSetter__("parseInt8",function(a){f.setTypeParser(20,"text",a?f.getTypeParser(23,"text"):h),f.setTypeParser(1016,"text",a?f.getTypeParser(1007,"text"):u)})}),Jt=j((A,y)=>{de();var f=(qr(),fe(ve)),h=Gt();function u(m){return'"'+m.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'}function a(m){for(var w="{",_=0;_<m.length;_++)_>0&&(w+=","),m[_]===null||typeof m[_]>"u"?w+="NULL":Array.isArray(m[_])?w+=a(m[_]):m[_]instanceof oe?w+="\\\\x"+m[_].toString("hex"):w+=u(s(m[_]));return w+"}"}i(u,"escapeElement"),i(a,"arrayString");var s=i(function(m,w){if(m==null)return null;if(m instanceof oe)return m;if(ArrayBuffer.isView(m)){var _=oe.from(m.buffer,m.byteOffset,m.byteLength);return _.length===m.byteLength?_:_.slice(m.byteOffset,m.byteOffset+m.byteLength)}return m instanceof Date?h.parseInputDatesAsUTC?g(m):E(m):Array.isArray(m)?a(m):typeof m=="object"?p(m,w):m.toString()},"prepareValue");function p(m,w){if(m&&typeof m.toPostgres=="function"){if((w=w||[]).indexOf(m)!==-1)throw Error('circular reference detected while preparing "'+m+'" for query');return w.push(m),s(m.toPostgres(s),w)}return JSON.stringify(m)}function S(m,w){for(m=""+m;m.length<w;)m="0"+m;return m}function E(m){var w=-m.getTimezoneOffset(),_=m.getFullYear(),Q=_<1;Q&&(_=Math.abs(_)+1);var D=S(_,4)+"-"+S(m.getMonth()+1,2)+"-"+S(m.getDate(),2)+"T"+S(m.getHours(),2)+":"+S(m.getMinutes(),2)+":"+S(m.getSeconds(),2)+"."+S(m.getMilliseconds(),3);return w<0?(D+="-",w*=-1):D+="+",D+=S(Math.floor(w/60),2)+":"+S(w%60,2),Q&&(D+=" BC"),D}function g(m){var w=m.getUTCFullYear(),_=w<1;_&&(w=Math.abs(w)+1);var Q=S(w,4)+"-"+S(m.getUTCMonth()+1,2)+"-"+S(m.getUTCDate(),2)+"T"+S(m.getUTCHours(),2)+":"+S(m.getUTCMinutes(),2)+":"+S(m.getUTCSeconds(),2)+"."+S(m.getUTCMilliseconds(),3);return Q+="+00:00",_&&(Q+=" BC"),Q}function v(m,w,_){return m=typeof m=="string"?{text:m}:m,w&&(typeof w=="function"?m.callback=w:m.values=w),_&&(m.callback=_),m}i(p,"prepareObject"),i(S,"pad"),i(E,"dateToString"),i(g,"dateToStringUTC"),i(v,"normalizeQueryConfig");var l=i(function(m){return f.createHash("md5").update(m,"utf-8").digest("hex")},"md5"),C=i(function(m,w,_){var Q=l(w+m);return"md5"+l(oe.concat([oe.from(Q),_]))},"postgresMd5PasswordHash");y.exports={prepareValue:i(function(m){return s(m)},"prepareValueWrapper"),normalizeQueryConfig:v,postgresMd5PasswordHash:C,md5:l}}),Hr=j((A,y)=>{de();var f=(qr(),fe(ve));function h(w){if(w.indexOf("SCRAM-SHA-256")===-1)throw Error("SASL: Only mechanism SCRAM-SHA-256 is currently supported");let _=f.randomBytes(18).toString("base64");return{mechanism:"SCRAM-SHA-256",clientNonce:_,response:"n,,n=*,r="+_,message:"SASLInitialResponse"}}function u(w,_,Q){if(w.message!=="SASLInitialResponse")throw Error("SASL: Last message was not SASLInitialResponse");if(typeof _!="string")throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a string");if(typeof Q!="string")throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: serverData must be a string");let D=E(Q);if(D.nonce.startsWith(w.clientNonce)){if(D.nonce.length===w.clientNonce.length)throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce is too short")}else throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce does not start with client nonce");var R=m(_,oe.from(D.salt,"base64"),D.iteration),X=C(R,"Client Key"),me=l(X),q="n=*,r="+w.clientNonce,W="r="+D.nonce+",s="+D.salt+",i="+D.iteration,Y="c=biws,r="+D.nonce,k=q+","+W+","+Y,V=v(X,C(me,k)).toString("base64"),pe=C(R,"Server Key"),Ie=C(pe,k);w.message="SASLResponse",w.serverSignature=Ie.toString("base64"),w.response=Y+",p="+V}function a(w,_){if(w.message!=="SASLResponse")throw Error("SASL: Last message was not SASLResponse");if(typeof _!="string")throw Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: serverData must be a string");let{serverSignature:Q}=g(_);if(Q!==w.serverSignature)throw Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature does not match")}function s(w){if(typeof w!="string")throw TypeError("SASL: text must be a string");return w.split("").map((_,Q)=>w.charCodeAt(Q)).every(_=>_>=33&&_<=43||_>=45&&_<=126)}function p(w){return/^(?:[a-zA-Z0-9+/]{4})*(?:[a-zA-Z0-9+/]{2}==|[a-zA-Z0-9+/]{3}=)?$/.test(w)}function S(w){if(typeof w!="string")throw TypeError("SASL: attribute pairs text must be a string");return new Map(w.split(",").map(_=>{if(!/^.=/.test(_))throw Error("SASL: Invalid attribute pair entry");return[_[0],_.substring(2)]}))}function E(w){let _=S(w),Q=_.get("r");if(Q){if(!s(Q))throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce must only contain printable characters")}else throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce missing");let D=_.get("s");if(D){if(!p(D))throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt must be base64")}else throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt missing");let R=_.get("i");if(R){if(!/^[1-9][0-9]*$/.test(R))throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: invalid iteration count")}else throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: iteration missing");return{nonce:Q,salt:D,iteration:parseInt(R,10)}}function g(w){let _=S(w).get("v");if(_){if(!p(_))throw Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature must be base64")}else throw Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature is missing");return{serverSignature:_}}function v(w,_){if(!oe.isBuffer(w))throw TypeError("first argument must be a Buffer");if(!oe.isBuffer(_))throw TypeError("second argument must be a Buffer");if(w.length!==_.length)throw Error("Buffer lengths must match");if(w.length===0)throw Error("Buffers cannot be empty");return oe.from(w.map((Q,D)=>w[D]^_[D]))}function l(w){return f.createHash("sha256").update(w).digest()}function C(w,_){return f.createHmac("sha256",w).update(_).digest()}function m(w,_,Q){for(var D=C(w,oe.concat([_,oe.from([0,0,0,1])])),R=D,X=0;X<Q-1;X++)R=v(R,D=C(w,D));return R}i(h,"startSession"),i(u,"continueSession"),i(a,"finalizeSession"),i(s,"isPrintableChars"),i(p,"isBase64"),i(S,"parseAttributePairs"),i(E,"parseServerFirstMessage"),i(g,"parseServerFinalMessage"),i(v,"xorBuffers"),i(l,"sha256"),i(C,"hmacSha256"),i(m,"Hi"),y.exports={startSession:h,continueSession:u,finalizeSession:a}}),gt={};function St(...A){return A.join("/")}H(gt,{join:()=>St});var sr=N(()=>{de(),i(St,"join")}),At={};function nr(A,y){y(Error("No filesystem"))}H(At,{stat:()=>nr});var Wr=N(()=>{de(),i(nr,"stat")}),wr={};H(wr,{default:()=>Kr});var Kr,Yt=N(()=>{de(),Kr={}}),Vr={};H(Vr,{StringDecoder:()=>Xt});var Gr,Xt,Si=N(()=>{de(),i(Gr=class{constructor(A){be(this,"td"),this.td=new TextDecoder(A)}write(A){return this.td.decode(A,{stream:!0})}end(A){return this.td.decode(A)}},"StringDecoder"),Xt=Gr}),Jr=j((A,y)=>{de();var{Transform:f}=(Yt(),fe(wr)),{StringDecoder:h}=(Si(),fe(Vr)),u=Symbol("last"),a=Symbol("decoder");function s(v,l,C){let m;if(this.overflow){if((m=this[a].write(v).split(this.matcher)).length===1)return C();m.shift(),this.overflow=!1}else this[u]+=this[a].write(v),m=this[u].split(this.matcher);this[u]=m.pop();for(let w=0;w<m.length;w++)try{S(this,this.mapper(m[w]))}catch(_){return C(_)}if(this.overflow=this[u].length>this.maxLength,this.overflow&&!this.skipOverflow){C(Error("maximum buffer reached"));return}C()}function p(v){if(this[u]+=this[a].end(),this[u])try{S(this,this.mapper(this[u]))}catch(l){return v(l)}v()}function S(v,l){l!==void 0&&v.push(l)}function E(v){return v}function g(v,l,C){switch(v=v||/\r?\n/,l=l||E,C=C||{},arguments.length){case 1:typeof v=="function"?(l=v,v=/\r?\n/):typeof v!="object"||v instanceof RegExp||v[Symbol.split]||(C=v,v=/\r?\n/);break;case 2:typeof v=="function"?(C=l,l=v,v=/\r?\n/):typeof l=="object"&&(C=l,l=E)}(C=Object.assign({},C)).autoDestroy=!0,C.transform=s,C.flush=p,C.readableObjectMode=!0;let m=new f(C);return m[u]="",m[a]=new h("utf8"),m.matcher=v,m.mapper=l,m.maxLength=C.maxLength,m.skipOverflow=C.skipOverflow||!1,m.overflow=!1,m._destroy=function(w,_){this._writableState.errorEmitted=!1,_(w)},m}i(s,"transform"),i(p,"flush"),i(S,"push"),i(E,"noop"),i(g,"split"),y.exports=g}),Ei=j((A,y)=>{de();var f=(sr(),fe(gt)),h=(Yt(),fe(wr)).Stream,u=Jr(),a=(J(),fe(Qe)),s=ee.platform==="win32",p=ee.stderr;function S(_){return(61440&_)==32768}i(S,"isRegFile");var E=["host","port","database","user","password"],g=E.length,v=E[g-1];function l(){if(p instanceof h&&p.writable===!0){var _=Array.prototype.slice.call(arguments).concat(`
`);p.write(a.format.apply(a,_))}}i(l,"warn"),Object.defineProperty(y.exports,"isWin",{get:function(){return s},set:function(_){s=_}}),y.exports.warnTo=function(_){var Q=p;return p=_,Q},y.exports.getFileName=function(_){var Q=_||ee.env;return Q.PGPASSFILE||(s?f.join(Q.APPDATA||"./","postgresql","pgpass.conf"):f.join(Q.HOME||"./",".pgpass"))},y.exports.usePgPass=function(_,Q){return!Object.prototype.hasOwnProperty.call(ee.env,"PGPASSWORD")&&(!!s||(Q=Q||"<unkn>",S(_.mode)?!(63&_.mode)||(l('WARNING: password file "%s" has group or world access; permissions should be u=rw (0600) or less',Q),!1):(l('WARNING: password file "%s" is not a plain file',Q),!1)))};var C=y.exports.match=function(_,Q){return E.slice(0,-1).reduce(function(D,R,X){return X==1&&Number(_[R]||5432)===Number(Q[R])?D&&!0:D&&(Q[R]==="*"||Q[R]===_[R])},!0)};y.exports.getPassword=function(_,Q,D){var R,X=Q.pipe(u());function me(Y){var k=m(Y);k&&w(k)&&C(_,k)&&(R=k[v],X.end())}i(me,"onLine");var q=i(function(){Q.destroy(),D(R)},"onEnd"),W=i(function(Y){Q.destroy(),l("WARNING: error on reading file: %s",Y),D(void 0)},"onErr");Q.on("error",W),X.on("data",me).on("end",q).on("error",W)};var m=y.exports.parseLine=function(_){if(_.length<11||_.match(/^\s+#/))return null;for(var Q="",D="",R=0,X=0,me={},q=i(function(Y,k,V){var pe=_.substring(k,V);Object.hasOwnProperty.call(ee.env,"PGPASS_NO_DEESCAPE")||(pe=pe.replace(/\\([:\\])/g,"$1")),me[E[Y]]=pe},"addToObj"),W=0;W<_.length-1;W+=1){if(Q=_.charAt(W+1),D=_.charAt(W),R==g-1){q(R,X);break}W>=0&&Q==":"&&D!=="\\"&&(q(R,X,W+1),X=W+2,R+=1)}return me=Object.keys(me).length===g?me:null},w=y.exports.isValidEntry=function(_){for(var Q={0:function(R){return R.length>0},1:function(R){return R==="*"||isFinite(R=Number(R))&&R>0&&R<9007199254740992&&Math.floor(R)===R},2:function(R){return R.length>0},3:function(R){return R.length>0},4:function(R){return R.length>0}},D=0;D<E.length;D+=1)if(!(0,Q[D])(_[E[D]]||""))return!1;return!0}}),_i=j((A,y)=>{de(),sr(),fe(gt);var f=(Wr(),fe(At)),h=Ei();y.exports=function(u,a){var s=h.getFileName();f.stat(s,function(p,S){if(p||!h.usePgPass(S,s))return a(void 0);var E=f.createReadStream(s);h.getPassword(u,E,a)})},y.exports.warnTo=h.warnTo}),Yr=j((A,y)=>{de();var f=Ht();function h(u){this._types=u||f,this.text={},this.binary={}}i(h,"TypeOverrides"),h.prototype.getOverrides=function(u){switch(u){case"text":return this.text;case"binary":return this.binary;default:return{}}},h.prototype.setTypeParser=function(u,a,s){typeof a=="function"&&(s=a,a="text"),this.getOverrides(a)[u]=s},h.prototype.getTypeParser=function(u,a){return a=a||"text",this.getOverrides(a)[u]||this._types.getTypeParser(u,a)},y.exports=h}),Xr={};H(Xr,{default:()=>Sr});var Sr,qt=N(()=>{de(),Sr={}}),Er={};function Zt(A,y=!1){let{protocol:f}=new URL(A),h="http:"+A.substring(f.length),{username:u,password:a,host:s,hostname:p,port:S,pathname:E,search:g,searchParams:v,hash:l}=new URL(h),C=u+":"+(a=decodeURIComponent(a)),m=y?Object.fromEntries(v.entries()):g;return{href:A,protocol:f,auth:C,username:u,password:a,host:s,hostname:p,port:S,pathname:E,search:g,query:m,hash:l}}H(Er,{parse:()=>Zt});var _r=N(()=>{de(),i(Zt,"parse")}),Zr=j((A,y)=>{de();var f=(_r(),fe(Er)),h=(Wr(),fe(At));function u(a){if(a.charAt(0)==="/"){var p=a.split(" ");return{host:p[0],database:p[1]}}var s=f.parse(/ |%[^a-f0-9]|%[a-f0-9][^a-f0-9]/i.test(a)?encodeURI(a).replace(/\%25(\d\d)/g,"%$1"):a,!0),p=s.query;for(var S in p)Array.isArray(p[S])&&(p[S]=p[S][p[S].length-1]);var E=(s.auth||":").split(":");if(p.user=E[0],p.password=E.splice(1).join(":"),p.port=s.port,s.protocol=="socket:")return p.host=decodeURI(s.pathname),p.database=s.query.db,p.client_encoding=s.query.encoding,p;p.host||(p.host=s.hostname);var g=s.pathname;if(!p.host&&g&&/^%2f/i.test(g)){var v=g.split("/");p.host=decodeURIComponent(v[0]),g=v.splice(1).join("/")}switch(g&&g.charAt(0)==="/"&&(g=g.slice(1)||null),p.database=g&&decodeURI(g),(p.ssl==="true"||p.ssl==="1")&&(p.ssl=!0),p.ssl==="0"&&(p.ssl=!1),(p.sslcert||p.sslkey||p.sslrootcert||p.sslmode)&&(p.ssl={}),p.sslcert&&(p.ssl.cert=h.readFileSync(p.sslcert).toString()),p.sslkey&&(p.ssl.key=h.readFileSync(p.sslkey).toString()),p.sslrootcert&&(p.ssl.ca=h.readFileSync(p.sslrootcert).toString()),p.sslmode){case"disable":p.ssl=!1;break;case"prefer":case"require":case"verify-ca":case"verify-full":break;case"no-verify":p.ssl.rejectUnauthorized=!1}return p}i(u,"parse"),y.exports=u,u.parse=u}),or=j((A,y)=>{de();var f=(qt(),fe(Xr)),h=Gt(),u=Zr().parse,a=i(function(g,v,l){return l===void 0?l=ee.env["PG"+g.toUpperCase()]:l===!1||(l=ee.env[l]),v[g]||l||h[g]},"val"),s=i(function(){switch(ee.env.PGSSLMODE){case"disable":return!1;case"prefer":case"require":case"verify-ca":case"verify-full":return!0;case"no-verify":return{rejectUnauthorized:!1}}return h.ssl},"readSSLConfigFromEnvironment"),p=i(function(g){return"'"+(""+g).replace(/\\/g,"\\\\").replace(/'/g,"\\'")+"'"},"quoteParamValue"),S=i(function(g,v,l){var C=v[l];C!=null&&g.push(l+"="+p(C))},"add"),E=class{constructor(g){(g=typeof g=="string"?u(g):g||{}).connectionString&&(g=Object.assign({},g,u(g.connectionString))),this.user=a("user",g),this.database=a("database",g),this.database===void 0&&(this.database=this.user),this.port=parseInt(a("port",g),10),this.host=a("host",g),Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:a("password",g)}),this.binary=a("binary",g),this.options=a("options",g),this.ssl=typeof g.ssl>"u"?s():g.ssl,typeof this.ssl=="string"&&this.ssl==="true"&&(this.ssl=!0),this.ssl==="no-verify"&&(this.ssl={rejectUnauthorized:!1}),this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this.client_encoding=a("client_encoding",g),this.replication=a("replication",g),this.isDomainSocket=!(this.host||"").indexOf("/"),this.application_name=a("application_name",g,"PGAPPNAME"),this.fallback_application_name=a("fallback_application_name",g,!1),this.statement_timeout=a("statement_timeout",g,!1),this.lock_timeout=a("lock_timeout",g,!1),this.idle_in_transaction_session_timeout=a("idle_in_transaction_session_timeout",g,!1),this.query_timeout=a("query_timeout",g,!1),g.connectionTimeoutMillis===void 0?this.connect_timeout=ee.env.PGCONNECT_TIMEOUT||0:this.connect_timeout=Math.floor(g.connectionTimeoutMillis/1e3),g.keepAlive===!1?this.keepalives=0:g.keepAlive===!0&&(this.keepalives=1),typeof g.keepAliveInitialDelayMillis=="number"&&(this.keepalives_idle=Math.floor(g.keepAliveInitialDelayMillis/1e3))}getLibpqConnectionString(g){var v=[];S(v,this,"user"),S(v,this,"password"),S(v,this,"port"),S(v,this,"application_name"),S(v,this,"fallback_application_name"),S(v,this,"connect_timeout"),S(v,this,"options");var l=typeof this.ssl=="object"?this.ssl:this.ssl?{sslmode:this.ssl}:{};if(S(v,l,"sslmode"),S(v,l,"sslca"),S(v,l,"sslkey"),S(v,l,"sslcert"),S(v,l,"sslrootcert"),this.database&&v.push("dbname="+p(this.database)),this.replication&&v.push("replication="+p(this.replication)),this.host&&v.push("host="+p(this.host)),this.isDomainSocket)return g(null,v.join(" "));this.client_encoding&&v.push("client_encoding="+p(this.client_encoding)),f.lookup(this.host,function(C,m){return C?g(C,null):(v.push("hostaddr="+p(m)),g(null,v.join(" ")))})}};i(E,"ConnectionParameters"),y.exports=E}),xi=j((A,y)=>{de();var f=Ht(),h=/^([A-Za-z]+)(?: (\d+))?(?: (\d+))?/,u=class{constructor(a,s){this.command=null,this.rowCount=null,this.oid=null,this.rows=[],this.fields=[],this._parsers=void 0,this._types=s,this.RowCtor=null,this.rowAsArray=a==="array",this.rowAsArray&&(this.parseRow=this._parseRowAsArray)}addCommandComplete(a){var s;(s=a.text?h.exec(a.text):h.exec(a.command))&&(this.command=s[1],s[3]?(this.oid=parseInt(s[2],10),this.rowCount=parseInt(s[3],10)):s[2]&&(this.rowCount=parseInt(s[2],10)))}_parseRowAsArray(a){for(var s=Array(a.length),p=0,S=a.length;p<S;p++){var E=a[p];E!==null?s[p]=this._parsers[p](E):s[p]=null}return s}parseRow(a){for(var s={},p=0,S=a.length;p<S;p++){var E=a[p],g=this.fields[p].name;E!==null?s[g]=this._parsers[p](E):s[g]=null}return s}addRow(a){this.rows.push(a)}addFields(a){this.fields=a,this.fields.length&&(this._parsers=Array(a.length));for(var s=0;s<a.length;s++){var p=a[s];this._types?this._parsers[s]=this._types.getTypeParser(p.dataTypeID,p.format||"text"):this._parsers[s]=f.getTypeParser(p.dataTypeID,p.format||"text")}}};i(u,"Result"),y.exports=u}),Pt=j((A,y)=>{de();var{EventEmitter:f}=dt(),h=xi(),u=Jt(),a=class extends f{constructor(s,p,S){super(),s=u.normalizeQueryConfig(s,p,S),this.text=s.text,this.values=s.values,this.rows=s.rows,this.types=s.types,this.name=s.name,this.binary=s.binary,this.portal=s.portal||"",this.callback=s.callback,this._rowMode=s.rowMode,ee.domain&&s.callback&&(this.callback=ee.domain.bind(s.callback)),this._result=new h(this._rowMode,this.types),this._results=this._result,this.isPreparedStatement=!1,this._canceledDueToError=!1,this._promise=null}requiresPreparation(){return!!this.name||!!this.rows||!!this.text&&!!this.values&&this.values.length>0}_checkForMultirow(){this._result.command&&(Array.isArray(this._results)||(this._results=[this._result]),this._result=new h(this._rowMode,this.types),this._results.push(this._result))}handleRowDescription(s){this._checkForMultirow(),this._result.addFields(s.fields),this._accumulateRows=this.callback||!this.listeners("row").length}handleDataRow(s){let p;if(!this._canceledDueToError){try{p=this._result.parseRow(s.fields)}catch(S){this._canceledDueToError=S;return}this.emit("row",p,this._result),this._accumulateRows&&this._result.addRow(p)}}handleCommandComplete(s,p){this._checkForMultirow(),this._result.addCommandComplete(s),this.rows&&p.sync()}handleEmptyQuery(s){this.rows&&s.sync()}handleError(s,p){if(this._canceledDueToError&&(s=this._canceledDueToError,this._canceledDueToError=!1),this.callback)return this.callback(s);this.emit("error",s)}handleReadyForQuery(s){if(this._canceledDueToError)return this.handleError(this._canceledDueToError,s);if(this.callback)try{this.callback(null,this._results)}catch(p){ee.nextTick(()=>{throw p})}this.emit("end",this._results)}submit(s){if(typeof this.text!="string"&&typeof this.name!="string")return Error("A query must have either text or a name. Supplying neither is unsupported.");let p=s.parsedStatements[this.name];return this.text&&p&&this.text!==p?Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`):this.values&&!Array.isArray(this.values)?Error("Query values must be an array"):(this.requiresPreparation()?this.prepare(s):s.query(this.text),null)}hasBeenParsed(s){return this.name&&s.parsedStatements[this.name]}handlePortalSuspended(s){this._getRows(s,this.rows)}_getRows(s,p){s.execute({portal:this.portal,rows:p}),p?s.flush():s.sync()}prepare(s){this.isPreparedStatement=!0,this.hasBeenParsed(s)||s.parse({text:this.text,name:this.name,types:this.types});try{s.bind({portal:this.portal,statement:this.name,values:this.values,binary:this.binary,valueMapper:u.prepareValue})}catch(p){this.handleError(p,s);return}s.describe({type:"P",name:this.portal||""}),this._getRows(s,this.rows)}handleCopyInResponse(s){s.sendCopyFail("No source stream defined")}handleCopyData(s,p){}};i(a,"Query"),y.exports=a}),ei={};function xr(A){return 0}H(ei,{Socket:()=>Wt,isIP:()=>xr});var ti,ar,Wt,lr=N(()=>{de(),ti=le(dt(),1),i(xr,"isIP"),i(ar=class Pe extends ti.EventEmitter{constructor(){super(...arguments),be(this,"opts",{}),be(this,"connecting",!1),be(this,"pending",!0),be(this,"writable",!0),be(this,"encrypted",!1),be(this,"authorized",!1),be(this,"destroyed",!1),be(this,"ws",null),be(this,"writeBuffer"),be(this,"tlsState",0),be(this,"tlsRead"),be(this,"tlsWrite")}static get poolQueryViaFetch(){return Pe.opts.poolQueryViaFetch??Pe.defaults.poolQueryViaFetch}static set poolQueryViaFetch(y){Pe.opts.poolQueryViaFetch=y}static get fetchEndpoint(){return Pe.opts.fetchEndpoint??Pe.defaults.fetchEndpoint}static set fetchEndpoint(y){Pe.opts.fetchEndpoint=y}static get fetchConnectionCache(){return Pe.opts.fetchConnectionCache??Pe.defaults.fetchConnectionCache}static set fetchConnectionCache(y){Pe.opts.fetchConnectionCache=y}static get fetchFunction(){return Pe.opts.fetchFunction??Pe.defaults.fetchFunction}static set fetchFunction(y){Pe.opts.fetchFunction=y}static get webSocketConstructor(){return Pe.opts.webSocketConstructor??Pe.defaults.webSocketConstructor}static set webSocketConstructor(y){Pe.opts.webSocketConstructor=y}get webSocketConstructor(){return this.opts.webSocketConstructor??Pe.webSocketConstructor}set webSocketConstructor(y){this.opts.webSocketConstructor=y}static get wsProxy(){return Pe.opts.wsProxy??Pe.defaults.wsProxy}static set wsProxy(y){Pe.opts.wsProxy=y}get wsProxy(){return this.opts.wsProxy??Pe.wsProxy}set wsProxy(y){this.opts.wsProxy=y}static get coalesceWrites(){return Pe.opts.coalesceWrites??Pe.defaults.coalesceWrites}static set coalesceWrites(y){Pe.opts.coalesceWrites=y}get coalesceWrites(){return this.opts.coalesceWrites??Pe.coalesceWrites}set coalesceWrites(y){this.opts.coalesceWrites=y}static get useSecureWebSocket(){return Pe.opts.useSecureWebSocket??Pe.defaults.useSecureWebSocket}static set useSecureWebSocket(y){Pe.opts.useSecureWebSocket=y}get useSecureWebSocket(){return this.opts.useSecureWebSocket??Pe.useSecureWebSocket}set useSecureWebSocket(y){this.opts.useSecureWebSocket=y}static get forceDisablePgSSL(){return Pe.opts.forceDisablePgSSL??Pe.defaults.forceDisablePgSSL}static set forceDisablePgSSL(y){Pe.opts.forceDisablePgSSL=y}get forceDisablePgSSL(){return this.opts.forceDisablePgSSL??Pe.forceDisablePgSSL}set forceDisablePgSSL(y){this.opts.forceDisablePgSSL=y}static get disableSNI(){return Pe.opts.disableSNI??Pe.defaults.disableSNI}static set disableSNI(y){Pe.opts.disableSNI=y}get disableSNI(){return this.opts.disableSNI??Pe.disableSNI}set disableSNI(y){this.opts.disableSNI=y}static get pipelineConnect(){return Pe.opts.pipelineConnect??Pe.defaults.pipelineConnect}static set pipelineConnect(y){Pe.opts.pipelineConnect=y}get pipelineConnect(){return this.opts.pipelineConnect??Pe.pipelineConnect}set pipelineConnect(y){this.opts.pipelineConnect=y}static get subtls(){return Pe.opts.subtls??Pe.defaults.subtls}static set subtls(y){Pe.opts.subtls=y}get subtls(){return this.opts.subtls??Pe.subtls}set subtls(y){this.opts.subtls=y}static get pipelineTLS(){return Pe.opts.pipelineTLS??Pe.defaults.pipelineTLS}static set pipelineTLS(y){Pe.opts.pipelineTLS=y}get pipelineTLS(){return this.opts.pipelineTLS??Pe.pipelineTLS}set pipelineTLS(y){this.opts.pipelineTLS=y}static get rootCerts(){return Pe.opts.rootCerts??Pe.defaults.rootCerts}static set rootCerts(y){Pe.opts.rootCerts=y}get rootCerts(){return this.opts.rootCerts??Pe.rootCerts}set rootCerts(y){this.opts.rootCerts=y}wsProxyAddrForHost(y,f){let h=this.wsProxy;if(h===void 0)throw Error("No WebSocket proxy is configured. Please refer to https://github.com/neondatabase/serverless#run-your-own-websocket-proxy");return typeof h=="function"?h(y,f):`${h}?address=${y}:${f}`}setNoDelay(){return this}setKeepAlive(){return this}ref(){return this}unref(){return this}async connect(y,f,h){let u;this.connecting=!0,h&&this.once("connect",h);try{u=this.wsProxyAddrForHost(f,typeof y=="string"?parseInt(y,10):y)}catch(a){this.emit("error",a),this.emit("close");return}return this.ws=await new Promise(async a=>{try{let s=(this.useSecureWebSocket?"wss:":"ws:")+"//"+u,p;if(this.webSocketConstructor!==void 0)p=new this.webSocketConstructor(s);else try{p=new WebSocket(s)}catch{p=new __unstable_WebSocket(s)}p.addEventListener("open",()=>{a(p)})}catch(s){try{let p=(this.useSecureWebSocket?"https:":"http:")+"//"+u;await fetch(p,{headers:{Upgrade:"websocket"}}).then(S=>{let E=S.webSocket;if(E==null)throw s;E.accept(),a(E)})}catch{this.emit("error",Error("All attempts to open a WebSocket to connect to the database failed. Please refer to https://github.com/neondatabase/serverless#run-on-node")),this.emit("close");return}}}),this.ws.binaryType="arraybuffer",this.ws.addEventListener("error",a=>{this.emit("error",a),this.emit("close")}),this.ws.addEventListener("close",()=>{this.emit("close")}),this.ws.addEventListener("message",a=>{if(this.tlsState===0){let s=oe.from(a.data);this.emit("data",s)}}),this.connecting=!1,this.pending=!1,this.emit("connect"),this.emit("ready"),this}async startTls(y){if(this.subtls===void 0)throw Error("For Postgres SSL connections, you must set `neonConfig.subtls` to the subtls library. See https://github.com/neondatabase/serverless/blob/main/CONFIG.md for more information.");this.tlsState=1;let f=this.subtls.TrustedCert.fromPEM(this.rootCerts),h=new this.subtls.WebSocketReadQueue(this.ws),u=h.read.bind(h),a=this.rawWrite.bind(this),[s,p]=await this.subtls.startTls(y,f,u,a,{useSNI:!this.disableSNI,expectPreData:this.pipelineTLS?new Uint8Array([83]):void 0});this.tlsRead=s,this.tlsWrite=p,this.tlsState=2,this.encrypted=!0,this.authorized=!0,this.emit("secureConnection",this),this.tlsReadLoop()}async tlsReadLoop(){for(;;){let y=await this.tlsRead();if(y===void 0)break;{let f=oe.from(y);this.emit("data",f)}}}rawWrite(y){if(!this.coalesceWrites){this.ws.send(y);return}if(this.writeBuffer===void 0)this.writeBuffer=y,setTimeout(()=>{this.ws.send(this.writeBuffer),this.writeBuffer=void 0},0);else{let f=new Uint8Array(this.writeBuffer.length+y.length);f.set(this.writeBuffer),f.set(y,this.writeBuffer.length),this.writeBuffer=f}}write(y,f="utf8",h=u=>{}){return y.length===0?h():(typeof y=="string"&&(y=oe.from(y,f)),this.tlsState===0?this.rawWrite(y):this.tlsState===1?this.once("secureConnection",()=>this.write(y,f,h)):this.tlsWrite(y),!0)}end(y=oe.alloc(0),f="utf8",h){return this.write(y,f,()=>{this.ws.close(),h&&h()}),this}destroy(){return this.destroyed=!0,this.end()}},"Socket"),be(ar,"defaults",{poolQueryViaFetch:!1,fetchEndpoint:A=>"https://"+A+"/sql",fetchConnectionCache:!1,fetchFunction:void 0,webSocketConstructor:void 0,wsProxy:A=>A+"/v2",useSecureWebSocket:!0,forceDisablePgSSL:!0,coalesceWrites:!0,pipelineConnect:"password",subtls:void 0,rootCerts:"",pipelineTLS:!1,disableSNI:!1}),be(ar,"opts",{}),Wt=ar}),ri=j(A=>{de(),Object.defineProperty(A,"__esModule",{value:!0}),A.NoticeMessage=A.DataRowMessage=A.CommandCompleteMessage=A.ReadyForQueryMessage=A.NotificationResponseMessage=A.BackendKeyDataMessage=A.AuthenticationMD5Password=A.ParameterStatusMessage=A.ParameterDescriptionMessage=A.RowDescriptionMessage=A.Field=A.CopyResponse=A.CopyDataMessage=A.DatabaseError=A.copyDone=A.emptyQuery=A.replicationStart=A.portalSuspended=A.noData=A.closeComplete=A.bindComplete=A.parseComplete=void 0,A.parseComplete={name:"parseComplete",length:5},A.bindComplete={name:"bindComplete",length:5},A.closeComplete={name:"closeComplete",length:5},A.noData={name:"noData",length:5},A.portalSuspended={name:"portalSuspended",length:5},A.replicationStart={name:"replicationStart",length:4},A.emptyQuery={name:"emptyQuery",length:4},A.copyDone={name:"copyDone",length:4};var y=class extends Error{constructor(w,_,Q){super(w),this.length=_,this.name=Q}};i(y,"DatabaseError"),A.DatabaseError=y;var f=class{constructor(w,_){this.length=w,this.chunk=_,this.name="copyData"}};i(f,"CopyDataMessage"),A.CopyDataMessage=f;var h=class{constructor(w,_,Q,D){this.length=w,this.name=_,this.binary=Q,this.columnTypes=Array(D)}};i(h,"CopyResponse"),A.CopyResponse=h;var u=class{constructor(w,_,Q,D,R,X,me){this.name=w,this.tableID=_,this.columnID=Q,this.dataTypeID=D,this.dataTypeSize=R,this.dataTypeModifier=X,this.format=me}};i(u,"Field"),A.Field=u;var a=class{constructor(w,_){this.length=w,this.fieldCount=_,this.name="rowDescription",this.fields=Array(this.fieldCount)}};i(a,"RowDescriptionMessage"),A.RowDescriptionMessage=a;var s=class{constructor(w,_){this.length=w,this.parameterCount=_,this.name="parameterDescription",this.dataTypeIDs=Array(this.parameterCount)}};i(s,"ParameterDescriptionMessage"),A.ParameterDescriptionMessage=s;var p=class{constructor(w,_,Q){this.length=w,this.parameterName=_,this.parameterValue=Q,this.name="parameterStatus"}};i(p,"ParameterStatusMessage"),A.ParameterStatusMessage=p;var S=class{constructor(w,_){this.length=w,this.salt=_,this.name="authenticationMD5Password"}};i(S,"AuthenticationMD5Password"),A.AuthenticationMD5Password=S;var E=class{constructor(w,_,Q){this.length=w,this.processID=_,this.secretKey=Q,this.name="backendKeyData"}};i(E,"BackendKeyDataMessage"),A.BackendKeyDataMessage=E;var g=class{constructor(w,_,Q,D){this.length=w,this.processId=_,this.channel=Q,this.payload=D,this.name="notification"}};i(g,"NotificationResponseMessage"),A.NotificationResponseMessage=g;var v=class{constructor(w,_){this.length=w,this.status=_,this.name="readyForQuery"}};i(v,"ReadyForQueryMessage"),A.ReadyForQueryMessage=v;var l=class{constructor(w,_){this.length=w,this.text=_,this.name="commandComplete"}};i(l,"CommandCompleteMessage"),A.CommandCompleteMessage=l;var C=class{constructor(w,_){this.length=w,this.fields=_,this.name="dataRow",this.fieldCount=_.length}};i(C,"DataRowMessage"),A.DataRowMessage=C;var m=class{constructor(w,_){this.length=w,this.message=_,this.name="notice"}};i(m,"NoticeMessage"),A.NoticeMessage=m}),ie=j(A=>{de(),Object.defineProperty(A,"__esModule",{value:!0}),A.Writer=void 0;var y=class{constructor(f=256){this.size=f,this.offset=5,this.headerPosition=0,this.buffer=oe.allocUnsafe(f)}ensure(f){if(this.buffer.length-this.offset<f){var h=this.buffer,u=h.length+(h.length>>1)+f;this.buffer=oe.allocUnsafe(u),h.copy(this.buffer)}}addInt32(f){return this.ensure(4),this.buffer[this.offset++]=f>>>24&255,this.buffer[this.offset++]=f>>>16&255,this.buffer[this.offset++]=f>>>8&255,this.buffer[this.offset++]=f>>>0&255,this}addInt16(f){return this.ensure(2),this.buffer[this.offset++]=f>>>8&255,this.buffer[this.offset++]=f>>>0&255,this}addCString(f){if(f){var h=oe.byteLength(f);this.ensure(h+1),this.buffer.write(f,this.offset,"utf-8"),this.offset+=h}else this.ensure(1);return this.buffer[this.offset++]=0,this}addString(f=""){var h=oe.byteLength(f);return this.ensure(h),this.buffer.write(f,this.offset),this.offset+=h,this}add(f){return this.ensure(f.length),f.copy(this.buffer,this.offset),this.offset+=f.length,this}join(f){if(f){this.buffer[this.headerPosition]=f;let h=this.offset-(this.headerPosition+1);this.buffer.writeInt32BE(h,this.headerPosition+1)}return this.buffer.slice(f?0:5,this.offset)}flush(f){var h=this.join(f);return this.offset=5,this.headerPosition=0,this.buffer=oe.allocUnsafe(this.size),h}};i(y,"Writer"),A.Writer=y}),se=j(A=>{de(),Object.defineProperty(A,"__esModule",{value:!0}),A.serialize=void 0;var y=ie(),f=new y.Writer,h=i(ne=>{for(let $e of(f.addInt16(3).addInt16(0),Object.keys(ne)))f.addCString($e).addCString(ne[$e]);f.addCString("client_encoding").addCString("UTF8");var De=f.addCString("").flush(),Be=De.length+4;return new y.Writer().addInt32(Be).add(De).flush()},"startup"),u=i(()=>{let ne=oe.allocUnsafe(8);return ne.writeInt32BE(8,0),ne.writeInt32BE(80877103,4),ne},"requestSsl"),a=i(ne=>f.addCString(ne).flush(112),"password"),s=i(function(ne,De){return f.addCString(ne).addInt32(oe.byteLength(De)).addString(De),f.flush(112)},"sendSASLInitialResponseMessage"),p=i(function(ne){return f.addString(ne).flush(112)},"sendSCRAMClientFinalMessage"),S=i(ne=>f.addCString(ne).flush(81),"query"),E=[],g=i(ne=>{let De=ne.name||"";De.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",De,De.length),console.error("This can cause conflicts and silent errors executing queries"));let Be=ne.types||E;for(var $e=Be.length,et=f.addCString(De).addCString(ne.text).addInt16($e),ze=0;ze<$e;ze++)et.addInt32(Be[ze]);return f.flush(80)},"parse"),v=new y.Writer,l=i(function(ne,De){for(let Be=0;Be<ne.length;Be++){let $e=De?De(ne[Be],Be):ne[Be];$e==null?(f.addInt16(0),v.addInt32(-1)):$e instanceof oe?(f.addInt16(1),v.addInt32($e.length),v.add($e)):(f.addInt16(0),v.addInt32(oe.byteLength($e)),v.addString($e))}},"writeValues"),C=i((ne={})=>{let De=ne.portal||"",Be=ne.statement||"",$e=ne.binary||!1,et=ne.values||E,ze=et.length;return f.addCString(De).addCString(Be),f.addInt16(ze),l(et,ne.valueMapper),f.addInt16(ze),f.add(v.flush()),f.addInt16($e?1:0),f.flush(66)},"bind"),m=oe.from([69,0,0,0,9,0,0,0,0,0]),w=i(ne=>{if(!ne||!ne.portal&&!ne.rows)return m;let De=ne.portal||"",Be=ne.rows||0,$e=oe.byteLength(De),et=4+$e+1+4,ze=oe.allocUnsafe(1+et);return ze[0]=69,ze.writeInt32BE(et,1),ze.write(De,5,"utf-8"),ze[$e+5]=0,ze.writeUInt32BE(Be,ze.length-4),ze},"execute"),_=i((ne,De)=>{let Be=oe.allocUnsafe(16);return Be.writeInt32BE(16,0),Be.writeInt16BE(1234,4),Be.writeInt16BE(5678,6),Be.writeInt32BE(ne,8),Be.writeInt32BE(De,12),Be},"cancel"),Q=i((ne,De)=>{let Be=4+oe.byteLength(De)+1,$e=oe.allocUnsafe(1+Be);return $e[0]=ne,$e.writeInt32BE(Be,1),$e.write(De,5,"utf-8"),$e[Be]=0,$e},"cstringMessage"),D=f.addCString("P").flush(68),R=f.addCString("S").flush(68),X=i(ne=>ne.name?Q(68,`${ne.type}${ne.name||""}`):ne.type==="P"?D:R,"describe"),me=i(ne=>Q(67,`${ne.type}${ne.name||""}`),"close"),q=i(ne=>f.add(ne).flush(100),"copyData"),W=i(ne=>Q(102,ne),"copyFail"),Y=i(ne=>oe.from([ne,0,0,0,4]),"codeOnlyBuffer"),k=Y(72),V=Y(83),pe=Y(88),Ie=Y(99);A.serialize={startup:h,password:a,requestSsl:u,sendSASLInitialResponseMessage:s,sendSCRAMClientFinalMessage:p,query:S,parse:g,bind:C,execute:w,describe:X,close:me,flush:()=>k,sync:()=>V,end:()=>pe,copyData:q,copyDone:()=>Ie,copyFail:W,cancel:_}}),kt=j(A=>{de(),Object.defineProperty(A,"__esModule",{value:!0}),A.BufferReader=void 0;var y=oe.allocUnsafe(0),f=class{constructor(h=0){this.offset=h,this.buffer=y,this.encoding="utf-8"}setBuffer(h,u){this.offset=h,this.buffer=u}int16(){let h=this.buffer.readInt16BE(this.offset);return this.offset+=2,h}byte(){let h=this.buffer[this.offset];return this.offset++,h}int32(){let h=this.buffer.readInt32BE(this.offset);return this.offset+=4,h}string(h){let u=this.buffer.toString(this.encoding,this.offset,this.offset+h);return this.offset+=h,u}cstring(){let h=this.offset,u=h;for(;this.buffer[u++]!==0;);return this.offset=u,this.buffer.toString(this.encoding,h,u-1)}bytes(h){let u=this.buffer.slice(this.offset,this.offset+h);return this.offset+=h,u}};i(f,"BufferReader"),A.BufferReader=f}),Cr={};H(Cr,{default:()=>ii});var ii,si=N(()=>{de(),ii={}}),ni=j(A=>{de();var y=A&&A.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(A,"__esModule",{value:!0}),A.Parser=void 0;var f=ri(),h=kt(),u=y((si(),fe(Cr))),a=oe.allocUnsafe(0),s=class{constructor(p){if(this.buffer=a,this.bufferLength=0,this.bufferOffset=0,this.reader=new h.BufferReader,p?.mode==="binary")throw Error("Binary mode not supported yet");this.mode=p?.mode||"text"}parse(p,S){this.mergeBuffer(p);let E=this.bufferOffset+this.bufferLength,g=this.bufferOffset;for(;g+5<=E;){let v=this.buffer[g],l=this.buffer.readUInt32BE(g+1),C=1+l;if(C+g<=E)S(this.handlePacket(g+5,v,l,this.buffer)),g+=C;else break}g===E?(this.buffer=a,this.bufferLength=0,this.bufferOffset=0):(this.bufferLength=E-g,this.bufferOffset=g)}mergeBuffer(p){if(this.bufferLength>0){let S=this.bufferLength+p.byteLength;if(S+this.bufferOffset>this.buffer.byteLength){let E;if(S<=this.buffer.byteLength&&this.bufferOffset>=this.bufferLength)E=this.buffer;else{let g=2*this.buffer.byteLength;for(;S>=g;)g*=2;E=oe.allocUnsafe(g)}this.buffer.copy(E,0,this.bufferOffset,this.bufferOffset+this.bufferLength),this.buffer=E,this.bufferOffset=0}p.copy(this.buffer,this.bufferOffset+this.bufferLength),this.bufferLength=S}else this.buffer=p,this.bufferOffset=0,this.bufferLength=p.byteLength}handlePacket(p,S,E,g){switch(S){case 50:return f.bindComplete;case 49:return f.parseComplete;case 51:return f.closeComplete;case 110:return f.noData;case 115:return f.portalSuspended;case 99:return f.copyDone;case 87:return f.replicationStart;case 73:return f.emptyQuery;case 68:return this.parseDataRowMessage(p,E,g);case 67:return this.parseCommandCompleteMessage(p,E,g);case 90:return this.parseReadyForQueryMessage(p,E,g);case 65:return this.parseNotificationMessage(p,E,g);case 82:return this.parseAuthenticationResponse(p,E,g);case 83:return this.parseParameterStatusMessage(p,E,g);case 75:return this.parseBackendKeyData(p,E,g);case 69:return this.parseErrorMessage(p,E,g,"error");case 78:return this.parseErrorMessage(p,E,g,"notice");case 84:return this.parseRowDescriptionMessage(p,E,g);case 116:return this.parseParameterDescriptionMessage(p,E,g);case 71:return this.parseCopyInMessage(p,E,g);case 72:return this.parseCopyOutMessage(p,E,g);case 100:return this.parseCopyData(p,E,g);default:u.default.fail(`unknown message code: ${S.toString(16)}`)}}parseReadyForQueryMessage(p,S,E){this.reader.setBuffer(p,E);let g=this.reader.string(1);return new f.ReadyForQueryMessage(S,g)}parseCommandCompleteMessage(p,S,E){this.reader.setBuffer(p,E);let g=this.reader.cstring();return new f.CommandCompleteMessage(S,g)}parseCopyData(p,S,E){let g=E.slice(p,p+(S-4));return new f.CopyDataMessage(S,g)}parseCopyInMessage(p,S,E){return this.parseCopyMessage(p,S,E,"copyInResponse")}parseCopyOutMessage(p,S,E){return this.parseCopyMessage(p,S,E,"copyOutResponse")}parseCopyMessage(p,S,E,g){this.reader.setBuffer(p,E);let v=this.reader.byte()!==0,l=this.reader.int16(),C=new f.CopyResponse(S,g,v,l);for(let m=0;m<l;m++)C.columnTypes[m]=this.reader.int16();return C}parseNotificationMessage(p,S,E){this.reader.setBuffer(p,E);let g=this.reader.int32(),v=this.reader.cstring(),l=this.reader.cstring();return new f.NotificationResponseMessage(S,g,v,l)}parseRowDescriptionMessage(p,S,E){this.reader.setBuffer(p,E);let g=this.reader.int16(),v=new f.RowDescriptionMessage(S,g);for(let l=0;l<g;l++)v.fields[l]=this.parseField();return v}parseField(){let p=this.reader.cstring(),S=this.reader.int32(),E=this.reader.int16(),g=this.reader.int32(),v=this.reader.int16(),l=this.reader.int32(),C=this.reader.int16()===0?"text":"binary";return new f.Field(p,S,E,g,v,l,C)}parseParameterDescriptionMessage(p,S,E){this.reader.setBuffer(p,E);let g=this.reader.int16(),v=new f.ParameterDescriptionMessage(S,g);for(let l=0;l<g;l++)v.dataTypeIDs[l]=this.reader.int32();return v}parseDataRowMessage(p,S,E){this.reader.setBuffer(p,E);let g=this.reader.int16(),v=Array(g);for(let l=0;l<g;l++){let C=this.reader.int32();v[l]=C===-1?null:this.reader.string(C)}return new f.DataRowMessage(S,v)}parseParameterStatusMessage(p,S,E){this.reader.setBuffer(p,E);let g=this.reader.cstring(),v=this.reader.cstring();return new f.ParameterStatusMessage(S,g,v)}parseBackendKeyData(p,S,E){this.reader.setBuffer(p,E);let g=this.reader.int32(),v=this.reader.int32();return new f.BackendKeyDataMessage(S,g,v)}parseAuthenticationResponse(p,S,E){this.reader.setBuffer(p,E);let g=this.reader.int32(),v={name:"authenticationOk",length:S};switch(g){case 0:break;case 3:v.length===8&&(v.name="authenticationCleartextPassword");break;case 5:if(v.length===12){v.name="authenticationMD5Password";let C=this.reader.bytes(4);return new f.AuthenticationMD5Password(S,C)}break;case 10:let l;v.name="authenticationSASL",v.mechanisms=[];do(l=this.reader.cstring())&&v.mechanisms.push(l);while(l);break;case 11:v.name="authenticationSASLContinue",v.data=this.reader.string(S-8);break;case 12:v.name="authenticationSASLFinal",v.data=this.reader.string(S-8);break;default:throw Error("Unknown authenticationOk message type "+g)}return v}parseErrorMessage(p,S,E,g){this.reader.setBuffer(p,E);let v={},l=this.reader.string(1);for(;l!=="\0";)v[l]=this.reader.cstring(),l=this.reader.string(1);let C=v.M,m=g==="notice"?new f.NoticeMessage(S,C):new f.DatabaseError(C,S,g);return m.severity=v.S,m.code=v.C,m.detail=v.D,m.hint=v.H,m.position=v.P,m.internalPosition=v.p,m.internalQuery=v.q,m.where=v.W,m.schema=v.s,m.table=v.t,m.column=v.c,m.dataType=v.d,m.constraint=v.n,m.file=v.F,m.line=v.L,m.routine=v.R,m}};i(s,"Parser"),A.Parser=s}),Ar=j(A=>{de(),Object.defineProperty(A,"__esModule",{value:!0}),A.DatabaseError=A.serialize=A.parse=void 0;var y=ri();Object.defineProperty(A,"DatabaseError",{enumerable:!0,get:function(){return y.DatabaseError}});var f=se();Object.defineProperty(A,"serialize",{enumerable:!0,get:function(){return f.serialize}});var h=ni();function u(a,s){let p=new h.Parser;return a.on("data",S=>p.parse(S,s)),new Promise(S=>a.on("end",()=>S()))}i(u,"parse"),A.parse=u}),Pr={};function Tr({socket:A,servername:y}){return A.startTls(y),A}H(Pr,{connect:()=>Tr});var xe=N(()=>{de(),i(Tr,"connect")}),ur=j((A,y)=>{de();var f=(lr(),fe(ei)),h=dt().EventEmitter,{parse:u,serialize:a}=Ar(),s=a.flush(),p=a.sync(),S=a.end(),E=class extends h{constructor(g){super(),g=g||{},this.stream=g.stream||new f.Socket,this._keepAlive=g.keepAlive,this._keepAliveInitialDelayMillis=g.keepAliveInitialDelayMillis,this.lastBuffer=!1,this.parsedStatements={},this.ssl=g.ssl||!1,this._ending=!1,this._emitMessage=!1;var v=this;this.on("newListener",function(l){l==="message"&&(v._emitMessage=!0)})}connect(g,v){var l=this;this._connecting=!0,this.stream.setNoDelay(!0),this.stream.connect(g,v),this.stream.once("connect",function(){l._keepAlive&&l.stream.setKeepAlive(!0,l._keepAliveInitialDelayMillis),l.emit("connect")});let C=i(function(m){l._ending&&(m.code==="ECONNRESET"||m.code==="EPIPE")||l.emit("error",m)},"reportStreamError");if(this.stream.on("error",C),this.stream.on("close",function(){l.emit("end")}),!this.ssl)return this.attachListeners(this.stream);this.stream.once("data",function(m){switch(m.toString("utf8")){case"S":break;case"N":return l.stream.end(),l.emit("error",Error("The server does not support SSL connections"));default:return l.stream.end(),l.emit("error",Error("There was an error establishing an SSL connection"))}var w=(xe(),fe(Pr));let _={socket:l.stream};l.ssl!==!0&&(Object.assign(_,l.ssl),"key"in l.ssl&&(_.key=l.ssl.key)),f.isIP(v)===0&&(_.servername=v);try{l.stream=w.connect(_)}catch(Q){return l.emit("error",Q)}l.attachListeners(l.stream),l.stream.on("error",C),l.emit("sslconnect")})}attachListeners(g){g.on("end",()=>{this.emit("end")}),u(g,v=>{var l=v.name==="error"?"errorMessage":v.name;this._emitMessage&&this.emit("message",v),this.emit(l,v)})}requestSsl(){this.stream.write(a.requestSsl())}startup(g){this.stream.write(a.startup(g))}cancel(g,v){this._send(a.cancel(g,v))}password(g){this._send(a.password(g))}sendSASLInitialResponseMessage(g,v){this._send(a.sendSASLInitialResponseMessage(g,v))}sendSCRAMClientFinalMessage(g){this._send(a.sendSCRAMClientFinalMessage(g))}_send(g){return!!this.stream.writable&&this.stream.write(g)}query(g){this._send(a.query(g))}parse(g){this._send(a.parse(g))}bind(g){this._send(a.bind(g))}execute(g){this._send(a.execute(g))}flush(){this.stream.writable&&this.stream.write(s)}sync(){this._ending=!0,this._send(s),this._send(p)}ref(){this.stream.ref()}unref(){this.stream.unref()}end(){if(this._ending=!0,!this._connecting||!this.stream.writable){this.stream.end();return}return this.stream.write(S,()=>{this.stream.end()})}close(g){this._send(a.close(g))}describe(g){this._send(a.describe(g))}sendCopyFromChunk(g){this._send(a.copyData(g))}endCopyFrom(){this._send(a.copyDone())}sendCopyFail(g){this._send(a.copyFail(g))}};i(E,"Connection"),y.exports=E}),Et=j((A,y)=>{de();var f=dt().EventEmitter,h=(J(),fe(Qe),Jt()),u=Hr(),a=_i(),s=Yr(),p=or(),S=Pt(),E=Gt(),g=ur(),v=class extends f{constructor(l){super(),this.connectionParameters=new p(l),this.user=this.connectionParameters.user,this.database=this.connectionParameters.database,this.port=this.connectionParameters.port,this.host=this.connectionParameters.host,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:this.connectionParameters.password}),this.replication=this.connectionParameters.replication;var C=l||{};this._Promise=C.Promise||We.Promise,this._types=new s(C.types),this._ending=!1,this._connecting=!1,this._connected=!1,this._connectionError=!1,this._queryable=!0,this.connection=C.connection||new g({stream:C.stream,ssl:this.connectionParameters.ssl,keepAlive:C.keepAlive||!1,keepAliveInitialDelayMillis:C.keepAliveInitialDelayMillis||0,encoding:this.connectionParameters.client_encoding||"utf8"}),this.queryQueue=[],this.binary=C.binary||E.binary,this.processID=null,this.secretKey=null,this.ssl=this.connectionParameters.ssl||!1,this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this._connectionTimeoutMillis=C.connectionTimeoutMillis||0}_errorAllQueries(l){let C=i(m=>{ee.nextTick(()=>{m.handleError(l,this.connection)})},"enqueueError");this.activeQuery&&(C(this.activeQuery),this.activeQuery=null),this.queryQueue.forEach(C),this.queryQueue.length=0}_connect(l){var C=this,m=this.connection;if(this._connectionCallback=l,this._connecting||this._connected){let w=Error("Client has already been connected. You cannot reuse a client.");ee.nextTick(()=>{l(w)});return}this._connecting=!0,this.connectionTimeoutHandle,this._connectionTimeoutMillis>0&&(this.connectionTimeoutHandle=setTimeout(()=>{m._ending=!0,m.stream.destroy(Error("timeout expired"))},this._connectionTimeoutMillis)),this.host&&this.host.indexOf("/")===0?m.connect(this.host+"/.s.PGSQL."+this.port):m.connect(this.port,this.host),m.on("connect",function(){C.ssl?m.requestSsl():m.startup(C.getStartupConf())}),m.on("sslconnect",function(){m.startup(C.getStartupConf())}),this._attachListeners(m),m.once("end",()=>{let w=this._ending?Error("Connection terminated"):Error("Connection terminated unexpectedly");clearTimeout(this.connectionTimeoutHandle),this._errorAllQueries(w),this._ending||(this._connecting&&!this._connectionError?this._connectionCallback?this._connectionCallback(w):this._handleErrorEvent(w):this._connectionError||this._handleErrorEvent(w)),ee.nextTick(()=>{this.emit("end")})})}connect(l){if(l){this._connect(l);return}return new this._Promise((C,m)=>{this._connect(w=>{w?m(w):C()})})}_attachListeners(l){l.on("authenticationCleartextPassword",this._handleAuthCleartextPassword.bind(this)),l.on("authenticationMD5Password",this._handleAuthMD5Password.bind(this)),l.on("authenticationSASL",this._handleAuthSASL.bind(this)),l.on("authenticationSASLContinue",this._handleAuthSASLContinue.bind(this)),l.on("authenticationSASLFinal",this._handleAuthSASLFinal.bind(this)),l.on("backendKeyData",this._handleBackendKeyData.bind(this)),l.on("error",this._handleErrorEvent.bind(this)),l.on("errorMessage",this._handleErrorMessage.bind(this)),l.on("readyForQuery",this._handleReadyForQuery.bind(this)),l.on("notice",this._handleNotice.bind(this)),l.on("rowDescription",this._handleRowDescription.bind(this)),l.on("dataRow",this._handleDataRow.bind(this)),l.on("portalSuspended",this._handlePortalSuspended.bind(this)),l.on("emptyQuery",this._handleEmptyQuery.bind(this)),l.on("commandComplete",this._handleCommandComplete.bind(this)),l.on("parseComplete",this._handleParseComplete.bind(this)),l.on("copyInResponse",this._handleCopyInResponse.bind(this)),l.on("copyData",this._handleCopyData.bind(this)),l.on("notification",this._handleNotification.bind(this))}_checkPgPass(l){let C=this.connection;typeof this.password=="function"?this._Promise.resolve().then(()=>this.password()).then(m=>{if(m!==void 0){if(typeof m!="string"){C.emit("error",TypeError("Password must be a string"));return}this.connectionParameters.password=this.password=m}else this.connectionParameters.password=this.password=null;l()}).catch(m=>{C.emit("error",m)}):this.password!==null?l():a(this.connectionParameters,m=>{m!==void 0&&(this.connectionParameters.password=this.password=m),l()})}_handleAuthCleartextPassword(l){this._checkPgPass(()=>{this.connection.password(this.password)})}_handleAuthMD5Password(l){this._checkPgPass(()=>{let C=h.postgresMd5PasswordHash(this.user,this.password,l.salt);this.connection.password(C)})}_handleAuthSASL(l){this._checkPgPass(()=>{this.saslSession=u.startSession(l.mechanisms),this.connection.sendSASLInitialResponseMessage(this.saslSession.mechanism,this.saslSession.response)})}_handleAuthSASLContinue(l){u.continueSession(this.saslSession,this.password,l.data),this.connection.sendSCRAMClientFinalMessage(this.saslSession.response)}_handleAuthSASLFinal(l){u.finalizeSession(this.saslSession,l.data),this.saslSession=null}_handleBackendKeyData(l){this.processID=l.processID,this.secretKey=l.secretKey}_handleReadyForQuery(l){this._connecting&&(this._connecting=!1,this._connected=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback&&(this._connectionCallback(null,this),this._connectionCallback=null),this.emit("connect"));let{activeQuery:C}=this;this.activeQuery=null,this.readyForQuery=!0,C&&C.handleReadyForQuery(this.connection),this._pulseQueryQueue()}_handleErrorWhileConnecting(l){if(!this._connectionError){if(this._connectionError=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback)return this._connectionCallback(l);this.emit("error",l)}}_handleErrorEvent(l){if(this._connecting)return this._handleErrorWhileConnecting(l);this._queryable=!1,this._errorAllQueries(l),this.emit("error",l)}_handleErrorMessage(l){if(this._connecting)return this._handleErrorWhileConnecting(l);let C=this.activeQuery;if(!C){this._handleErrorEvent(l);return}this.activeQuery=null,C.handleError(l,this.connection)}_handleRowDescription(l){this.activeQuery.handleRowDescription(l)}_handleDataRow(l){this.activeQuery.handleDataRow(l)}_handlePortalSuspended(l){this.activeQuery.handlePortalSuspended(this.connection)}_handleEmptyQuery(l){this.activeQuery.handleEmptyQuery(this.connection)}_handleCommandComplete(l){this.activeQuery.handleCommandComplete(l,this.connection)}_handleParseComplete(l){this.activeQuery.name&&(this.connection.parsedStatements[this.activeQuery.name]=this.activeQuery.text)}_handleCopyInResponse(l){this.activeQuery.handleCopyInResponse(this.connection)}_handleCopyData(l){this.activeQuery.handleCopyData(l,this.connection)}_handleNotification(l){this.emit("notification",l)}_handleNotice(l){this.emit("notice",l)}getStartupConf(){var l=this.connectionParameters,C={user:l.user,database:l.database},m=l.application_name||l.fallback_application_name;return m&&(C.application_name=m),l.replication&&(C.replication=""+l.replication),l.statement_timeout&&(C.statement_timeout=String(parseInt(l.statement_timeout,10))),l.lock_timeout&&(C.lock_timeout=String(parseInt(l.lock_timeout,10))),l.idle_in_transaction_session_timeout&&(C.idle_in_transaction_session_timeout=String(parseInt(l.idle_in_transaction_session_timeout,10))),l.options&&(C.options=l.options),C}cancel(l,C){if(l.activeQuery===C){var m=this.connection;this.host&&this.host.indexOf("/")===0?m.connect(this.host+"/.s.PGSQL."+this.port):m.connect(this.port,this.host),m.on("connect",function(){m.cancel(l.processID,l.secretKey)})}else l.queryQueue.indexOf(C)!==-1&&l.queryQueue.splice(l.queryQueue.indexOf(C),1)}setTypeParser(l,C,m){return this._types.setTypeParser(l,C,m)}getTypeParser(l,C){return this._types.getTypeParser(l,C)}escapeIdentifier(l){return'"'+l.replace(/"/g,'""')+'"'}escapeLiteral(l){for(var C=!1,m="'",w=0;w<l.length;w++){var _=l[w];_==="'"?m+=_+_:_==="\\"?(m+=_+_,C=!0):m+=_}return m+="'",C===!0&&(m=" E"+m),m}_pulseQueryQueue(){if(this.readyForQuery===!0)if(this.activeQuery=this.queryQueue.shift(),this.activeQuery){this.readyForQuery=!1,this.hasExecuted=!0;let l=this.activeQuery.submit(this.connection);l&&ee.nextTick(()=>{this.activeQuery.handleError(l,this.connection),this.readyForQuery=!0,this._pulseQueryQueue()})}else this.hasExecuted&&(this.activeQuery=null,this.emit("drain"))}query(l,C,m){var w,_,Q,D,R;if(l==null)throw TypeError("Client was passed a null or undefined query");return typeof l.submit=="function"?(Q=l.query_timeout||this.connectionParameters.query_timeout,_=w=l,typeof C=="function"&&(w.callback=w.callback||C)):(Q=this.connectionParameters.query_timeout,(w=new S(l,C,m)).callback||(_=new this._Promise((X,me)=>{w.callback=(q,W)=>q?me(q):X(W)}))),Q&&(R=w.callback,D=setTimeout(()=>{var X=Error("Query read timeout");ee.nextTick(()=>{w.handleError(X,this.connection)}),R(X),w.callback=()=>{};var me=this.queryQueue.indexOf(w);me>-1&&this.queryQueue.splice(me,1),this._pulseQueryQueue()},Q),w.callback=(X,me)=>{clearTimeout(D),R(X,me)}),this.binary&&!w.binary&&(w.binary=!0),w._result&&!w._result._types&&(w._result._types=this._types),this._queryable?this._ending?ee.nextTick(()=>{w.handleError(Error("Client was closed and is not queryable"),this.connection)}):(this.queryQueue.push(w),this._pulseQueryQueue()):ee.nextTick(()=>{w.handleError(Error("Client has encountered a connection error and is not queryable"),this.connection)}),_}ref(){this.connection.ref()}unref(){this.connection.unref()}end(l){if(this._ending=!0,!this.connection._connecting){if(!l)return this._Promise.resolve();l()}if(this.activeQuery||!this._queryable?this.connection.stream.destroy():this.connection.end(),!l)return new this._Promise(C=>{this.connection.once("end",C)});this.connection.once("end",l)}};i(v,"Client"),v.Query=S,y.exports=v}),Ci=j((A,y)=>{de();var f=dt().EventEmitter,h=i(function(){},"NOOP"),u=i((v,l)=>{let C=v.findIndex(l);return C===-1?void 0:v.splice(C,1)[0]},"removeWhere"),a=class{constructor(v,l,C){this.client=v,this.idleListener=l,this.timeoutId=C}};i(a,"IdleItem");var s=class{constructor(v){this.callback=v}};function p(){throw Error("Release called on client which has already been released to the pool.")}function S(v,l){let C,m;return l?{callback:l,result:void 0}:{callback:i(function(w,_){w?C(w):m(_)},"cb"),result:new v(function(w,_){m=w,C=_}).catch(w=>{throw Error.captureStackTrace(w),w})}}function E(v,l){return i(function C(m){m.client=l,l.removeListener("error",C),l.on("error",()=>{v.log("additional client error after disconnection due to error",m)}),v._remove(l),v.emit("error",m,l)},"idleListener")}i(s,"PendingItem"),i(p,"throwOnDoubleRelease"),i(S,"promisify"),i(E,"makeIdleListener");var g=class extends f{constructor(v,l){super(),this.options=Object.assign({},v),v!=null&&"password"in v&&Object.defineProperty(this.options,"password",{configurable:!0,enumerable:!1,writable:!0,value:v.password}),v!=null&&v.ssl&&v.ssl.key&&Object.defineProperty(this.options.ssl,"key",{enumerable:!1}),this.options.max=this.options.max||this.options.poolSize||10,this.options.maxUses=this.options.maxUses||1/0,this.options.allowExitOnIdle=this.options.allowExitOnIdle||!1,this.options.maxLifetimeSeconds=this.options.maxLifetimeSeconds||0,this.log=this.options.log||function(){},this.Client=this.options.Client||l||hr().Client,this.Promise=this.options.Promise||We.Promise,typeof this.options.idleTimeoutMillis>"u"&&(this.options.idleTimeoutMillis=1e4),this._clients=[],this._idle=[],this._expired=new WeakSet,this._pendingQueue=[],this._endCallback=void 0,this.ending=!1,this.ended=!1}_isFull(){return this._clients.length>=this.options.max}_pulseQueue(){if(this.log("pulse queue"),this.ended){this.log("pulse queue ended");return}if(this.ending){this.log("pulse queue on ending"),this._idle.length&&this._idle.slice().map(l=>{this._remove(l.client)}),this._clients.length||(this.ended=!0,this._endCallback());return}if(!this._pendingQueue.length){this.log("no queued requests");return}if(!this._idle.length&&this._isFull())return;let v=this._pendingQueue.shift();if(this._idle.length){let l=this._idle.pop();clearTimeout(l.timeoutId);let C=l.client;C.ref&&C.ref();let m=l.idleListener;return this._acquireClient(C,v,m,!1)}if(!this._isFull())return this.newClient(v);throw Error("unexpected condition")}_remove(v){let l=u(this._idle,C=>C.client===v);l!==void 0&&clearTimeout(l.timeoutId),this._clients=this._clients.filter(C=>C!==v),v.end(),this.emit("remove",v)}connect(v){if(this.ending){let m=Error("Cannot use a pool after calling end on the pool");return v?v(m):this.Promise.reject(m)}let l=S(this.Promise,v),C=l.result;if(this._isFull()||this._idle.length){if(this._idle.length&&ee.nextTick(()=>this._pulseQueue()),!this.options.connectionTimeoutMillis)return this._pendingQueue.push(new s(l.callback)),C;let m=i((Q,D,R)=>{clearTimeout(_),l.callback(Q,D,R)},"queueCallback"),w=new s(m),_=setTimeout(()=>{u(this._pendingQueue,Q=>Q.callback===m),w.timedOut=!0,l.callback(Error("timeout exceeded when trying to connect"))},this.options.connectionTimeoutMillis);return this._pendingQueue.push(w),C}return this.newClient(new s(l.callback)),C}newClient(v){let l=new this.Client(this.options);this._clients.push(l);let C=E(this,l);this.log("checking client timeout");let m,w=!1;this.options.connectionTimeoutMillis&&(m=setTimeout(()=>{this.log("ending client due to timeout"),w=!0,l.connection?l.connection.stream.destroy():l.end()},this.options.connectionTimeoutMillis)),this.log("connecting new client"),l.connect(_=>{if(m&&clearTimeout(m),l.on("error",C),_)this.log("client failed to connect",_),this._clients=this._clients.filter(Q=>Q!==l),w&&(_.message="Connection terminated due to connection timeout"),this._pulseQueue(),v.timedOut||v.callback(_,void 0,h);else{if(this.log("new client connected"),this.options.maxLifetimeSeconds!==0){let Q=setTimeout(()=>{this.log("ending client due to expired lifetime"),this._expired.add(l),this._idle.findIndex(D=>D.client===l)!==-1&&this._acquireClient(l,new s((D,R,X)=>X()),C,!1)},1e3*this.options.maxLifetimeSeconds);Q.unref(),l.once("end",()=>clearTimeout(Q))}return this._acquireClient(l,v,C,!0)}})}_acquireClient(v,l,C,m){m&&this.emit("connect",v),this.emit("acquire",v),v.release=this._releaseOnce(v,C),v.removeListener("error",C),l.timedOut?m&&this.options.verify?this.options.verify(v,v.release):v.release():m&&this.options.verify?this.options.verify(v,w=>{if(w)return v.release(w),l.callback(w,void 0,h);l.callback(void 0,v,v.release)}):l.callback(void 0,v,v.release)}_releaseOnce(v,l){let C=!1;return m=>{C&&p(),C=!0,this._release(v,l,m)}}_release(v,l,C){let m;if(v.on("error",l),v._poolUseCount=(v._poolUseCount||0)+1,this.emit("release",C,v),C||this.ending||!v._queryable||v._ending||v._poolUseCount>=this.options.maxUses){v._poolUseCount>=this.options.maxUses&&this.log("remove expended client"),this._remove(v),this._pulseQueue();return}if(this._expired.has(v)){this.log("remove expired client"),this._expired.delete(v),this._remove(v),this._pulseQueue();return}this.options.idleTimeoutMillis&&(m=setTimeout(()=>{this.log("remove idle client"),this._remove(v)},this.options.idleTimeoutMillis),this.options.allowExitOnIdle&&m.unref()),this.options.allowExitOnIdle&&v.unref(),this._idle.push(new a(v,l,m)),this._pulseQueue()}query(v,l,C){if(typeof v=="function"){let w=S(this.Promise,v);return Ce(function(){return w.callback(Error("Passing a function as the first parameter to pool.query is not supported"))}),w.result}typeof l=="function"&&(C=l,l=void 0);let m=S(this.Promise,C);return C=m.callback,this.connect((w,_)=>{if(w)return C(w);let Q=!1,D=i(R=>{Q||(Q=!0,_.release(R),C(R))},"onError");_.once("error",D),this.log("dispatching query");try{_.query(v,l,(R,X)=>{if(this.log("query dispatched"),_.removeListener("error",D),!Q)return Q=!0,_.release(R),R?C(R):C(void 0,X)})}catch(R){return _.release(R),C(R)}}),m.result}end(v){if(this.log("ending"),this.ending){let C=Error("Called end on pool more than once");return v?v(C):this.Promise.reject(C)}this.ending=!0;let l=S(this.Promise,v);return this._endCallback=l.callback,this._pulseQueue(),l.result}get waitingCount(){return this._pendingQueue.length}get idleCount(){return this._idle.length}get expiredCount(){return this._clients.reduce((v,l)=>v+(this._expired.has(l)?1:0),0)}get totalCount(){return this._clients.length}};i(g,"Pool"),y.exports=g}),ot={};H(ot,{default:()=>oi});var oi,Ai=N(()=>{de(),oi={}}),ai=j((A,y)=>{y.exports={name:"pg",version:"8.8.0",description:"PostgreSQL client - pure javascript & libpq with the same API",keywords:["database","libpq","pg","postgre","postgres","postgresql","rdbms"],homepage:"https://github.com/brianc/node-postgres",repository:{type:"git",url:"git://github.com/brianc/node-postgres.git",directory:"packages/pg"},author:"Brian Carlson <brian.m.carlson@gmail.com>",main:"./lib",dependencies:{"buffer-writer":"2.0.0","packet-reader":"1.0.0","pg-connection-string":"^2.5.0","pg-pool":"^3.5.2","pg-protocol":"^1.5.0","pg-types":"^2.1.0",pgpass:"1.x"},devDependencies:{async:"2.6.4",bluebird:"3.5.2",co:"4.6.0","pg-copy-streams":"0.3.0"},peerDependencies:{"pg-native":">=3.0.1"},peerDependenciesMeta:{"pg-native":{optional:!0}},scripts:{test:"make test-all"},files:["lib","SPONSORS.md"],license:"MIT",engines:{node:">= 8.0.0"},gitHead:"c99fb2c127ddf8d712500db2c7b9a5491a178655"}}),Pi=j((A,y)=>{de();var f=dt().EventEmitter,h=(J(),fe(Qe)),u=Jt(),a=y.exports=function(p,S,E){f.call(this),p=u.normalizeQueryConfig(p,S,E),this.text=p.text,this.values=p.values,this.name=p.name,this.callback=p.callback,this.state="new",this._arrayMode=p.rowMode==="array",this._emitRowEvents=!1,this.on("newListener",function(g){g==="row"&&(this._emitRowEvents=!0)}.bind(this))};h.inherits(a,f);var s={sqlState:"code",statementPosition:"position",messagePrimary:"message",context:"where",schemaName:"schema",tableName:"table",columnName:"column",dataTypeName:"dataType",constraintName:"constraint",sourceFile:"file",sourceLine:"line",sourceFunction:"routine"};a.prototype.handleError=function(p){var S=this.native.pq.resultErrorFields();if(S)for(var E in S)p[s[E]||E]=S[E];this.callback?this.callback(p):this.emit("error",p),this.state="error"},a.prototype.then=function(p,S){return this._getPromise().then(p,S)},a.prototype.catch=function(p){return this._getPromise().catch(p)},a.prototype._getPromise=function(){return this._promise||(this._promise=new Promise(function(p,S){this._once("end",p),this._once("error",S)}.bind(this))),this._promise},a.prototype.submit=function(p){this.state="running";var S=this;this.native=p.native,p.native.arrayMode=this._arrayMode;var E=i(function(l,C,m){if(p.native.arrayMode=!1,Ce(function(){S.emit("_done")}),l)return S.handleError(l);S._emitRowEvents&&(m.length>1?C.forEach((w,_)=>{w.forEach(Q=>{S.emit("row",Q,m[_])})}):C.forEach(function(w){S.emit("row",w,m)})),S.state="end",S.emit("end",m),S.callback&&S.callback(null,m)},"after");if(ee.domain&&(E=ee.domain.bind(E)),this.name){this.name.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",this.name,this.name.length),console.error("This can cause conflicts and silent errors executing queries"));var g=(this.values||[]).map(u.prepareValue);if(p.namedQueries[this.name]){if(this.text&&p.namedQueries[this.name]!==this.text){let l=Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`);return E(l)}return p.native.execute(this.name,g,E)}return p.native.prepare(this.name,this.text,g.length,function(l){return l?E(l):(p.namedQueries[S.name]=S.text,S.native.execute(S.name,g,E))})}if(this.values){if(!Array.isArray(this.values)){let l=Error("Query values must be an array");return E(l)}var v=this.values.map(u.prepareValue);p.native.query(this.text,v,E)}else p.native.query(this.text,E)}}),Ii=j((A,y)=>{de();var f=(Ai(),fe(ot)),h=Yr(),u=(ai(),dt().EventEmitter),a=(J(),fe(Qe)),s=or(),p=Pi(),S=y.exports=function(E){u.call(this),E=E||{},this._Promise=E.Promise||We.Promise,this._types=new h(E.types),this.native=new f({types:this._types}),this._queryQueue=[],this._ending=!1,this._connecting=!1,this._connected=!1,this._queryable=!0;var g=this.connectionParameters=new s(E);this.user=g.user,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:g.password}),this.database=g.database,this.host=g.host,this.port=g.port,this.namedQueries={}};S.Query=p,a.inherits(S,u),S.prototype._errorAllQueries=function(E){let g=i(v=>{ee.nextTick(()=>{v.native=this.native,v.handleError(E)})},"enqueueError");this._hasActiveQuery()&&(g(this._activeQuery),this._activeQuery=null),this._queryQueue.forEach(g),this._queryQueue.length=0},S.prototype._connect=function(E){var g=this;if(this._connecting){ee.nextTick(()=>E(Error("Client has already been connected. You cannot reuse a client.")));return}this._connecting=!0,this.connectionParameters.getLibpqConnectionString(function(v,l){if(v)return E(v);g.native.connect(l,function(C){if(C)return g.native.end(),E(C);g._connected=!0,g.native.on("error",function(m){g._queryable=!1,g._errorAllQueries(m),g.emit("error",m)}),g.native.on("notification",function(m){g.emit("notification",{channel:m.relname,payload:m.extra})}),g.emit("connect"),g._pulseQueryQueue(!0),E()})})},S.prototype.connect=function(E){if(E){this._connect(E);return}return new this._Promise((g,v)=>{this._connect(l=>{l?v(l):g()})})},S.prototype.query=function(E,g,v){var l,C,m,w,_;if(E==null)throw TypeError("Client was passed a null or undefined query");if(typeof E.submit=="function")m=E.query_timeout||this.connectionParameters.query_timeout,C=l=E,typeof g=="function"&&(E.callback=g);else if(m=this.connectionParameters.query_timeout,!(l=new p(E,g,v)).callback){let Q,D;C=new this._Promise((R,X)=>{Q=R,D=X}),l.callback=(R,X)=>R?D(R):Q(X)}return m&&(_=l.callback,w=setTimeout(()=>{var Q=Error("Query read timeout");ee.nextTick(()=>{l.handleError(Q,this.connection)}),_(Q),l.callback=()=>{};var D=this._queryQueue.indexOf(l);D>-1&&this._queryQueue.splice(D,1),this._pulseQueryQueue()},m),l.callback=(Q,D)=>{clearTimeout(w),_(Q,D)}),this._queryable?this._ending?(l.native=this.native,ee.nextTick(()=>{l.handleError(Error("Client was closed and is not queryable"))})):(this._queryQueue.push(l),this._pulseQueryQueue()):(l.native=this.native,ee.nextTick(()=>{l.handleError(Error("Client has encountered a connection error and is not queryable"))})),C},S.prototype.end=function(E){var g,v=this;return this._ending=!0,this._connected||this.once("connect",this.end.bind(this,E)),E||(g=new this._Promise(function(l,C){E=i(m=>m?C(m):l(),"cb")})),this.native.end(function(){v._errorAllQueries(Error("Connection terminated")),ee.nextTick(()=>{v.emit("end"),E&&E()})}),g},S.prototype._hasActiveQuery=function(){return this._activeQuery&&this._activeQuery.state!=="error"&&this._activeQuery.state!=="end"},S.prototype._pulseQueryQueue=function(E){if(this._connected&&!this._hasActiveQuery()){var g=this._queryQueue.shift();if(!g){E||this.emit("drain");return}this._activeQuery=g,g.submit(this);var v=this;g.once("_done",function(){v._pulseQueryQueue()})}},S.prototype.cancel=function(E){this._activeQuery===E?this.native.cancel(function(){}):this._queryQueue.indexOf(E)!==-1&&this._queryQueue.splice(this._queryQueue.indexOf(E),1)},S.prototype.ref=function(){},S.prototype.unref=function(){},S.prototype.setTypeParser=function(E,g,v){return this._types.setTypeParser(E,g,v)},S.prototype.getTypeParser=function(E,g){return this._types.getTypeParser(E,g)}}),li=j((A,y)=>{de(),y.exports=Ii()}),hr=j((A,y)=>{de();var f=Et(),h=Gt(),u=ur(),a=Ci(),{DatabaseError:s}=Ar(),p=i(E=>{var g;return i(g=class extends a{constructor(v){super(v,E)}},"BoundPool"),g},"poolFactory"),S=i(function(E){this.defaults=h,this.Client=E,this.Query=this.Client.Query,this.Pool=p(this.Client),this._pools=[],this.Connection=u,this.types=Ht(),this.DatabaseError=s},"PG");"u">typeof ee.env.NODE_PG_FORCE_NATIVE?y.exports=new S(li()):(y.exports=new S(f),Object.defineProperty(y.exports,"native",{configurable:!0,enumerable:!1,get(){var E=null;try{E=new S(li())}catch(g){if(g.code!=="MODULE_NOT_FOUND")throw g}return Object.defineProperty(y.exports,"native",{value:E}),E}}))}),Rr={};H(Rr,{Client:()=>di,ClientBase:()=>ht.ClientBase,Connection:()=>ht.Connection,DatabaseError:()=>ht.DatabaseError,NeonDbError:()=>Qt,Pool:()=>gi,Query:()=>ht.Query,defaults:()=>ht.defaults,neon:()=>Lr,neonConfig:()=>Wt,types:()=>ht.types}),Xe.exports=fe(Rr),de();var Tt=le(hr());lr(),de(),_r(),lr();var mt=le(Jt()),ui=class extends Error{constructor(){super(...arguments),be(this,"name","NeonDbError"),be(this,"code",null),be(this,"sourceError")}};i(ui,"NeonDbError");var Qt=ui,hi="transaction() expects an array of queries, or a function returning an array of queries";function Lr(A,{arrayMode:y,fullResults:f,fetchOptions:h,isolationLevel:u,readOnly:a,deferrable:s,queryCallback:p,resultCallback:S}={}){let E;if(!A)throw Error("No database connection string was provided to `neon()`. Perhaps an environment variable has not been set?");try{E=Zt(A)}catch{throw Error("Database connection string provided to `neon()` is not a valid URL. Connection string: "+String(A))}let{protocol:g,username:v,password:l,hostname:C,port:m,pathname:w}=E;if(g!=="postgres:"&&g!=="postgresql:"||!v||!l||!C||!w)throw Error("Database connection string format for `neon()` should be: postgresql://user:password@host.tld/dbname?option=value");function _(D,...R){let X,me;if(typeof D=="string")X=D,me=R[1],R=R[0]??[];else{X="";for(let W=0;W<D.length;W++)X+=D[W],W<R.length&&(X+="$"+(W+1))}let q={query:X,params:R=R.map(W=>(0,mt.prepareValue)(W))};return p&&p(q),ci(Q,q,me)}async function Q(D,R){let X,me=h??{},{fetchEndpoint:q,fetchConnectionCache:W,fetchFunction:Y}=Wt,k=typeof q=="function"?q(C,m):q,V=Array.isArray(D)?{queries:D}:D,pe=y??!1,Ie=f??!1,ne=u,De=a,Be=s;R!==void 0&&(R.arrayMode!==void 0&&(pe=R.arrayMode),R.fullResults!==void 0&&(Ie=R.fullResults),R.fetchOptions!==void 0&&(me={...me,...R.fetchOptions}),R.isolationLevel!==void 0&&(ne=R.isolationLevel),R.readOnly!==void 0&&(De=R.readOnly),R.deferrable!==void 0&&(Be=R.deferrable));let $e={"Neon-Connection-String":A,"Neon-Raw-Text-Output":"true","Neon-Array-Mode":"true"};W===!0&&($e["Neon-Pool-Opt-In"]="true"),Array.isArray(D)&&(ne!==void 0&&($e["Neon-Batch-Isolation-Level"]=ne),De!==void 0&&($e["Neon-Batch-Read-Only"]=String(De)),Be!==void 0&&($e["Neon-Batch-Deferrable"]=String(Be)));try{X=await(Y??fetch)(k,{method:"POST",body:JSON.stringify(V),headers:$e,...me})}catch(et){let ze=new Qt(`Error connecting to database: ${et.message}`);throw ze.sourceError=et,ze}if(X.ok){let et=await X.json();if(!Array.isArray(D))return Ir(et,{arrayMode:pe,fullResults:Ie,parameterizedQuery:D,resultCallback:S});{let ze=et.results;if(!Array.isArray(ze))throw new Qt("Neon internal error: unexpected result format");return ze.map((je,Ye)=>Ir(je,{arrayMode:pe,fullResults:Ie,parameterizedQuery:D[Ye],resultCallback:S}))}}{let{status:et}=X;if(et===400){let{message:ze,code:je}=await X.json(),Ye=new Qt(ze);throw Ye.code=je,Ye}{let ze=await X.text();throw new Qt(`Server error (HTTP status ${et}): ${ze}`)}}}return i(_,"resolve"),_.transaction=async(D,R)=>{if(typeof D=="function"&&(D=D(_)),!Array.isArray(D))throw Error(hi);return Q(D.map(X=>{if(X[Symbol.toStringTag]!=="NeonQueryPromise")throw Error(hi);return X.parameterizedQuery}),R)},i(Q,"execute"),_}function ci(A,y,f){return{[Symbol.toStringTag]:"NeonQueryPromise",parameterizedQuery:y,opts:f,then:(h,u)=>A(y,f).then(h,u),catch:h=>A(y,f).catch(h),finally:h=>A(y,f).finally(h)}}function Ir(A,{arrayMode:y,fullResults:f,parameterizedQuery:h,resultCallback:u}){let a=A.fields.map(S=>S.name),s=A.fields.map(S=>ht.types.getTypeParser(S.dataTypeID)),p=y===!0?A.rows.map(S=>S.map((E,g)=>E===null?null:s[g](E))):A.rows.map(S=>Object.fromEntries(S.map((E,g)=>[a[g],E===null?null:s[g](E)])));return u&&u(h,A,p,{arrayMode:y,fullResults:f}),f?(A.viaNeonFetch=!0,A.rowAsArray=y,A.rows=p,A):p}i(Lr,"neon"),i(ci,"createNeonQueryPromise"),i(Ir,"processQueryResult");var kr=le(or()),ht=le(hr()),fi=class extends Tt.Client{constructor(A){super(A),this.config=A}get neonConfig(){return this.connection.stream}connect(A){let{neonConfig:y}=this;y.forceDisablePgSSL&&(this.ssl=this.connection.ssl=!1),this.ssl&&y.useSecureWebSocket&&console.warn("SSL is enabled for both Postgres (e.g. ?sslmode=require in the connection string + forceDisablePgSSL = false) and the WebSocket tunnel (useSecureWebSocket = true). Double encryption will increase latency and CPU usage. It may be appropriate to disable SSL in the Postgres connection parameters or set forceDisablePgSSL = true.");let f=this.config?.host!==void 0||this.config?.connectionString!==void 0||ee.env.PGHOST!==void 0,h=ee.env.USER??ee.env.USERNAME;if(!f&&this.host==="localhost"&&this.user===h&&this.database===h&&this.password===null)throw Error(`No database host or connection string was set, and key parameters have default values (host: localhost, user: ${h}, db: ${h}, password: null). Is an environment variable missing? Alternatively, if you intended to connect with these parameters, please set the host to 'localhost' explicitly.`);let u=super.connect(A),a=y.pipelineTLS&&this.ssl,s=y.pipelineConnect==="password";if(!a&&!y.pipelineConnect)return u;let p=this.connection;if(a&&p.on("connect",()=>p.stream.emit("data","S")),s){p.removeAllListeners("authenticationCleartextPassword"),p.removeAllListeners("readyForQuery"),p.once("readyForQuery",()=>p.on("readyForQuery",this._handleReadyForQuery.bind(this)));let S=this.ssl?"sslconnect":"connect";p.on(S,()=>{this._handleAuthCleartextPassword(),this._handleReadyForQuery()})}return u}async _handleAuthSASLContinue(A){let y=this.saslSession,f=this.password,h=A.data;if(y.message!=="SASLInitialResponse"||typeof f!="string"||typeof h!="string")throw Error("SASL: protocol error");let u=Object.fromEntries(h.split(",").map(Be=>{if(!/^.=/.test(Be))throw Error("SASL: Invalid attribute pair entry");return[Be[0],Be.substring(2)]})),a=u.r,s=u.s,p=u.i;if(!a||!/^[!-+--~]+$/.test(a))throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce missing/unprintable");if(!s||!/^(?:[a-zA-Z0-9+/]{4})*(?:[a-zA-Z0-9+/]{2}==|[a-zA-Z0-9+/]{3}=)?$/.test(s))throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt missing/not base64");if(!p||!/^[1-9][0-9]*$/.test(p))throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: missing/invalid iteration count");if(!a.startsWith(y.clientNonce))throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce does not start with client nonce");if(a.length===y.clientNonce.length)throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce is too short");let S=parseInt(p,10),E=oe.from(s,"base64"),g=new TextEncoder,v=g.encode(f),l=await he.subtle.importKey("raw",v,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),C=new Uint8Array(await he.subtle.sign("HMAC",l,oe.concat([E,oe.from([0,0,0,1])]))),m=C;for(var w=0;w<S-1;w++)C=new Uint8Array(await he.subtle.sign("HMAC",l,C)),m=oe.from(m.map((Be,$e)=>m[$e]^C[$e]));let _=m,Q=await he.subtle.importKey("raw",_,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),D=new Uint8Array(await he.subtle.sign("HMAC",Q,g.encode("Client Key"))),R=await he.subtle.digest("SHA-256",D),X="n=*,r="+y.clientNonce,me="r="+a+",s="+s+",i="+S,q="c=biws,r="+a,W=X+","+me+","+q,Y=await he.subtle.importKey("raw",R,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);var k=new Uint8Array(await he.subtle.sign("HMAC",Y,g.encode(W))),V=oe.from(D.map((Be,$e)=>D[$e]^k[$e])).toString("base64");let pe=await he.subtle.importKey("raw",_,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),Ie=await he.subtle.sign("HMAC",pe,g.encode("Server Key")),ne=await he.subtle.importKey("raw",Ie,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);var De=oe.from(await he.subtle.sign("HMAC",ne,g.encode(W)));y.message="SASLResponse",y.serverSignature=De.toString("base64"),y.response=q+",p="+V,this.connection.sendSCRAMClientFinalMessage(this.saslSession.response)}};i(fi,"NeonClient");var di=fi;function pi(A,y){let f,h;return y?{callback:y,result:void 0}:{callback:i(function(u,a){u?f(u):h(a)},"cb"),result:new A(function(u,a){h=u,f=a})}}i(pi,"promisify");var er=class extends Tt.Pool{constructor(){super(...arguments),be(this,"Client",di),be(this,"hasFetchUnsupportedListeners",!1)}on(A,y){return A!=="error"&&(this.hasFetchUnsupportedListeners=!0),super.on(A,y)}query(A,y,f){if(!Wt.poolQueryViaFetch||this.hasFetchUnsupportedListeners||typeof A=="function")return super.query(A,y,f);typeof y=="function"&&(f=y,y=void 0);let h=pi(this.Promise,f);f=h.callback;try{let u=new kr.default(this.options),a=encodeURIComponent,s=encodeURI,p=`postgresql://${a(u.user)}:${a(u.password)}@${a(u.host)}/${s(u.database)}`,S=typeof A=="string"?A:A.text,E=y??A.values??[];Lr(p,{fullResults:!0,arrayMode:A.rowMode==="array"})(S,E).then(g=>f(void 0,g)).catch(g=>f(g))}catch(u){f(u)}return h.result}};i(er,"NeonPool");var gi=er;},668:Xe=>{"use strict";var We=Object.defineProperty,Ce=Object.getOwnPropertyDescriptor,he=Object.getOwnPropertyNames,oe=Object.prototype.hasOwnProperty,ee={};function Re(i){var N;let j=["path"in i&&i.path&&`Path=${i.path}`,"expires"in i&&(i.expires||i.expires===0)&&`Expires=${(typeof i.expires=="number"?new Date(i.expires):i.expires).toUTCString()}`,"maxAge"in i&&typeof i.maxAge=="number"&&`Max-Age=${i.maxAge}`,"domain"in i&&i.domain&&`Domain=${i.domain}`,"secure"in i&&i.secure&&"Secure","httpOnly"in i&&i.httpOnly&&"HttpOnly","sameSite"in i&&i.sameSite&&`SameSite=${i.sameSite}`,"priority"in i&&i.priority&&`Priority=${i.priority}`].filter(Boolean);return`${i.name}=${encodeURIComponent((N=i.value)!=null?N:"")}; ${j.join("; ")}`}function Ae(i){let N=new Map;for(let j of i.split(/; */)){if(!j)continue;let H=j.indexOf("=");if(H===-1){N.set(j,"true");continue}let[ue,le]=[j.slice(0,H),j.slice(H+1)];try{N.set(ue,decodeURIComponent(le??"true"))}catch{}}return N}function ae(i){var N,j;if(!i)return;let[[H,ue],...le]=Ae(i),{domain:fe,expires:be,httponly:Ke,maxage:Je,path:ut,samesite:de,secure:dt,priority:Qe}=Object.fromEntries(le.map(([J,Ee])=>[J.toLowerCase(),Ee])),Ne={name:H,value:decodeURIComponent(ue),domain:fe,...be&&{expires:new Date(be)},...Ke&&{httpOnly:!0},...typeof Je=="string"&&{maxAge:Number(Je)},path:ut,...de&&{sameSite:F.includes(N=(N=de).toLowerCase())?N:void 0},...dt&&{secure:!0},...Qe&&{priority:P.includes(j=(j=Qe).toLowerCase())?j:void 0}};return function(J){let Ee={};for(let ke in J)J[ke]&&(Ee[ke]=J[ke]);return Ee}(Ne)}((i,N)=>{for(var j in N)We(i,j,{get:N[j],enumerable:!0})})(ee,{RequestCookies:()=>T,ResponseCookies:()=>I,parseCookie:()=>Ae,parseSetCookie:()=>ae,stringifyCookie:()=>Re}),Xe.exports=((i,N,j,H)=>{if(N&&typeof N=="object"||typeof N=="function")for(let ue of he(N))oe.call(i,ue)||ue===void 0||We(i,ue,{get:()=>N[ue],enumerable:!(H=Ce(N,ue))||H.enumerable});return i})(We({},"__esModule",{value:!0}),ee);var F=["strict","lax","none"],P=["low","medium","high"],T=class{constructor(i){this._parsed=new Map,this._headers=i;let N=i.get("cookie");if(N){let j=Ae(N);for(let[H,ue]of j)this._parsed.set(H,{name:H,value:ue})}}[Symbol.iterator](){return this._parsed[Symbol.iterator]()}get size(){return this._parsed.size}get(...i){let N=typeof i[0]=="string"?i[0]:i[0].name;return this._parsed.get(N)}getAll(...i){var N;let j=Array.from(this._parsed);if(!i.length)return j.map(([ue,le])=>le);let H=typeof i[0]=="string"?i[0]:(N=i[0])==null?void 0:N.name;return j.filter(([ue])=>ue===H).map(([ue,le])=>le)}has(i){return this._parsed.has(i)}set(...i){let[N,j]=i.length===1?[i[0].name,i[0].value]:i,H=this._parsed;return H.set(N,{name:N,value:j}),this._headers.set("cookie",Array.from(H).map(([ue,le])=>Re(le)).join("; ")),this}delete(i){let N=this._parsed,j=Array.isArray(i)?i.map(H=>N.delete(H)):N.delete(i);return this._headers.set("cookie",Array.from(N).map(([H,ue])=>Re(ue)).join("; ")),j}clear(){return this.delete(Array.from(this._parsed.keys())),this}[Symbol.for("edge-runtime.inspect.custom")](){return`RequestCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}toString(){return[...this._parsed.values()].map(i=>`${i.name}=${encodeURIComponent(i.value)}`).join("; ")}},I=class{constructor(i){var N,j,H;this._parsed=new Map,this._headers=i;let ue=(H=(j=(N=i.getSetCookie)==null?void 0:N.call(i))!=null?j:i.get("set-cookie"))!=null?H:[],le=Array.isArray(ue)?ue:function(fe){if(!fe)return[];var be,Ke,Je,ut,de,dt=[],Qe=0;function Ne(){for(;Qe<fe.length&&/\s/.test(fe.charAt(Qe));)Qe+=1;return Qe<fe.length}for(;Qe<fe.length;){for(be=Qe,de=!1;Ne();)if((Ke=fe.charAt(Qe))===","){for(Je=Qe,Qe+=1,Ne(),ut=Qe;Qe<fe.length&&(Ke=fe.charAt(Qe))!=="="&&Ke!==";"&&Ke!==",";)Qe+=1;Qe<fe.length&&fe.charAt(Qe)==="="?(de=!0,Qe=ut,dt.push(fe.substring(be,Je)),be=Qe):Qe=Je+1}else Qe+=1;(!de||Qe>=fe.length)&&dt.push(fe.substring(be,fe.length))}return dt}(ue);for(let fe of le){let be=ae(fe);be&&this._parsed.set(be.name,be)}}get(...i){let N=typeof i[0]=="string"?i[0]:i[0].name;return this._parsed.get(N)}getAll(...i){var N;let j=Array.from(this._parsed.values());if(!i.length)return j;let H=typeof i[0]=="string"?i[0]:(N=i[0])==null?void 0:N.name;return j.filter(ue=>ue.name===H)}has(i){return this._parsed.has(i)}set(...i){let[N,j,H]=i.length===1?[i[0].name,i[0].value,i[0]]:i,ue=this._parsed;return ue.set(N,function(le={name:"",value:""}){return typeof le.expires=="number"&&(le.expires=new Date(le.expires)),le.maxAge&&(le.expires=new Date(Date.now()+1e3*le.maxAge)),(le.path===null||le.path===void 0)&&(le.path="/"),le}({name:N,value:j,...H})),function(le,fe){for(let[,be]of(fe.delete("set-cookie"),le)){let Ke=Re(be);fe.append("set-cookie",Ke)}}(ue,this._headers),this}delete(...i){let[N,j,H]=typeof i[0]=="string"?[i[0]]:[i[0].name,i[0].path,i[0].domain];return this.set({name:N,path:j,domain:H,value:"",expires:new Date(0)})}[Symbol.for("edge-runtime.inspect.custom")](){return`ResponseCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}toString(){return[...this._parsed.values()].map(Re).join("; ")}}},565:Xe=>{"use strict";(()=>{typeof __nccwpck_require__<"u"&&(__nccwpck_require__.ab="//");var We={};(()=>{We.parse=function(Re,Ae){if(typeof Re!="string")throw TypeError("argument str must be a string");for(var ae={},F=Re.split(oe),P=(Ae||{}).decode||Ce,T=0;T<F.length;T++){var I=F[T],i=I.indexOf("=");if(!(i<0)){var N=I.substr(0,i).trim(),j=I.substr(++i,I.length).trim();j[0]=='"'&&(j=j.slice(1,-1)),ae[N]==null&&(ae[N]=function(H,ue){try{return ue(H)}catch{return H}}(j,P))}}return ae},We.serialize=function(Re,Ae,ae){var F=ae||{},P=F.encode||he;if(typeof P!="function")throw TypeError("option encode is invalid");if(!ee.test(Re))throw TypeError("argument name is invalid");var T=P(Ae);if(T&&!ee.test(T))throw TypeError("argument val is invalid");var I=Re+"="+T;if(F.maxAge!=null){var i=F.maxAge-0;if(isNaN(i)||!isFinite(i))throw TypeError("option maxAge is invalid");I+="; Max-Age="+Math.floor(i)}if(F.domain){if(!ee.test(F.domain))throw TypeError("option domain is invalid");I+="; Domain="+F.domain}if(F.path){if(!ee.test(F.path))throw TypeError("option path is invalid");I+="; Path="+F.path}if(F.expires){if(typeof F.expires.toUTCString!="function")throw TypeError("option expires is invalid");I+="; Expires="+F.expires.toUTCString()}if(F.httpOnly&&(I+="; HttpOnly"),F.secure&&(I+="; Secure"),F.sameSite)switch(typeof F.sameSite=="string"?F.sameSite.toLowerCase():F.sameSite){case!0:case"strict":I+="; SameSite=Strict";break;case"lax":I+="; SameSite=Lax";break;case"none":I+="; SameSite=None";break;default:throw TypeError("option sameSite is invalid")}return I};var Ce=decodeURIComponent,he=encodeURIComponent,oe=/; */,ee=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/})(),Xe.exports=We})()},695:Xe=>{"use strict";(()=>{var We={806:(ee,Re,Ae)=>{let ae=Ae(190),F=Symbol("max"),P=Symbol("length"),T=Symbol("lengthCalculator"),I=Symbol("allowStale"),i=Symbol("maxAge"),N=Symbol("dispose"),j=Symbol("noDisposeOnSet"),H=Symbol("lruList"),ue=Symbol("cache"),le=Symbol("updateAgeOnGet"),fe=()=>1;class be{constructor(J){if(typeof J=="number"&&(J={max:J}),J||(J={}),J.max&&(typeof J.max!="number"||J.max<0))throw TypeError("max must be a non-negative number");this[F]=J.max||1/0;let Ee=J.length||fe;if(this[T]=typeof Ee!="function"?fe:Ee,this[I]=J.stale||!1,J.maxAge&&typeof J.maxAge!="number")throw TypeError("maxAge must be a number");this[i]=J.maxAge||0,this[N]=J.dispose,this[j]=J.noDisposeOnSet||!1,this[le]=J.updateAgeOnGet||!1,this.reset()}set max(J){if(typeof J!="number"||J<0)throw TypeError("max must be a non-negative number");this[F]=J||1/0,ut(this)}get max(){return this[F]}set allowStale(J){this[I]=!!J}get allowStale(){return this[I]}set maxAge(J){if(typeof J!="number")throw TypeError("maxAge must be a non-negative number");this[i]=J,ut(this)}get maxAge(){return this[i]}set lengthCalculator(J){typeof J!="function"&&(J=fe),J!==this[T]&&(this[T]=J,this[P]=0,this[H].forEach(Ee=>{Ee.length=this[T](Ee.value,Ee.key),this[P]+=Ee.length})),ut(this)}get lengthCalculator(){return this[T]}get length(){return this[P]}get itemCount(){return this[H].length}rforEach(J,Ee){Ee=Ee||this;for(let ke=this[H].tail;ke!==null;){let Ue=ke.prev;Qe(this,J,ke,Ee),ke=Ue}}forEach(J,Ee){Ee=Ee||this;for(let ke=this[H].head;ke!==null;){let Ue=ke.next;Qe(this,J,ke,Ee),ke=Ue}}keys(){return this[H].toArray().map(J=>J.key)}values(){return this[H].toArray().map(J=>J.value)}reset(){this[N]&&this[H]&&this[H].length&&this[H].forEach(J=>this[N](J.key,J.value)),this[ue]=new Map,this[H]=new ae,this[P]=0}dump(){return this[H].map(J=>!Je(this,J)&&{k:J.key,v:J.value,e:J.now+(J.maxAge||0)}).toArray().filter(J=>J)}dumpLru(){return this[H]}set(J,Ee,ke){if((ke=ke||this[i])&&typeof ke!="number")throw TypeError("maxAge must be a number");let Ue=ke?Date.now():0,wt=this[T](Ee,J);if(this[ue].has(J)){if(wt>this[F])return de(this,this[ue].get(J)),!1;let ve=this[ue].get(J),pt=ve.value;return this[N]&&!this[j]&&this[N](J,pt.value),pt.now=Ue,pt.maxAge=ke,pt.value=Ee,this[P]+=wt-pt.length,pt.length=wt,this.get(J),ut(this),!0}let Ct=new dt(J,Ee,wt,Ue,ke);return Ct.length>this[F]?(this[N]&&this[N](J,Ee),!1):(this[P]+=Ct.length,this[H].unshift(Ct),this[ue].set(J,this[H].head),ut(this),!0)}has(J){if(!this[ue].has(J))return!1;let Ee=this[ue].get(J).value;return!Je(this,Ee)}get(J){return Ke(this,J,!0)}peek(J){return Ke(this,J,!1)}pop(){let J=this[H].tail;return J?(de(this,J),J.value):null}del(J){de(this,this[ue].get(J))}load(J){this.reset();let Ee=Date.now();for(let ke=J.length-1;ke>=0;ke--){let Ue=J[ke],wt=Ue.e||0;if(wt===0)this.set(Ue.k,Ue.v);else{let Ct=wt-Ee;Ct>0&&this.set(Ue.k,Ue.v,Ct)}}}prune(){this[ue].forEach((J,Ee)=>Ke(this,Ee,!1))}}let Ke=(Ne,J,Ee)=>{let ke=Ne[ue].get(J);if(ke){let Ue=ke.value;if(Je(Ne,Ue)){if(de(Ne,ke),!Ne[I])return}else Ee&&(Ne[le]&&(ke.value.now=Date.now()),Ne[H].unshiftNode(ke));return Ue.value}},Je=(Ne,J)=>{if(!J||!J.maxAge&&!Ne[i])return!1;let Ee=Date.now()-J.now;return J.maxAge?Ee>J.maxAge:Ne[i]&&Ee>Ne[i]},ut=Ne=>{if(Ne[P]>Ne[F])for(let J=Ne[H].tail;Ne[P]>Ne[F]&&J!==null;){let Ee=J.prev;de(Ne,J),J=Ee}},de=(Ne,J)=>{if(J){let Ee=J.value;Ne[N]&&Ne[N](Ee.key,Ee.value),Ne[P]-=Ee.length,Ne[ue].delete(Ee.key),Ne[H].removeNode(J)}};class dt{constructor(J,Ee,ke,Ue,wt){this.key=J,this.value=Ee,this.length=ke,this.now=Ue,this.maxAge=wt||0}}let Qe=(Ne,J,Ee,ke)=>{let Ue=Ee.value;Je(Ne,Ue)&&(de(Ne,Ee),Ne[I]||(Ue=void 0)),Ue&&J.call(ke,Ue.value,Ue.key,Ne)};ee.exports=be},76:ee=>{ee.exports=function(Re){Re.prototype[Symbol.iterator]=function*(){for(let Ae=this.head;Ae;Ae=Ae.next)yield Ae.value}}},190:(ee,Re,Ae)=>{function ae(P){var T=this;if(T instanceof ae||(T=new ae),T.tail=null,T.head=null,T.length=0,P&&typeof P.forEach=="function")P.forEach(function(N){T.push(N)});else if(arguments.length>0)for(var I=0,i=arguments.length;I<i;I++)T.push(arguments[I]);return T}function F(P,T,I,i){if(!(this instanceof F))return new F(P,T,I,i);this.list=i,this.value=P,T?(T.next=this,this.prev=T):this.prev=null,I?(I.prev=this,this.next=I):this.next=null}ee.exports=ae,ae.Node=F,ae.create=ae,ae.prototype.removeNode=function(P){if(P.list!==this)throw Error("removing node which does not belong to this list");var T=P.next,I=P.prev;return T&&(T.prev=I),I&&(I.next=T),P===this.head&&(this.head=T),P===this.tail&&(this.tail=I),P.list.length--,P.next=null,P.prev=null,P.list=null,T},ae.prototype.unshiftNode=function(P){if(P!==this.head){P.list&&P.list.removeNode(P);var T=this.head;P.list=this,P.next=T,T&&(T.prev=P),this.head=P,this.tail||(this.tail=P),this.length++}},ae.prototype.pushNode=function(P){if(P!==this.tail){P.list&&P.list.removeNode(P);var T=this.tail;P.list=this,P.prev=T,T&&(T.next=P),this.tail=P,this.head||(this.head=P),this.length++}},ae.prototype.push=function(){for(var P,T=0,I=arguments.length;T<I;T++)P=arguments[T],this.tail=new F(P,this.tail,null,this),this.head||(this.head=this.tail),this.length++;return this.length},ae.prototype.unshift=function(){for(var P,T=0,I=arguments.length;T<I;T++)P=arguments[T],this.head=new F(P,null,this.head,this),this.tail||(this.tail=this.head),this.length++;return this.length},ae.prototype.pop=function(){if(this.tail){var P=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,P}},ae.prototype.shift=function(){if(this.head){var P=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,P}},ae.prototype.forEach=function(P,T){T=T||this;for(var I=this.head,i=0;I!==null;i++)P.call(T,I.value,i,this),I=I.next},ae.prototype.forEachReverse=function(P,T){T=T||this;for(var I=this.tail,i=this.length-1;I!==null;i--)P.call(T,I.value,i,this),I=I.prev},ae.prototype.get=function(P){for(var T=0,I=this.head;I!==null&&T<P;T++)I=I.next;if(T===P&&I!==null)return I.value},ae.prototype.getReverse=function(P){for(var T=0,I=this.tail;I!==null&&T<P;T++)I=I.prev;if(T===P&&I!==null)return I.value},ae.prototype.map=function(P,T){T=T||this;for(var I=new ae,i=this.head;i!==null;)I.push(P.call(T,i.value,this)),i=i.next;return I},ae.prototype.mapReverse=function(P,T){T=T||this;for(var I=new ae,i=this.tail;i!==null;)I.push(P.call(T,i.value,this)),i=i.prev;return I},ae.prototype.reduce=function(P,T){var I,i=this.head;if(arguments.length>1)I=T;else if(this.head)i=this.head.next,I=this.head.value;else throw TypeError("Reduce of empty list with no initial value");for(var N=0;i!==null;N++)I=P(I,i.value,N),i=i.next;return I},ae.prototype.reduceReverse=function(P,T){var I,i=this.tail;if(arguments.length>1)I=T;else if(this.tail)i=this.tail.prev,I=this.tail.value;else throw TypeError("Reduce of empty list with no initial value");for(var N=this.length-1;i!==null;N--)I=P(I,i.value,N),i=i.prev;return I},ae.prototype.toArray=function(){for(var P=Array(this.length),T=0,I=this.head;I!==null;T++)P[T]=I.value,I=I.next;return P},ae.prototype.toArrayReverse=function(){for(var P=Array(this.length),T=0,I=this.tail;I!==null;T++)P[T]=I.value,I=I.prev;return P},ae.prototype.slice=function(P,T){(T=T||this.length)<0&&(T+=this.length),(P=P||0)<0&&(P+=this.length);var I=new ae;if(T<P||T<0)return I;P<0&&(P=0),T>this.length&&(T=this.length);for(var i=0,N=this.head;N!==null&&i<P;i++)N=N.next;for(;N!==null&&i<T;i++,N=N.next)I.push(N.value);return I},ae.prototype.sliceReverse=function(P,T){(T=T||this.length)<0&&(T+=this.length),(P=P||0)<0&&(P+=this.length);var I=new ae;if(T<P||T<0)return I;P<0&&(P=0),T>this.length&&(T=this.length);for(var i=this.length,N=this.tail;N!==null&&i>T;i--)N=N.prev;for(;N!==null&&i>P;i--,N=N.prev)I.push(N.value);return I},ae.prototype.splice=function(P,T){P>this.length&&(P=this.length-1),P<0&&(P=this.length+P);for(var I=0,i=this.head;i!==null&&I<P;I++)i=i.next;for(var N=[],I=0;i&&I<T;I++)N.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var I=2;I<arguments.length;I++)i=function(H,ue,le){var fe=ue===H.head?new F(le,null,ue,H):new F(le,ue,ue.next,H);return fe.next===null&&(H.tail=fe),fe.prev===null&&(H.head=fe),H.length++,fe}(this,i,arguments[I]);return N},ae.prototype.reverse=function(){for(var P=this.head,T=this.tail,I=P;I!==null;I=I.prev){var i=I.prev;I.prev=I.next,I.next=i}return this.head=T,this.tail=P,this};try{Ae(76)(ae)}catch{}}},Ce={};function he(ee){var Re=Ce[ee];if(Re!==void 0)return Re.exports;var Ae=Ce[ee]={exports:{}},ae=!0;try{We[ee](Ae,Ae.exports,he),ae=!1}finally{ae&&delete Ce[ee]}return Ae.exports}he.ab="//";var oe=he(806);Xe.exports=oe})()},198:Xe=>{"use strict";(function(){var We={114:function(ee){function Re(F){if(typeof F!="string")throw TypeError("Path must be a string. Received "+JSON.stringify(F))}function Ae(F,P){for(var T,I="",i=0,N=-1,j=0,H=0;H<=F.length;++H){if(H<F.length)T=F.charCodeAt(H);else{if(T===47)break;T=47}if(T===47){if(!(N===H-1||j===1))if(N!==H-1&&j===2){if(I.length<2||i!==2||I.charCodeAt(I.length-1)!==46||I.charCodeAt(I.length-2)!==46){if(I.length>2){var ue=I.lastIndexOf("/");if(ue!==I.length-1){ue===-1?(I="",i=0):i=(I=I.slice(0,ue)).length-1-I.lastIndexOf("/"),N=H,j=0;continue}}else if(I.length===2||I.length===1){I="",i=0,N=H,j=0;continue}}P&&(I.length>0?I+="/..":I="..",i=2)}else I.length>0?I+="/"+F.slice(N+1,H):I=F.slice(N+1,H),i=H-N-1;N=H,j=0}else T===46&&j!==-1?++j:j=-1}return I}var ae={resolve:function(){for(var F,P,T="",I=!1,i=arguments.length-1;i>=-1&&!I;i--)i>=0?P=arguments[i]:(F===void 0&&(F=""),P=F),Re(P),P.length!==0&&(T=P+"/"+T,I=P.charCodeAt(0)===47);return T=Ae(T,!I),I?T.length>0?"/"+T:"/":T.length>0?T:"."},normalize:function(F){if(Re(F),F.length===0)return".";var P=F.charCodeAt(0)===47,T=F.charCodeAt(F.length-1)===47;return(F=Ae(F,!P)).length!==0||P||(F="."),F.length>0&&T&&(F+="/"),P?"/"+F:F},isAbsolute:function(F){return Re(F),F.length>0&&F.charCodeAt(0)===47},join:function(){if(arguments.length==0)return".";for(var F,P=0;P<arguments.length;++P){var T=arguments[P];Re(T),T.length>0&&(F===void 0?F=T:F+="/"+T)}return F===void 0?".":ae.normalize(F)},relative:function(F,P){if(Re(F),Re(P),F===P||(F=ae.resolve(F))===(P=ae.resolve(P)))return"";for(var T=1;T<F.length&&F.charCodeAt(T)===47;++T);for(var I=F.length,i=I-T,N=1;N<P.length&&P.charCodeAt(N)===47;++N);for(var j=P.length-N,H=i<j?i:j,ue=-1,le=0;le<=H;++le){if(le===H){if(j>H){if(P.charCodeAt(N+le)===47)return P.slice(N+le+1);if(le===0)return P.slice(N+le)}else i>H&&(F.charCodeAt(T+le)===47?ue=le:le===0&&(ue=0));break}var fe=F.charCodeAt(T+le);if(fe!==P.charCodeAt(N+le))break;fe===47&&(ue=le)}var be="";for(le=T+ue+1;le<=I;++le)(le===I||F.charCodeAt(le)===47)&&(be.length===0?be+="..":be+="/..");return be.length>0?be+P.slice(N+ue):(N+=ue,P.charCodeAt(N)===47&&++N,P.slice(N))},_makeLong:function(F){return F},dirname:function(F){if(Re(F),F.length===0)return".";for(var P=F.charCodeAt(0),T=P===47,I=-1,i=!0,N=F.length-1;N>=1;--N)if((P=F.charCodeAt(N))===47){if(!i){I=N;break}}else i=!1;return I===-1?T?"/":".":T&&I===1?"//":F.slice(0,I)},basename:function(F,P){if(P!==void 0&&typeof P!="string")throw TypeError('"ext" argument must be a string');Re(F);var T,I=0,i=-1,N=!0;if(P!==void 0&&P.length>0&&P.length<=F.length){if(P.length===F.length&&P===F)return"";var j=P.length-1,H=-1;for(T=F.length-1;T>=0;--T){var ue=F.charCodeAt(T);if(ue===47){if(!N){I=T+1;break}}else H===-1&&(N=!1,H=T+1),j>=0&&(ue===P.charCodeAt(j)?--j==-1&&(i=T):(j=-1,i=H))}return I===i?i=H:i===-1&&(i=F.length),F.slice(I,i)}for(T=F.length-1;T>=0;--T)if(F.charCodeAt(T)===47){if(!N){I=T+1;break}}else i===-1&&(N=!1,i=T+1);return i===-1?"":F.slice(I,i)},extname:function(F){Re(F);for(var P=-1,T=0,I=-1,i=!0,N=0,j=F.length-1;j>=0;--j){var H=F.charCodeAt(j);if(H===47){if(!i){T=j+1;break}continue}I===-1&&(i=!1,I=j+1),H===46?P===-1?P=j:N!==1&&(N=1):P!==-1&&(N=-1)}return P===-1||I===-1||N===0||N===1&&P===I-1&&P===T+1?"":F.slice(P,I)},format:function(F){var P,T;if(F===null||typeof F!="object")throw TypeError('The "pathObject" argument must be of type Object. Received type '+typeof F);return P=F.dir||F.root,T=F.base||(F.name||"")+(F.ext||""),P?P===F.root?P+T:P+"/"+T:T},parse:function(F){Re(F);var P,T={root:"",dir:"",base:"",ext:"",name:""};if(F.length===0)return T;var I=F.charCodeAt(0),i=I===47;i?(T.root="/",P=1):P=0;for(var N=-1,j=0,H=-1,ue=!0,le=F.length-1,fe=0;le>=P;--le){if((I=F.charCodeAt(le))===47){if(!ue){j=le+1;break}continue}H===-1&&(ue=!1,H=le+1),I===46?N===-1?N=le:fe!==1&&(fe=1):N!==-1&&(fe=-1)}return N===-1||H===-1||fe===0||fe===1&&N===H-1&&N===j+1?H!==-1&&(j===0&&i?T.base=T.name=F.slice(1,H):T.base=T.name=F.slice(j,H)):(j===0&&i?(T.name=F.slice(1,N),T.base=F.slice(1,H)):(T.name=F.slice(j,N),T.base=F.slice(j,H)),T.ext=F.slice(N,H)),j>0?T.dir=F.slice(0,j-1):i&&(T.dir="/"),T},sep:"/",delimiter:":",win32:null,posix:null};ae.posix=ae,ee.exports=ae}},Ce={};function he(ee){var Re=Ce[ee];if(Re!==void 0)return Re.exports;var Ae=Ce[ee]={exports:{}},ae=!0;try{We[ee](Ae,Ae.exports,he),ae=!1}finally{ae&&delete Ce[ee]}return Ae.exports}he.ab="//";var oe=he(114);Xe.exports=oe})()},395:(Xe,We,Ce)=>{"use strict";let he;he=Ce(198),Xe.exports=he},985:Xe=>{"use strict";Xe.exports=["chrome 64","edge 79","firefox 67","opera 51","safari 12"]}},Xe=>{var We=Xe(Xe.s=714);(_ENTRIES=typeof _ENTRIES>"u"?{}:_ENTRIES)["middleware_pages/api/users"]=We}]);var Es=function(){let Xe={exports:{},loaded:!1};return function(Ce,he){var oe=Object.defineProperty,ee=i=>oe(i,"__esModule",{value:!0}),Re=(i,N)=>{ee(i);for(var j in N)oe(i,j,{get:N[j],enumerable:!0})};Re(he,{default:()=>F});function Ae(i){let N={};return i&&i.forEach((j,H)=>{N[H]=j,H.toLowerCase()==="set-cookie"&&(N[H]=ae(j))}),N}function ae(i){let N=[],j=0,H,ue,le,fe,be;function Ke(){for(;j<i.length&&/\s/.test(i.charAt(j));)j+=1;return j<i.length}function Je(){return ue=i.charAt(j),ue!=="="&&ue!==";"&&ue!==","}for(;j<i.length;){for(H=j,be=!1;Ke();)if(ue=i.charAt(j),ue===","){for(le=j,j+=1,Ke(),fe=j;j<i.length&&Je();)j+=1;j<i.length&&i.charAt(j)==="="?(be=!0,j=fe,N.push(i.substring(H,le)),H=j):j=le+1}else j+=1;(!be||j>=i.length)&&N.push(i.substring(H,i.length))}return N}function F(i){let N=i.staticRoutes.map(H=>({regexp:new RegExp(H.namedRegex),page:H.page})),j=i.dynamicRoutes?.map(H=>({regexp:new RegExp(H.namedRegex),page:H.page}))||[];return async function(H,ue){let le=new URL(H.url).pathname,fe={};if(i.nextConfig?.basePath&&le.startsWith(i.nextConfig.basePath)&&(le=le.replace(i.nextConfig.basePath,"")||"/"),i.nextConfig?.i18n)for(let Ke of i.nextConfig.i18n.locales){let Je=new RegExp(`^/${Ke}($|/)`,"i");if(le.match(Je)){le=le.replace(Je,"/")||"/";break}}for(let Ke of N)if(Ke.regexp.exec(le)){fe.name=Ke.page;break}if(!fe.name){let Ke=T(le);for(let Je of j||[]){if(Ke&&!T(Je.page))continue;let ut=Je.regexp.exec(le);if(ut){fe={name:Je.page,params:ut.groups};break}}}let be=await _ENTRIES[`middleware_${i.name}`].default.call({},{request:{url:H.url,method:H.method,headers:Ae(H.headers),ip:P(H.headers,I.Ip),geo:{city:P(H.headers,I.City,!0),country:P(H.headers,I.Country,!0),latitude:P(H.headers,I.Latitude),longitude:P(H.headers,I.Longitude),region:P(H.headers,I.Region,!0)},nextConfig:i.nextConfig,page:fe,body:H.body}});return ue.waitUntil(be.waitUntil),be.response}}function P(i,N,j=!1){let H=i.get(N)||void 0;return j&&H?decodeURIComponent(H):H}function T(i){return i==="/api"||i.startsWith("/api/")}var I;(function(i){i.City="x-vercel-ip-city",i.Country="x-vercel-ip-country",i.Ip="x-real-ip",i.Latitude="x-vercel-ip-latitude",i.Longitude="x-vercel-ip-longitude",i.Region="x-vercel-ip-country-region"})(I||(I={}))}(Xe,Xe.exports),Xe.exports}.call({}).default({name:"pages/api/users",staticRoutes:[],dynamicRoutes:[],nextConfig:{basePath:""}});export{Es as default};
/*!
* cookie
* Copyright(c) 2012-2014 Roman Shtylman
* Copyright(c) 2015 Douglas Christopher Wilson
* MIT Licensed
*/
/*! Bundled license information:

ieee754/index.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

buffer/index.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)
*/
